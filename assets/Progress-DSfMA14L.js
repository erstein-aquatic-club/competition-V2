import{r as m,u as N,e as ct,j as t}from"./vendor-query-DyA9aSKS.js";import{a as p}from"./api-7ADM4VoL.js";import{c as ut}from"./date-DrpgLmFD.js";import{u as K,T as mt,C as ke,e as Re,B as gt,f as xt}from"./index-OLfroB1X.js";import{T as ft,a as ht,b as oe,c as U,d as pt,e as I}from"./table-kUFXcKHc.js";import{T as jt,a as yt,b as _e,c as Oe}from"./tabs-CQ9QJRM5.js";import{C as vt,a as bt,b as Nt}from"./collapsible-CO4s9bEw.js";import{s as Ve}from"./score-CwBbkHfb.js";import{i as wt}from"./swim-vy7G2def.js";import{g as St}from"./design-tokens-CKgCpdH6.js";import{b as q}from"./animations-CrcLFysI.js";import{I as Ct}from"./InlineBanner-CGw1FZZi.js";import{P as Dt}from"./PageHeader-Rdb0V7Xb.js";import{s as ie,a as C,e as Pt,f as A}from"./vendor-date-B8Mnp-Vt.js";import{C as At}from"./chart-column-bVRAdZOe.js";import{m as k}from"./vendor-motion-CMsaQ8FX.js";import{a as T,A as Fe,X as E,T as L,b as $e,P as Tt,d as Lt,C as Mt,L as Ke,B as Ie,Y as le,e as de,f as kt,g as Rt}from"./vendor-charts-BrQ8X25f.js";import{T as _t}from"./trending-down-Dk1JCP4M.js";import{C as Ot}from"./chevron-down-DqNh7iI3.js";import"./vendor-react-BzrpNAyj.js";import"./vendor-supabase-DFPLkPj_.js";import"./index-C08NmDF9.js";import"./index-CFtJoroH.js";import"./chevron-left-Bh71aajQ.js";function Y({label:x,value:u,max:g,invert:i=!1}){const j=u!==null?Math.min(100,u/g*100):0,w=Ve(u??null,{invert:i})??"hsl(var(--muted-foreground))";return t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"w-28 shrink-0 text-xs text-muted-foreground truncate",children:x}),t.jsx("div",{className:"relative h-2 flex-1 rounded-full bg-muted overflow-hidden",children:t.jsx(k.div,{className:"absolute inset-y-0 left-0 rounded-full",style:{backgroundColor:w},initial:{width:0},animate:{width:`${j}%`},transition:{duration:.6,ease:"easeOut"}})}),t.jsx("span",{className:"w-10 text-right text-sm font-mono font-semibold tabular-nums",children:u!==null?u.toFixed(1):"-"})]})}function Ee({value:x,unit:u,label:g,trend:i,trendLabel:j}){return t.jsxs(k.div,{className:"flex flex-col items-center gap-0.5 py-2",variants:q,initial:"hidden",animate:"visible",children:[t.jsxs("div",{className:"flex items-baseline gap-1",children:[t.jsx("span",{className:"text-4xl font-mono font-bold tracking-tight",children:x}),u&&t.jsx("span",{className:"text-lg font-mono text-muted-foreground",children:u})]}),t.jsx("span",{className:"text-sm text-muted-foreground",children:g}),i!=null&&t.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-xs font-medium ${i>=0?"bg-emerald-500/10 text-emerald-600":"bg-red-500/10 text-red-600"}`,children:[i>=0?t.jsx(xt,{className:"h-3 w-3"}):t.jsx(_t,{className:"h-3 w-3"}),i>=0?"+":"",i.toFixed(0),"%",j?` ${j}`:""]})]})}function M({value:x,label:u,colored:g,colorValue:i,invert:j}){const w="rounded-full px-3 py-1 text-sm font-mono";if(g&&i!==null&&i!==void 0){const d=Ve(i,{invert:j})??"hsl(var(--muted-foreground))";return t.jsx("span",{className:w,style:{backgroundColor:d,color:St(d)},children:x})}return t.jsxs("span",{className:`${w} bg-muted text-muted-foreground`,children:[x,u?` ${u}`:""]})}function ce(){return t.jsx("div",{className:"space-y-3 animate-pulse motion-reduce:animate-none",children:t.jsx("div",{className:"h-[180px] w-full rounded-xl bg-muted"})})}function ue({title:x,children:u}){const[g,i]=m.useState(!1);return t.jsxs(vt,{open:g,onOpenChange:i,children:[t.jsxs(bt,{className:"flex w-full items-center justify-between rounded-lg bg-muted/50 px-4 py-3 text-sm font-semibold hover:bg-muted transition-colors",children:[x,t.jsx(Ot,{className:`h-4 w-4 text-muted-foreground transition-transform duration-200 ${g?"rotate-180":""}`})]}),t.jsx(Nt,{className:"pt-4 animate-in fade-in slide-in-from-top-2 motion-reduce:animate-none",children:u})]})}const J={borderRadius:"8px",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},qe=[{value:7,label:"7j"},{value:30,label:"30j"},{value:365,label:"1 an"}];function is(){const x=K(e=>e.user),u=K(e=>e.userId),g=K(e=>e.role),i=K(e=>e.selectedAthleteId),j=K(e=>e.selectedAthleteName),w=(g==="coach"||g==="admin")&&(i!==null||!!j),d=w?j:x,f=w?i:u,h=f??d,[X]=m.useState("all"),[me]=m.useState(""),[ge]=m.useState(""),[D,xe]=m.useState(30),[b,fe]=m.useState(30);m.useEffect(()=>{const e=()=>{xe(30),fe(30)};return window.addEventListener("nav:reset",e),()=>window.removeEventListener("nav:reset",e)},[]);const{data:Z=[]}=N({queryKey:["competitions"],queryFn:()=>p.getCompetitions()}),{data:V}=N({queryKey:["my-competition-ids",h],queryFn:()=>p.getMyCompetitionIds(f)}),{data:he}=N({queryKey:["assignments",h],queryFn:()=>p.getAssignments(d,f),enabled:!!d}),{data:pe=[]}=N({queryKey:["planned-absences",h],queryFn:()=>f?p.getPlannedAbsences({userId:f}):p.getMyPlannedAbsences()}),je=m.useMemo(()=>new Set(pe.map(e=>e.date)),[pe]),{data:P,isLoading:Be}=N({queryKey:["sessions",h],queryFn:()=>p.getSessions(d,f),enabled:!!d}),R=ct({queryKey:["strength_history",h,"progress",X,me,ge],queryFn:({pageParam:e=0})=>p.getStrengthHistory(d,{athleteId:f,limit:10,offset:e,order:"desc",status:X==="all"?void 0:X,from:me||void 0,to:ge||void 0}),enabled:!!d,getNextPageParam:e=>{const s=e.pagination.offset+e.pagination.limit;return s<e.pagination.total?s:void 0},initialPageParam:0}),ye=R.data?.pages.flatMap(e=>e.runs)??[],B=ie(C(new Date,b)).toISOString(),H=Pt(new Date).toISOString(),ve=ie(C(new Date,b*2)).toISOString(),be=ie(C(new Date,b)).toISOString(),{data:Ne,isLoading:He}=N({queryKey:["strength_history_summary",h,"progress",b,B,H],queryFn:()=>p.getStrengthHistory(d,{athleteId:f,limit:200,order:"desc",from:B,to:H}),enabled:!!d}),{data:We,isLoading:ze}=N({queryKey:["strength_history_aggregate",h,"progress",b,B,H],queryFn:()=>p.getStrengthHistoryAggregate(d,{athleteId:f,period:"day",limit:200,order:"asc",from:B,to:H}),enabled:!!d}),{data:Qe}=N({queryKey:["strength_history_aggregate_prev",h,"progress",b,ve,be],queryFn:()=>p.getStrengthHistoryAggregate(d,{athleteId:f,period:"day",limit:200,order:"asc",from:ve,to:be}),enabled:!!d}),we=He||ze,ee=Ne?.runs??[],Ge=Ne?.exercise_summary??[],_=We?.periods??[],Ue=Qe?.periods??[],Se=m.useMemo(()=>!V||V.length===0?Z:Z.filter(e=>V.includes(e.id)),[Z,V]),y=m.useMemo(()=>{const e=new Date().toISOString().slice(0,10);return Se.filter(s=>s.date.slice(0,10)>=e).sort((s,a)=>s.date.localeCompare(a.date))[0]??null},[Se]),te=m.useMemo(()=>{if(!y)return null;const e=new Date;e.setHours(0,0,0,0);const s=new Date(y.date.slice(0,10)+"T00:00:00");return Math.round((s.getTime()-e.getTime())/(1e3*60*60*24))},[y]),Ce=m.useMemo(()=>{const e=`swim-dashboard-v2:${h}:presenceDefaults`;try{const a=window.localStorage.getItem(e);if(a)return JSON.parse(a)}catch{}const s={};for(let a=0;a<7;a++)s[a]={AM:!0,PM:!0};return s},[h]),W=m.useMemo(()=>y?ut({compDate:y.date.slice(0,10),assignments:he,absenceDates:je,presenceDefaults:Ce}):null,[y,he,je,Ce]),Ye=e=>{if(!P)return[];const s=C(new Date,e),a=P.filter(n=>new Date(n.date)>=s).reverse(),l=new Map;return a.forEach(n=>{const r=A(new Date(n.date),"dd/MM");l.has(r)||l.set(r,{date:r,distance:0,effort:0,rpe:0,performance:0,engagement:0,fatigue:0,count:0,rpeCount:0,performanceCount:0,engagementCount:0,fatigueCount:0});const o=l.get(r);o.distance+=n.distance,o.effort+=n.effort,o.count+=1,n.rpe!==null&&n.rpe!==void 0&&(o.rpe+=n.rpe,o.rpeCount+=1),n.performance!==null&&n.performance!==void 0&&(o.performance+=n.performance,o.performanceCount+=1),n.engagement!==null&&n.engagement!==void 0&&(o.engagement+=n.engagement,o.engagementCount+=1),n.fatigue!==null&&n.fatigue!==void 0&&(o.fatigue+=n.fatigue,o.fatigueCount+=1)}),Array.from(l.values()).map(n=>({...n,effort:Math.round(n.effort/n.count*10)/10,rpe:n.rpeCount?Math.round(n.rpe/n.rpeCount*10)/10:null,performance:n.performanceCount?Math.round(n.performance/n.performanceCount*10)/10:null,engagement:n.engagementCount?Math.round(n.engagement/n.engagementCount*10)/10:null,fatigue:n.fatigueCount?Math.round(n.fatigue/n.fatigueCount*10)/10:null}))},O=P?P.filter(e=>new Date(e.date)>=C(new Date,D)):[],F=O.length,c=O.reduce((e,s)=>(e.distance+=s.distance,e.duration+=s.duration,s.rpe!==null&&s.rpe!==void 0&&(e.rpeSum+=s.rpe,e.rpeCount+=1),s.performance!==null&&s.performance!==void 0&&(e.performanceSum+=s.performance,e.performanceCount+=1),s.engagement!==null&&s.engagement!==void 0&&(e.engagementSum+=s.engagement,e.engagementCount+=1),s.fatigue!==null&&s.fatigue!==void 0&&(e.fatigueSum+=s.fatigue,e.fatigueCount+=1),e),{distance:0,duration:0,rpeSum:0,rpeCount:0,performanceSum:0,performanceCount:0,engagementSum:0,engagementCount:0,fatigueSum:0,fatigueCount:0}),Je=c.rpeCount?c.rpeSum/c.rpeCount:null,Xe=c.performanceCount?c.performanceSum/c.performanceCount:null,Ze=c.engagementCount?c.engagementSum/c.engagementCount:null,et=c.fatigueCount?c.fatigueSum/c.fatigueCount:null,tt=F?c.duration/F:0,st=F?c.distance/F:0,De=Ye(D),nt=P?((e,s,a,l)=>{const n=new Date,r=C(n,a*2),o=C(n,a),$=s.filter(S=>{const v=new Date(S.date);return v>=r&&v<o}).reduce((S,v)=>S+(v.distance??0),0);return $===0?null:(e-$)/$*100})(c.distance,P,D):null,se=["NL","DOS","BR","PAP","QN"],Pe={NL:"NL",DOS:"Dos",BR:"Brasse",PAP:"Pap",QN:"4N"},Ae={NL:"hsl(210, 80%, 55%)",DOS:"hsl(160, 60%, 45%)",BR:"hsl(35, 85%, 55%)",PAP:"hsl(280, 60%, 55%)",QN:"hsl(340, 70%, 55%)"},z=m.useMemo(()=>{if(!O.length)return{pie:[],daily:[],hasData:!1};const e={NL:0,DOS:0,BR:0,PAP:0,QN:0};let s=!1;const a=new Map;for(const r of O){const o=r.stroke_distances;if(!o)continue;const G=A(new Date(r.date),"dd/MM");a.has(G)||a.set(G,{NL:0,DOS:0,BR:0,PAP:0,QN:0});const $=a.get(G);for(const S of se){const v=o[S];v&&v>0&&(e[S]+=v,$[S]+=v,s=!0)}}const l=se.filter(r=>e[r]>0).map(r=>({name:Pe[r],value:e[r],fill:Ae[r]})),n=Array.from(a.entries()).map(([r,o])=>({date:r,...o}));return{pie:l,daily:n,hasData:s}},[O]),ne=e=>{const a=(Array.isArray(e?.logs)?e.logs:[]).map(r=>r?.rpe!==null&&r?.rpe!==void 0?Number(r.rpe):null).filter(r=>r!==null&&Number.isFinite(r));if(a.length>0)return a.reduce((r,o)=>r+o,0)/a.length;const l=e?.feeling??e?.rpe??null,n=l!=null?Number(l):null;return n!==null&&Number.isFinite(n)?n:null},at=e=>e==null||Number.isNaN(e)?"-":e.toFixed(1),Te=[...ee].sort((e,s)=>{const a=new Date(e.started_at||e.date||e.created_at||0).getTime(),l=new Date(s.started_at||s.date||s.created_at||0).getTime();return a-l}).map(e=>({date:A(new Date(e.started_at||e.date||e.created_at||new Date),"dd/MM"),feeling:ne(e)})),Le=_.map(e=>({date:e.period,label:A(new Date(e.period),"dd/MM"),tonnage:Math.round(e.tonnage??0),volume:Math.round(e.volume??0)})),rt=_.reduce((e,s)=>e+(s.tonnage??0),0),ot=_.reduce((e,s)=>e+(s.volume??0),0),it=ee.length,ae=ee.map(e=>ne(e)).filter(e=>e!==null&&Number.isFinite(e)),Q=ae.length?ae.reduce((e,s)=>e+s,0)/ae.length:null,re=[...Ge].map(e=>({exerciseId:Number(e.exercise_id),name:e.exercise_name||`Exercice ${e.exercise_id}`,totalSets:Number(e.total_sets??0),totalReps:Number(e.total_reps??0),totalVolume:Number(e.total_volume??0),maxWeight:e.max_weight!==null&&e.max_weight!==void 0?Number(e.max_weight):null,lastPerformedAt:e.last_performed_at??null})).sort((e,s)=>s.totalVolume-e.totalVolume),lt=(()=>{if(!_.length)return null;const e=_.reduce((a,l)=>a+(l.tonnage??0),0),s=Ue.reduce((a,l)=>a+(l.tonnage??0),0);return s===0?null:(e-s)/s*100})(),Me=re.slice(0,8),dt=e=>{if(!e)return"-";const s=new Date(e);return Number.isNaN(s.getTime())?"-":A(s,"dd/MM/yyyy")};return t.jsxs("div",{className:"space-y-4 pb-4",children:[t.jsx(Dt,{title:"Analyse",icon:t.jsx(At,{className:"h-3.5 w-3.5"})}),t.jsx(Ct,{variant:"amber",icon:t.jsx(mt,{}),label:y?.name,badge:te===0?"Aujourd'hui":`J-${te}`,sublabel:y?.location,subbadge:W!=null&&W>0?`${W} séance${W>1?"s":""}`:void 0,visible:!!y&&te!=null}),t.jsxs(jt,{defaultValue:"swim",className:"w-full",children:[t.jsxs(yt,{className:"grid w-full max-w-[280px] grid-cols-2",children:[t.jsx(_e,{value:"swim",children:"Natation"}),t.jsx(_e,{value:"strength",children:"Musculation"})]}),t.jsxs(Oe,{value:"swim",className:"space-y-4 mt-4",children:[t.jsx("div",{className:"flex justify-end",children:t.jsx("div",{className:"flex flex-wrap justify-end gap-2",children:qe.map(e=>t.jsx("button",{type:"button",onClick:()=>xe(e.value),className:`rounded-xl border px-3 py-1.5 text-xs font-semibold transition-colors ${D===e.value?"border-primary bg-primary/5 text-primary":"border-border text-muted-foreground hover:border-primary/30 hover:text-foreground"}`,children:e.label},e.value))})}),t.jsx(Ee,{value:(c.distance/1e3).toFixed(1),unit:"km",label:`volume sur ${D} jours`,trend:nt,trendLabel:"vs période préc."}),t.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[t.jsx(M,{value:`${F} séances`}),t.jsx(M,{value:`${Math.round(st).toLocaleString()}m moy`}),t.jsx(M,{value:`${Math.round(tt)}min moy`})]}),t.jsx(k.div,{variants:q,initial:"hidden",animate:"visible",children:t.jsx(ke,{className:"border-0 shadow-none bg-transparent",children:t.jsx(Re,{className:"p-0 h-[140px] w-full",children:Be?t.jsx(ce,{}):De.length===0?t.jsx("div",{className:"flex h-full items-center justify-center text-sm text-muted-foreground",children:"Aucune donnée disponible."}):t.jsx(T,{width:"100%",height:"100%",children:t.jsxs(Fe,{data:De,children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:"swimVolumeGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"0%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),t.jsx("stop",{offset:"100%",stopColor:"hsl(var(--primary))",stopOpacity:0})]})}),t.jsx(E,{dataKey:"date",fontSize:10,tickLine:!1,axisLine:!1}),t.jsx(L,{contentStyle:J,formatter:e=>[`${e.toLocaleString()}m`,"Volume"]}),t.jsx($e,{type:"monotone",dataKey:"distance",stroke:"hsl(var(--primary))",strokeWidth:2,fill:"url(#swimVolumeGradient)",dot:!1,activeDot:{r:5,strokeWidth:2}})]})})})})}),t.jsxs(k.div,{className:"space-y-3",variants:q,initial:"hidden",animate:"visible",children:[t.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Ressentis moyens"}),t.jsx(Y,{label:"Difficulté",value:Je,max:5,invert:!0}),t.jsx(Y,{label:"Performance",value:Xe,max:5}),t.jsx(Y,{label:"Engagement",value:Ze,max:5}),t.jsx(Y,{label:"Fatigue",value:et,max:5,invert:!0})]}),z.hasData&&t.jsx(ue,{title:`Répartition par nage (${D}j)`,children:t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[t.jsx("div",{className:"h-[280px] w-full",children:t.jsx(T,{width:"100%",height:"100%",children:t.jsxs(Tt,{children:[t.jsx(Lt,{data:z.pie,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:90,label:({name:e,percent:s})=>`${e} ${(s*100).toFixed(0)}%`,children:z.pie.map((e,s)=>t.jsx(Mt,{fill:e.fill},`pie-${s}`))}),t.jsx(L,{formatter:e=>[`${e.toLocaleString()}m`,"Distance"]}),t.jsx(Ke,{})]})})}),t.jsx("div",{className:"h-[280px] w-full",children:t.jsx(T,{width:"100%",height:"100%",children:t.jsxs(Ie,{data:z.daily,children:[t.jsx(E,{dataKey:"date",fontSize:10,tickLine:!1,axisLine:!1}),t.jsx(le,{fontSize:10,tickLine:!1,axisLine:!1}),t.jsx(L,{}),se.map(e=>t.jsx(de,{dataKey:e,stackId:"strokes",name:Pe[e],fill:Ae[e],radius:0},e)),t.jsx(Ke,{})]})})})]})})]}),t.jsxs(Oe,{value:"strength",className:"space-y-4 mt-4",children:[t.jsx("div",{className:"flex justify-end",children:t.jsx("div",{className:"flex flex-wrap justify-end gap-2",children:qe.map(e=>t.jsx("button",{type:"button",onClick:()=>fe(e.value),className:`rounded-xl border px-3 py-1.5 text-xs font-semibold transition-colors ${b===e.value?"border-primary bg-primary/5 text-primary":"border-border text-muted-foreground hover:border-primary/30 hover:text-foreground"}`,children:e.label},e.value))})}),t.jsx(Ee,{value:Math.round(rt).toLocaleString(),unit:"kg",label:`tonnage sur ${b} jours`,trend:lt,trendLabel:"vs période préc."}),t.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[t.jsx(M,{value:`${it} séances`}),t.jsx(M,{value:`${Math.round(ot).toLocaleString()} reps`}),t.jsx(M,{value:`RPE ${Q!==null?Q.toFixed(1):"-"}/10`,colored:!0,colorValue:Q!==null?Q/2:null,invert:!0})]}),t.jsx(k.div,{variants:q,initial:"hidden",animate:"visible",children:t.jsx(ke,{className:"border-0 shadow-none bg-transparent",children:t.jsx(Re,{className:"p-0 h-[140px] w-full",children:we?t.jsx(ce,{}):Le.length===0?t.jsx("div",{className:"flex h-full items-center justify-center text-sm text-muted-foreground",children:"Aucune donnée disponible."}):t.jsx(T,{width:"100%",height:"100%",children:t.jsxs(kt,{data:Le,children:[t.jsx(E,{dataKey:"label",fontSize:10,tickLine:!1,axisLine:!1}),t.jsx(L,{contentStyle:J}),t.jsx(de,{dataKey:"tonnage",name:"Tonnage (kg)",fill:"hsl(var(--primary))",radius:[4,4,0,0],opacity:.7}),t.jsx(Rt,{type:"monotone",dataKey:"volume",name:"Volume (reps)",stroke:"hsl(var(--accent))",strokeWidth:2,dot:!1})]})})})})}),t.jsxs(k.div,{variants:q,initial:"hidden",animate:"visible",children:[t.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3",children:"Ressenti par séance"}),t.jsx("div",{className:"h-[130px] w-full",children:we?t.jsx(ce,{}):Te.length===0?t.jsx("div",{className:"flex h-full items-center justify-center text-sm text-muted-foreground",children:"Aucune donnée disponible."}):t.jsx(T,{width:"100%",height:"100%",children:t.jsxs(Fe,{data:Te,children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:"strengthFeelingGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"0%",stopColor:"hsl(var(--foreground))",stopOpacity:.15}),t.jsx("stop",{offset:"100%",stopColor:"hsl(var(--foreground))",stopOpacity:0})]})}),t.jsx(E,{dataKey:"date",fontSize:10,tickLine:!1,axisLine:!1}),t.jsx(le,{domain:[0,10],hide:!0}),t.jsx(L,{contentStyle:J,formatter:e=>[e!==null?e.toFixed(1):"-","RPE"]}),t.jsx($e,{type:"monotone",dataKey:"feeling",stroke:"hsl(var(--foreground))",strokeWidth:2,fill:"url(#strengthFeelingGradient)",dot:{r:4,fill:"hsl(var(--background))",stroke:"hsl(var(--foreground))",strokeWidth:2},activeDot:{r:6}})]})})})]}),t.jsx(ue,{title:"Détail par exercice",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"h-[220px] w-full",children:Me.length===0?t.jsx("div",{className:"flex h-full items-center justify-center text-sm text-muted-foreground",children:"Aucun exercice enregistré."}):t.jsx(T,{width:"100%",height:"100%",children:t.jsxs(Ie,{data:Me,layout:"vertical",children:[t.jsx(E,{type:"number",fontSize:10,tickLine:!1,axisLine:!1}),t.jsx(le,{type:"category",dataKey:"name",fontSize:10,tickLine:!1,axisLine:!1,width:100}),t.jsx(L,{contentStyle:J,formatter:e=>[`${e.toLocaleString()} kg`,"Volume"]}),t.jsx(de,{dataKey:"totalVolume",fill:"hsl(var(--primary))",radius:[0,4,4,0]})]})})}),t.jsx("div",{className:"w-full overflow-x-auto",children:t.jsxs(ft,{children:[t.jsx(ht,{children:t.jsxs(oe,{children:[t.jsx(U,{children:"Exercice"}),t.jsx(U,{className:"text-right",children:"Volume"}),t.jsx(U,{className:"text-right",children:"Max"}),t.jsx(U,{className:"text-right",children:"Dernier"})]})}),t.jsx(pt,{children:re.length===0?t.jsx(oe,{children:t.jsx(I,{colSpan:4,className:"text-center text-sm text-muted-foreground",children:"Aucun exercice enregistré."})}):re.map(e=>t.jsxs(oe,{children:[t.jsx(I,{className:"font-medium text-sm",children:e.name}),t.jsxs(I,{className:"text-right font-mono text-sm",children:[e.totalVolume.toLocaleString()," kg"]}),t.jsx(I,{className:"text-right font-mono text-sm",children:e.maxWeight!==null?wt(e.maxWeight)?"PDC":`${e.maxWeight} kg`:"-"}),t.jsx(I,{className:"text-right text-xs text-muted-foreground",children:dt(e.lastPerformedAt)})]},e.exerciseId))})]})})]})}),t.jsx(ue,{title:"Historique récent",children:t.jsxs("div",{className:"space-y-3",children:[ye.length===0&&t.jsx("div",{className:"text-center text-sm text-muted-foreground py-6",children:"Aucun historique disponible."}),ye.map(e=>t.jsxs("div",{className:"flex items-center justify-between border-b border-border/40 pb-2 last:border-b-0 last:pb-0",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold",children:A(new Date(e.started_at||e.date||e.created_at||new Date),"dd/MM/yyyy")}),t.jsx("div",{className:"text-xs text-muted-foreground",children:e.status||"Séance"})]}),t.jsxs("div",{className:"text-sm font-mono font-semibold",children:[at(ne(e)),"/10"]})]},e.id)),R.hasNextPage&&t.jsx(gt,{variant:"outline",size:"sm",className:"w-full",onClick:()=>R.fetchNextPage(),disabled:R.isFetchingNextPage,children:R.isFetchingNextPage?"Chargement...":"Charger plus"})]})})]})]})]})}export{Y as ProgressBar,is as default};
