import{c as P,C as Ee,a as y,I as ge,B as Gn,y as $n,a4 as ae,z as Ie,a5 as Pe,Y as Ae,a6 as Kn,a7 as Un,a1 as X,a8 as Vn,E as $,A,a9 as Bn,aa as Hn,ab as zn,ad as Wn,a0 as we,g as re,v as Yn}from"./index-BEFtN8Ff.js";import{j as n,r as s,a as Xn}from"./vendor-query-DyA9aSKS.js";import{C as qn}from"./chevron-down-BFSZSmkk.js";import{A as Me,a as Ce,b as be,c as ye,d as je,e as Ne,f as _e,g as Re}from"./alert-dialog-CWhdMWQf.js";import{C as Zn}from"./chevron-left-vupj7URZ.js";import{P as ke}from"./play-BgILqhR7.js";import{S as Jn}from"./save-BlS9-PT5.js";import{c as Qn,u as et}from"./index-B_nzZDaJ.js";import{h as nt,u as tt,R as rt,F as ot,C as at}from"./index-BcUNFVtN.js";import{c as Te,I as st,R as ct}from"./index-DMTDe1Eb.js";import{C as it}from"./chevron-right-B9_58TE1.js";import{C as dt}from"./circle-DNbmWxnA.js";import{C as lt}from"./circle-alert-6c47PJ6y.js";import{P as Se}from"./pencil-qApqpwaq.js";import{S as ut}from"./share-2-C6iscZOY.js";import{T as ft}from"./trash-2-BD52lqhR.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],mt=P("archive",pt);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],uo=P("arrow-down",xt);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],fo=P("arrow-up",ht);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],gt=P("ellipsis-vertical",vt);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=[["path",{d:"M2 9V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-1",key:"fm4g5t"}],["path",{d:"M2 13h10",key:"pgb2dq"}],["path",{d:"m9 16 3-3-3-3",key:"6m91ic"}]],Mt=P("folder-input",wt);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],po=P("folder-plus",Ct);function mo({name:e,onNameChange:r,estimatedDuration:t,onEstimatedDurationChange:o,totalDistance:a,showDuration:c=!0,showTotalDistance:l=!0,additionalFields:d,collapsible:f=!1,collapsed:p=!1,onToggleCollapse:u,collapsedSummary:i}){return n.jsx(Ee,{className:"rounded-2xl border-border",children:n.jsxs("div",{className:"space-y-3 p-4",children:[n.jsxs("button",{type:"button",className:y("flex w-full items-center justify-between text-left",f&&"cursor-pointer"),onClick:f?u:void 0,disabled:!f,children:[n.jsx("div",{className:"text-sm font-semibold",children:"Infos séance"}),f&&n.jsx(qn,{className:y("h-4 w-4 text-muted-foreground transition-transform",!p&&"rotate-180")})]}),f&&p&&i&&n.jsx("div",{className:"pt-1",children:i}),(!f||!p)&&n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsx("div",{className:"text-xs font-semibold text-muted-foreground",children:"Nom"}),n.jsx("div",{className:"mt-1",children:n.jsx(ge,{value:e,onChange:x=>r(x.target.value),placeholder:"Nom de la séance",className:"rounded-2xl"})})]}),c&&o&&n.jsxs("div",{children:[n.jsx("div",{className:"text-xs font-semibold text-muted-foreground",children:"Durée estimée (min)"}),n.jsx("div",{className:"mt-1",children:n.jsx(ge,{type:"number",min:0,value:t||"",onChange:x=>o(x.target.value===""?0:Number(x.target.value)),placeholder:"55",className:"rounded-2xl"})})]}),l&&a!==void 0&&n.jsxs("div",{children:[n.jsx("div",{className:"text-xs font-semibold text-muted-foreground",children:"Distance totale"}),n.jsxs("div",{className:"mt-1 rounded-2xl border border-border bg-muted px-3 py-2 text-sm font-semibold",children:[a,"m"]})]}),d]})]})})}function xo({isEditing:e,isSaving:r,saveDisabled:t,onSave:o,onCancel:a,onPreview:c,onDelete:l,canDelete:d=!0,deleteDialogTitle:f="Supprimer ?",deleteDialogDescription:p="Cette action est définitive.",archiveDialogTitle:u="Archiver ?",archiveDialogDescription:i="L'élément sera masqué.",pendingArchive:x,onArchiveConfirm:g,onArchiveCancel:h,pendingDelete:M,onDeleteConfirm:N,onDeleteCancel:j}){return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center justify-between border-b border-border px-4 py-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{type:"button",onClick:a,className:"inline-flex h-9 w-9 items-center justify-center rounded-full hover:bg-muted","aria-label":"Retour",children:n.jsx(Zn,{className:"h-4 w-4"})}),n.jsx("div",{className:"text-base font-semibold",children:"Édition"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[c&&n.jsx("button",{type:"button",onClick:c,className:"inline-flex h-9 w-9 items-center justify-center rounded-full hover:bg-muted","aria-label":"Aperçu nageur",title:"Aperçu nageur",children:n.jsx(ke,{className:"h-4 w-4"})}),n.jsxs(Gn,{variant:"default",size:"sm",onClick:o,disabled:r||t,className:"h-10 rounded-full",children:[n.jsx(Jn,{className:"h-4 w-4"})," Sauver"]})]})]}),x!==void 0&&g&&h&&n.jsx(Me,{open:x,onOpenChange:k=>!k&&h(),children:n.jsxs(Ce,{children:[n.jsxs(be,{children:[n.jsx(ye,{children:u}),n.jsx(je,{children:i})]}),n.jsxs(Ne,{children:[n.jsx(_e,{children:"Annuler"}),n.jsx(Re,{onClick:g,children:"Archiver"})]})]})}),M!==void 0&&N&&j&&n.jsx(Me,{open:M,onOpenChange:k=>!k&&j(),children:n.jsxs(Ce,{children:[n.jsxs(be,{children:[n.jsx(ye,{children:f}),n.jsx(je,{children:p})]}),n.jsxs(Ne,{children:[n.jsx(_e,{children:"Annuler"}),n.jsx(Re,{onClick:N,children:"Supprimer"})]})]})})]})}function z(e,r,{checkForDefaultPrevented:t=!0}={}){return function(a){if(e?.(a),t===!1||!a.defaultPrevented)return r?.(a)}}var bt=Xn[" useInsertionEffect ".trim().toString()]||$n;function yt({prop:e,defaultProp:r,onChange:t=()=>{},caller:o}){const[a,c,l]=jt({defaultProp:r,onChange:t}),d=e!==void 0,f=d?e:a;{const u=s.useRef(e!==void 0);s.useEffect(()=>{const i=u.current;i!==d&&console.warn(`${o} is changing from ${i?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=d},[d,o])}const p=s.useCallback(u=>{if(d){const i=Nt(u)?u(e):u;i!==e&&l.current?.(i)}else c(u)},[d,e,c,l]);return[f,p]}function jt({defaultProp:e,onChange:r}){const[t,o]=s.useState(e),a=s.useRef(t),c=s.useRef(r);return bt(()=>{c.current=r},[r]),s.useEffect(()=>{a.current!==t&&(c.current?.(t),a.current=t)},[t,a]),[t,o,c]}function Nt(e){return typeof e=="function"}function v(e,r,{checkForDefaultPrevented:t=!0}={}){return function(a){if(e?.(a),t===!1||!a.defaultPrevented)return r?.(a)}}function _t(e){const r=Rt(e),t=s.forwardRef((o,a)=>{const{children:c,...l}=o,d=s.Children.toArray(c),f=d.find(Dt);if(f){const p=f.props.children,u=d.map(i=>i===f?s.Children.count(p)>1?s.Children.only(null):s.isValidElement(p)?p.props.children:null:i);return n.jsx(r,{...l,ref:a,children:s.isValidElement(p)?s.cloneElement(p,void 0,u):null})}return n.jsx(r,{...l,ref:a,children:c})});return t.displayName=`${e}.Slot`,t}function Rt(e){const r=s.forwardRef((t,o)=>{const{children:a,...c}=t;if(s.isValidElement(a)){const l=It(a),d=Et(c,a.props);return a.type!==s.Fragment&&(d.ref=o?ae(o,l):l),s.cloneElement(a,d)}return s.Children.count(a)>1?s.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}var St=Symbol("radix.slottable");function Dt(e){return s.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===St}function Et(e,r){const t={...r};for(const o in r){const a=e[o],c=r[o];/^on[A-Z]/.test(o)?a&&c?t[o]=(...d)=>{const f=c(...d);return a(...d),f}:a&&(t[o]=a):o==="style"?t[o]={...a,...c}:o==="className"&&(t[o]=[a,c].filter(Boolean).join(" "))}return{...e,...t}}function It(e){let r=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,t=r&&"isReactWarning"in r&&r.isReactWarning;return t?e.ref:(r=Object.getOwnPropertyDescriptor(e,"ref")?.get,t=r&&"isReactWarning"in r&&r.isReactWarning,t?e.props.ref:e.props.ref||e.ref)}var oe=["Enter"," "],Pt=["ArrowDown","PageUp","Home"],Oe=["ArrowUp","PageDown","End"],At=[...Pt,...Oe],kt={ltr:[...oe,"ArrowRight"],rtl:[...oe,"ArrowLeft"]},Tt={ltr:["ArrowLeft"],rtl:["ArrowRight"]},K="Menu",[F,Ot,Lt]=Qn(K),[S,Le]=Ie(K,[Lt,Pe,Te]),q=Pe(),Fe=Te(),[Ft,D]=S(K),[Gt,U]=S(K),Ge=e=>{const{__scopeMenu:r,open:t=!1,children:o,dir:a,onOpenChange:c,modal:l=!0}=e,d=q(r),[f,p]=s.useState(null),u=s.useRef(!1),i=Ae(c),x=et(a);return s.useEffect(()=>{const g=()=>{u.current=!0,document.addEventListener("pointerdown",h,{capture:!0,once:!0}),document.addEventListener("pointermove",h,{capture:!0,once:!0})},h=()=>u.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",h,{capture:!0}),document.removeEventListener("pointermove",h,{capture:!0})}},[]),n.jsx(Kn,{...d,children:n.jsx(Ft,{scope:r,open:t,onOpenChange:i,content:f,onContentChange:p,children:n.jsx(Gt,{scope:r,onClose:s.useCallback(()=>i(!1),[i]),isUsingKeyboardRef:u,dir:x,modal:l,children:o})})})};Ge.displayName=K;var $t="MenuAnchor",se=s.forwardRef((e,r)=>{const{__scopeMenu:t,...o}=e,a=q(t);return n.jsx(Un,{...a,...o,ref:r})});se.displayName=$t;var ce="MenuPortal",[Kt,$e]=S(ce,{forceMount:void 0}),Ke=e=>{const{__scopeMenu:r,forceMount:t,children:o,container:a}=e,c=D(ce,r);return n.jsx(Kt,{scope:r,forceMount:t,children:n.jsx(X,{present:t||c.open,children:n.jsx(Vn,{asChild:!0,container:a,children:o})})})};Ke.displayName=ce;var b="MenuContent",[Ut,ie]=S(b),Ue=s.forwardRef((e,r)=>{const t=$e(b,e.__scopeMenu),{forceMount:o=t.forceMount,...a}=e,c=D(b,e.__scopeMenu),l=U(b,e.__scopeMenu);return n.jsx(F.Provider,{scope:e.__scopeMenu,children:n.jsx(X,{present:o||c.open,children:n.jsx(F.Slot,{scope:e.__scopeMenu,children:l.modal?n.jsx(Vt,{...a,ref:r}):n.jsx(Bt,{...a,ref:r})})})})}),Vt=s.forwardRef((e,r)=>{const t=D(b,e.__scopeMenu),o=s.useRef(null),a=$(r,o);return s.useEffect(()=>{const c=o.current;if(c)return nt(c)},[]),n.jsx(de,{...e,ref:a,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:v(e.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),Bt=s.forwardRef((e,r)=>{const t=D(b,e.__scopeMenu);return n.jsx(de,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),Ht=_t("MenuContent.ScrollLock"),de=s.forwardRef((e,r)=>{const{__scopeMenu:t,loop:o=!1,trapFocus:a,onOpenAutoFocus:c,onCloseAutoFocus:l,disableOutsidePointerEvents:d,onEntryFocus:f,onEscapeKeyDown:p,onPointerDownOutside:u,onFocusOutside:i,onInteractOutside:x,onDismiss:g,disableOutsideScroll:h,...M}=e,N=D(b,t),j=U(b,t),k=q(t),Pn=Fe(t),pe=Ot(t),[An,me]=s.useState(null),V=s.useRef(null),kn=$(r,V,N.onContentChange),B=s.useRef(0),H=s.useRef(""),Tn=s.useRef(0),Q=s.useRef(null),xe=s.useRef("right"),ee=s.useRef(0),On=h?rt:s.Fragment,Ln=h?{as:Ht,allowPinchZoom:!0}:void 0,Fn=m=>{const I=H.current+m,_=pe().filter(C=>!C.disabled),T=document.activeElement,ne=_.find(C=>C.ref.current===T)?.textValue,te=_.map(C=>C.textValue),he=rr(te,I,ne),O=_.find(C=>C.textValue===he)?.ref.current;(function C(ve){H.current=ve,window.clearTimeout(B.current),ve!==""&&(B.current=window.setTimeout(()=>C(""),1e3))})(I),O&&setTimeout(()=>O.focus())};s.useEffect(()=>()=>window.clearTimeout(B.current),[]),tt();const E=s.useCallback(m=>xe.current===Q.current?.side&&ar(m,Q.current?.area),[]);return n.jsx(Ut,{scope:t,searchRef:H,onItemEnter:s.useCallback(m=>{E(m)&&m.preventDefault()},[E]),onItemLeave:s.useCallback(m=>{E(m)||(V.current?.focus(),me(null))},[E]),onTriggerLeave:s.useCallback(m=>{E(m)&&m.preventDefault()},[E]),pointerGraceTimerRef:Tn,onPointerGraceIntentChange:s.useCallback(m=>{Q.current=m},[]),children:n.jsx(On,{...Ln,children:n.jsx(ot,{asChild:!0,trapped:a,onMountAutoFocus:v(c,m=>{m.preventDefault(),V.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:n.jsx(Bn,{asChild:!0,disableOutsidePointerEvents:d,onEscapeKeyDown:p,onPointerDownOutside:u,onFocusOutside:i,onInteractOutside:x,onDismiss:g,children:n.jsx(ct,{asChild:!0,...Pn,dir:j.dir,orientation:"vertical",loop:o,currentTabStopId:An,onCurrentTabStopIdChange:me,onEntryFocus:v(f,m=>{j.isUsingKeyboardRef.current||m.preventDefault()}),preventScrollOnEntryFocus:!0,children:n.jsx(Hn,{role:"menu","aria-orientation":"vertical","data-state":on(N.open),"data-radix-menu-content":"",dir:j.dir,...k,...M,ref:kn,style:{outline:"none",...M.style},onKeyDown:v(M.onKeyDown,m=>{const _=m.target.closest("[data-radix-menu-content]")===m.currentTarget,T=m.ctrlKey||m.altKey||m.metaKey,ne=m.key.length===1;_&&(m.key==="Tab"&&m.preventDefault(),!T&&ne&&Fn(m.key));const te=V.current;if(m.target!==te||!At.includes(m.key))return;m.preventDefault();const O=pe().filter(C=>!C.disabled).map(C=>C.ref.current);Oe.includes(m.key)&&O.reverse(),nr(O)}),onBlur:v(e.onBlur,m=>{m.currentTarget.contains(m.target)||(window.clearTimeout(B.current),H.current="")}),onPointerMove:v(e.onPointerMove,G(m=>{const I=m.target,_=ee.current!==m.clientX;if(m.currentTarget.contains(I)&&_){const T=m.clientX>ee.current?"right":"left";xe.current=T,ee.current=m.clientX}}))})})})})})})});Ue.displayName=b;var zt="MenuGroup",le=s.forwardRef((e,r)=>{const{__scopeMenu:t,...o}=e;return n.jsx(A.div,{role:"group",...o,ref:r})});le.displayName=zt;var Wt="MenuLabel",Ve=s.forwardRef((e,r)=>{const{__scopeMenu:t,...o}=e;return n.jsx(A.div,{...o,ref:r})});Ve.displayName=Wt;var W="MenuItem",De="menu.itemSelect",Z=s.forwardRef((e,r)=>{const{disabled:t=!1,onSelect:o,...a}=e,c=s.useRef(null),l=U(W,e.__scopeMenu),d=ie(W,e.__scopeMenu),f=$(r,c),p=s.useRef(!1),u=()=>{const i=c.current;if(!t&&i){const x=new CustomEvent(De,{bubbles:!0,cancelable:!0});i.addEventListener(De,g=>o?.(g),{once:!0}),Wn(i,x),x.defaultPrevented?p.current=!1:l.onClose()}};return n.jsx(Be,{...a,ref:f,disabled:t,onClick:v(e.onClick,u),onPointerDown:i=>{e.onPointerDown?.(i),p.current=!0},onPointerUp:v(e.onPointerUp,i=>{p.current||i.currentTarget?.click()}),onKeyDown:v(e.onKeyDown,i=>{const x=d.searchRef.current!=="";t||x&&i.key===" "||oe.includes(i.key)&&(i.currentTarget.click(),i.preventDefault())})})});Z.displayName=W;var Be=s.forwardRef((e,r)=>{const{__scopeMenu:t,disabled:o=!1,textValue:a,...c}=e,l=ie(W,t),d=Fe(t),f=s.useRef(null),p=$(r,f),[u,i]=s.useState(!1),[x,g]=s.useState("");return s.useEffect(()=>{const h=f.current;h&&g((h.textContent??"").trim())},[c.children]),n.jsx(F.ItemSlot,{scope:t,disabled:o,textValue:a??x,children:n.jsx(st,{asChild:!0,...d,focusable:!o,children:n.jsx(A.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":o||void 0,"data-disabled":o?"":void 0,...c,ref:p,onPointerMove:v(e.onPointerMove,G(h=>{o?l.onItemLeave(h):(l.onItemEnter(h),h.defaultPrevented||h.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:v(e.onPointerLeave,G(h=>l.onItemLeave(h))),onFocus:v(e.onFocus,()=>i(!0)),onBlur:v(e.onBlur,()=>i(!1))})})})}),Yt="MenuCheckboxItem",He=s.forwardRef((e,r)=>{const{checked:t=!1,onCheckedChange:o,...a}=e;return n.jsx(qe,{scope:e.__scopeMenu,checked:t,children:n.jsx(Z,{role:"menuitemcheckbox","aria-checked":Y(t)?"mixed":t,...a,ref:r,"data-state":fe(t),onSelect:v(a.onSelect,()=>o?.(Y(t)?!0:!t),{checkForDefaultPrevented:!1})})})});He.displayName=Yt;var ze="MenuRadioGroup",[Xt,qt]=S(ze,{value:void 0,onValueChange:()=>{}}),We=s.forwardRef((e,r)=>{const{value:t,onValueChange:o,...a}=e,c=Ae(o);return n.jsx(Xt,{scope:e.__scopeMenu,value:t,onValueChange:c,children:n.jsx(le,{...a,ref:r})})});We.displayName=ze;var Ye="MenuRadioItem",Xe=s.forwardRef((e,r)=>{const{value:t,...o}=e,a=qt(Ye,e.__scopeMenu),c=t===a.value;return n.jsx(qe,{scope:e.__scopeMenu,checked:c,children:n.jsx(Z,{role:"menuitemradio","aria-checked":c,...o,ref:r,"data-state":fe(c),onSelect:v(o.onSelect,()=>a.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});Xe.displayName=Ye;var ue="MenuItemIndicator",[qe,Zt]=S(ue,{checked:!1}),Ze=s.forwardRef((e,r)=>{const{__scopeMenu:t,forceMount:o,...a}=e,c=Zt(ue,t);return n.jsx(X,{present:o||Y(c.checked)||c.checked===!0,children:n.jsx(A.span,{...a,ref:r,"data-state":fe(c.checked)})})});Ze.displayName=ue;var Jt="MenuSeparator",Je=s.forwardRef((e,r)=>{const{__scopeMenu:t,...o}=e;return n.jsx(A.div,{role:"separator","aria-orientation":"horizontal",...o,ref:r})});Je.displayName=Jt;var Qt="MenuArrow",Qe=s.forwardRef((e,r)=>{const{__scopeMenu:t,...o}=e,a=q(t);return n.jsx(zn,{...a,...o,ref:r})});Qe.displayName=Qt;var er="MenuSub",[ho,en]=S(er),L="MenuSubTrigger",nn=s.forwardRef((e,r)=>{const t=D(L,e.__scopeMenu),o=U(L,e.__scopeMenu),a=en(L,e.__scopeMenu),c=ie(L,e.__scopeMenu),l=s.useRef(null),{pointerGraceTimerRef:d,onPointerGraceIntentChange:f}=c,p={__scopeMenu:e.__scopeMenu},u=s.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return s.useEffect(()=>u,[u]),s.useEffect(()=>{const i=d.current;return()=>{window.clearTimeout(i),f(null)}},[d,f]),n.jsx(se,{asChild:!0,...p,children:n.jsx(Be,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":a.contentId,"data-state":on(t.open),...e,ref:ae(r,a.onTriggerChange),onClick:i=>{e.onClick?.(i),!(e.disabled||i.defaultPrevented)&&(i.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:v(e.onPointerMove,G(i=>{c.onItemEnter(i),!i.defaultPrevented&&!e.disabled&&!t.open&&!l.current&&(c.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{t.onOpenChange(!0),u()},100))})),onPointerLeave:v(e.onPointerLeave,G(i=>{u();const x=t.content?.getBoundingClientRect();if(x){const g=t.content?.dataset.side,h=g==="right",M=h?-5:5,N=x[h?"left":"right"],j=x[h?"right":"left"];c.onPointerGraceIntentChange({area:[{x:i.clientX+M,y:i.clientY},{x:N,y:x.top},{x:j,y:x.top},{x:j,y:x.bottom},{x:N,y:x.bottom}],side:g}),window.clearTimeout(d.current),d.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(i),i.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:v(e.onKeyDown,i=>{const x=c.searchRef.current!=="";e.disabled||x&&i.key===" "||kt[o.dir].includes(i.key)&&(t.onOpenChange(!0),t.content?.focus(),i.preventDefault())})})})});nn.displayName=L;var tn="MenuSubContent",rn=s.forwardRef((e,r)=>{const t=$e(b,e.__scopeMenu),{forceMount:o=t.forceMount,...a}=e,c=D(b,e.__scopeMenu),l=U(b,e.__scopeMenu),d=en(tn,e.__scopeMenu),f=s.useRef(null),p=$(r,f);return n.jsx(F.Provider,{scope:e.__scopeMenu,children:n.jsx(X,{present:o||c.open,children:n.jsx(F.Slot,{scope:e.__scopeMenu,children:n.jsx(de,{id:d.contentId,"aria-labelledby":d.triggerId,...a,ref:p,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{l.isUsingKeyboardRef.current&&f.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:v(e.onFocusOutside,u=>{u.target!==d.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:v(e.onEscapeKeyDown,u=>{l.onClose(),u.preventDefault()}),onKeyDown:v(e.onKeyDown,u=>{const i=u.currentTarget.contains(u.target),x=Tt[l.dir].includes(u.key);i&&x&&(c.onOpenChange(!1),d.trigger?.focus(),u.preventDefault())})})})})})});rn.displayName=tn;function on(e){return e?"open":"closed"}function Y(e){return e==="indeterminate"}function fe(e){return Y(e)?"indeterminate":e?"checked":"unchecked"}function nr(e){const r=document.activeElement;for(const t of e)if(t===r||(t.focus(),document.activeElement!==r))return}function tr(e,r){return e.map((t,o)=>e[(r+o)%e.length])}function rr(e,r,t){const a=r.length>1&&Array.from(r).every(p=>p===r[0])?r[0]:r,c=t?e.indexOf(t):-1;let l=tr(e,Math.max(c,0));a.length===1&&(l=l.filter(p=>p!==t));const f=l.find(p=>p.toLowerCase().startsWith(a.toLowerCase()));return f!==t?f:void 0}function or(e,r){const{x:t,y:o}=e;let a=!1;for(let c=0,l=r.length-1;c<r.length;l=c++){const d=r[c],f=r[l],p=d.x,u=d.y,i=f.x,x=f.y;u>o!=x>o&&t<(i-p)*(o-u)/(x-u)+p&&(a=!a)}return a}function ar(e,r){if(!r)return!1;const t={x:e.clientX,y:e.clientY};return or(t,r)}function G(e){return r=>r.pointerType==="mouse"?e(r):void 0}var sr=Ge,cr=se,ir=Ke,dr=Ue,lr=le,ur=Ve,fr=Z,pr=He,mr=We,xr=Xe,hr=Ze,vr=Je,gr=Qe,wr=nn,Mr=rn,J="DropdownMenu",[Cr]=Ie(J,[Le]),w=Le(),[br,an]=Cr(J),sn=e=>{const{__scopeDropdownMenu:r,children:t,dir:o,open:a,defaultOpen:c,onOpenChange:l,modal:d=!0}=e,f=w(r),p=s.useRef(null),[u,i]=yt({prop:a,defaultProp:c??!1,onChange:l,caller:J});return n.jsx(br,{scope:r,triggerId:we(),triggerRef:p,contentId:we(),open:u,onOpenChange:i,onOpenToggle:s.useCallback(()=>i(x=>!x),[i]),modal:d,children:n.jsx(sr,{...f,open:u,onOpenChange:i,dir:o,modal:d,children:t})})};sn.displayName=J;var cn="DropdownMenuTrigger",dn=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:t,disabled:o=!1,...a}=e,c=an(cn,t),l=w(t);return n.jsx(cr,{asChild:!0,...l,children:n.jsx(A.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":o?"":void 0,disabled:o,...a,ref:ae(r,c.triggerRef),onPointerDown:z(e.onPointerDown,d=>{!o&&d.button===0&&d.ctrlKey===!1&&(c.onOpenToggle(),c.open||d.preventDefault())}),onKeyDown:z(e.onKeyDown,d=>{o||(["Enter"," "].includes(d.key)&&c.onOpenToggle(),d.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(d.key)&&d.preventDefault())})})})});dn.displayName=cn;var yr="DropdownMenuPortal",ln=e=>{const{__scopeDropdownMenu:r,...t}=e,o=w(r);return n.jsx(ir,{...o,...t})};ln.displayName=yr;var un="DropdownMenuContent",fn=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:t,...o}=e,a=an(un,t),c=w(t),l=s.useRef(!1);return n.jsx(dr,{id:a.contentId,"aria-labelledby":a.triggerId,...c,...o,ref:r,onCloseAutoFocus:z(e.onCloseAutoFocus,d=>{l.current||a.triggerRef.current?.focus(),l.current=!1,d.preventDefault()}),onInteractOutside:z(e.onInteractOutside,d=>{const f=d.detail.originalEvent,p=f.button===0&&f.ctrlKey===!0,u=f.button===2||p;(!a.modal||u)&&(l.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});fn.displayName=un;var jr="DropdownMenuGroup",Nr=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:t,...o}=e,a=w(t);return n.jsx(lr,{...a,...o,ref:r})});Nr.displayName=jr;var _r="DropdownMenuLabel",pn=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:t,...o}=e,a=w(t);return n.jsx(ur,{...a,...o,ref:r})});pn.displayName=_r;var Rr="DropdownMenuItem",mn=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:t,...o}=e,a=w(t);return n.jsx(fr,{...a,...o,ref:r})});mn.displayName=Rr;var Sr="DropdownMenuCheckboxItem",xn=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:t,...o}=e,a=w(t);return n.jsx(pr,{...a,...o,ref:r})});xn.displayName=Sr;var Dr="DropdownMenuRadioGroup",Er=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:t,...o}=e,a=w(t);return n.jsx(mr,{...a,...o,ref:r})});Er.displayName=Dr;var Ir="DropdownMenuRadioItem",hn=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:t,...o}=e,a=w(t);return n.jsx(xr,{...a,...o,ref:r})});hn.displayName=Ir;var Pr="DropdownMenuItemIndicator",vn=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:t,...o}=e,a=w(t);return n.jsx(hr,{...a,...o,ref:r})});vn.displayName=Pr;var Ar="DropdownMenuSeparator",gn=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:t,...o}=e,a=w(t);return n.jsx(vr,{...a,...o,ref:r})});gn.displayName=Ar;var kr="DropdownMenuArrow",Tr=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:t,...o}=e,a=w(t);return n.jsx(gr,{...a,...o,ref:r})});Tr.displayName=kr;var Or="DropdownMenuSubTrigger",wn=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:t,...o}=e,a=w(t);return n.jsx(wr,{...a,...o,ref:r})});wn.displayName=Or;var Lr="DropdownMenuSubContent",Mn=s.forwardRef((e,r)=>{const{__scopeDropdownMenu:t,...o}=e,a=w(t);return n.jsx(Mr,{...a,...o,ref:r,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Mn.displayName=Lr;var Fr=sn,Gr=dn,$r=ln,Cn=fn,bn=pn,yn=mn,jn=xn,Nn=hn,_n=vn,Rn=gn,Sn=wn,Dn=Mn;const Kr=Fr,Ur=Gr,Vr=s.forwardRef(({className:e,inset:r,children:t,...o},a)=>n.jsxs(Sn,{ref:a,className:y("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",e),...o,children:[t,n.jsx(it,{className:"ml-auto"})]}));Vr.displayName=Sn.displayName;const Br=s.forwardRef(({className:e,...r},t)=>n.jsx(Dn,{ref:t,className:y("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...r}));Br.displayName=Dn.displayName;const En=s.forwardRef(({className:e,sideOffset:r=4,...t},o)=>n.jsx($r,{children:n.jsx(Cn,{ref:o,sideOffset:r,className:y("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t})}));En.displayName=Cn.displayName;const R=s.forwardRef(({className:e,inset:r,...t},o)=>n.jsx(yn,{ref:o,className:y("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",r&&"pl-8",e),...t}));R.displayName=yn.displayName;const Hr=s.forwardRef(({className:e,children:r,checked:t,...o},a)=>n.jsxs(jn,{ref:a,className:y("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:t,...o,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(_n,{children:n.jsx(at,{className:"h-4 w-4"})})}),r]}));Hr.displayName=jn.displayName;const zr=s.forwardRef(({className:e,children:r,...t},o)=>n.jsxs(Nn,{ref:o,className:y("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(_n,{children:n.jsx(dt,{className:"h-2 w-2 fill-current"})})}),r]}));zr.displayName=Nn.displayName;const Wr=s.forwardRef(({className:e,inset:r,...t},o)=>n.jsx(bn,{ref:o,className:y("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",e),...t}));Wr.displayName=bn.displayName;const In=s.forwardRef(({className:e,...r},t)=>n.jsx(Rn,{ref:t,className:y("-mx-1 my-1 h-px bg-muted",e),...r}));In.displayName=Rn.displayName;function vo({sessions:e,isLoading:r,error:t,renderTitle:o,renderMetrics:a,onPreview:c,onEdit:l,onArchive:d,onDelete:f,canDelete:p,isDeleting:u,onMove:i,onShare:x,archiveMode:g="archive"}){return r?n.jsx("div",{className:"space-y-2",children:Array.from({length:4}).map((h,M)=>n.jsx("div",{className:"rounded-2xl border border-border p-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx(re,{className:"h-4 w-3/4 mb-1.5"}),n.jsx(re,{className:"h-3.5 w-1/2"})]}),n.jsx(re,{className:"h-8 w-8 rounded-full shrink-0"})]})},`skeleton-${M}`))}):t?n.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[n.jsx(lt,{className:"h-12 w-12 text-destructive mb-4"}),n.jsx("h3",{className:"font-semibold",children:"Impossible de charger les données"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:t instanceof Error?t.message:"Une erreur s'est produite"})]}):e.length===0?n.jsx("div",{className:"rounded-2xl border border-dashed border-border bg-muted px-3 py-6 text-center text-sm text-muted-foreground",children:"Aucune séance trouvée."}):n.jsx("div",{className:"space-y-2",children:e.map(h=>{const M=p(h.id);return n.jsx(Ee,{className:"rounded-2xl border-border transition-colors active:bg-muted/50",children:n.jsxs("div",{className:"flex items-center gap-2 p-3",children:[n.jsxs("button",{type:"button",onClick:()=>c(h),className:"flex min-w-0 flex-1 flex-col gap-0.5 text-left",children:[n.jsx("div",{className:"text-sm font-semibold leading-snug",children:o(h)}),n.jsx("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-0.5 text-xs text-muted-foreground",children:a(h)})]}),n.jsx("button",{type:"button",onClick:()=>l(h),className:"inline-flex h-10 w-10 shrink-0 items-center justify-center rounded-full text-muted-foreground hover:bg-muted hover:text-foreground","aria-label":"Modifier",children:n.jsx(Se,{className:"h-3.5 w-3.5"})}),n.jsxs(Kr,{children:[n.jsx(Ur,{asChild:!0,children:n.jsx("button",{type:"button",className:"inline-flex h-10 w-10 shrink-0 items-center justify-center rounded-full text-muted-foreground hover:bg-muted hover:text-foreground","aria-label":"Actions",children:n.jsx(gt,{className:"h-4 w-4"})})}),n.jsxs(En,{align:"end",className:"w-48",children:[n.jsxs(R,{onClick:()=>c(h),children:[n.jsx(ke,{className:"h-4 w-4"}),"Aperçu"]}),n.jsxs(R,{onClick:()=>l(h),children:[n.jsx(Se,{className:"h-4 w-4"}),"Modifier"]}),x&&n.jsxs(R,{onClick:()=>x(h),children:[n.jsx(ut,{className:"h-4 w-4"}),"Partager"]}),i&&n.jsxs(R,{onClick:()=>i(h),children:[n.jsx(Mt,{className:"h-4 w-4"}),"Déplacer"]}),d&&n.jsxs(R,{onClick:()=>d(h),children:[g==="restore"?n.jsx(Yn,{className:"h-4 w-4"}):n.jsx(mt,{className:"h-4 w-4"}),g==="restore"?"Restaurer":"Archiver"]}),n.jsx(In,{}),n.jsxs(R,{onClick:()=>f(h),disabled:!M||u,className:"text-destructive focus:text-destructive",children:[n.jsx(ft,{className:"h-4 w-4"}),M?"Supprimer":"Utilisée (assignation)"]})]})]})]})},h.id)})})}export{fo as A,xo as F,mo as S,uo as a,Mt as b,po as c,vo as d,mt as e};
