import{i as _,c as k}from"./index-DNODqqqp.js";import{r as i,j as r}from"./vendor-ui-DJQMR4VV.js";import{M as F,i as T,u as $,P as W,a as D,b as H,L as K,m as L,c as U}from"./animations-BPeNADWv.js";import{L as q}from"./loader-circle-DSY_Sw-R.js";import{C as G}from"./circle-check-l2zN5AcE.js";import{C as V}from"./circle-alert-0p_Ck6v_.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],le=_("chevron-right",X);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ae=_("info",J);function I(e,o){if(typeof e=="function")return e(o);e!=null&&(e.current=o)}function O(...e){return o=>{let t=!1;const n=e.map(c=>{const s=I(c,o);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let c=0;c<n.length;c++){const s=n[c];typeof s=="function"?s():I(e[c],null)}}}}function Q(...e){return i.useCallback(O(...e),e)}class Y extends i.Component{getSnapshotBeforeUpdate(o){const t=this.props.childRef.current;if(t&&o.isPresent&&!this.props.isPresent){const n=t.offsetParent,c=T(n)&&n.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=c-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Z({children:e,isPresent:o,anchorX:t,root:n}){const c=i.useId(),s=i.useRef(null),m=i.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:C}=i.useContext(F),b=Q(s,e?.ref);return i.useInsertionEffect(()=>{const{width:l,height:y,top:a,left:f,right:h}=m.current;if(o||!s.current||!l||!y)return;const x=t==="left"?`left: ${f}`:`right: ${h}`;s.current.dataset.motionPopId=c;const d=document.createElement("style");C&&(d.nonce=C);const w=n??document.head;return w.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${c}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${y}px !important;
            ${x}px !important;
            top: ${a}px !important;
          }
        `),()=>{w.contains(d)&&w.removeChild(d)}},[o]),r.jsx(Y,{isPresent:o,childRef:s,sizeRef:m,children:i.cloneElement(e,{ref:b})})}const S=({children:e,initial:o,isPresent:t,onExitComplete:n,custom:c,presenceAffectsLayout:s,mode:m,anchorX:C,root:b})=>{const l=$(ee),y=i.useId();let a=!0,f=i.useMemo(()=>(a=!1,{id:y,initial:o,isPresent:t,custom:c,onExitComplete:h=>{l.set(h,!0);for(const x of l.values())if(!x)return;n&&n()},register:h=>(l.set(h,!1),()=>l.delete(h))}),[t,l,n]);return s&&a&&(f={...f}),i.useMemo(()=>{l.forEach((h,x)=>l.set(x,!1))},[t]),i.useEffect(()=>{!t&&!l.size&&n&&n()},[t]),m==="popLayout"&&(e=r.jsx(Z,{isPresent:t,anchorX:C,root:b,children:e})),r.jsx(W.Provider,{value:f,children:e})};function ee(){return new Map}const R=e=>e.key||"";function N(e){const o=[];return i.Children.forEach(e,t=>{i.isValidElement(t)&&o.push(t)}),o}const te=({children:e,custom:o,initial:t=!0,onExitComplete:n,presenceAffectsLayout:c=!0,mode:s="sync",propagate:m=!1,anchorX:C="left",root:b})=>{const[l,y]=D(m),a=i.useMemo(()=>N(e),[e]),f=m&&!l?[]:a.map(R),h=i.useRef(!0),x=i.useRef(a),d=$(()=>new Map),[w,z]=i.useState(a),[g,P]=i.useState(a);H(()=>{h.current=!1,x.current=a;for(let p=0;p<g.length;p++){const u=R(g[p]);f.includes(u)?d.delete(u):d.get(u)!==!0&&d.set(u,!1)}},[g,f.length,f.join("-")]);const v=[];if(a!==w){let p=[...a];for(let u=0;u<g.length;u++){const j=g[u],E=R(j);f.includes(E)||(p.splice(u,0,j),v.push(j))}return s==="wait"&&v.length&&(p=v),P(N(p)),z(a),null}const{forceRender:A}=i.useContext(K);return r.jsx(r.Fragment,{children:g.map(p=>{const u=R(p),j=m&&!l?!1:a===g||f.includes(u),E=()=>{if(d.has(u))d.set(u,!0);else return;let M=!0;d.forEach(B=>{B||(M=!1)}),M&&(A?.(),P(x.current),m&&y?.(),n&&n())};return r.jsx(S,{isPresent:j,initial:!h.current||t?void 0:!1,custom:o,presenceAffectsLayout:c,mode:s,root:b,onExitComplete:j?void 0:E,anchorX:C,children:p},u)})})};function ue({children:e,className:o,containerClassName:t,saveState:n="idle",saveMessage:c}){return r.jsxs("div",{role:"region","aria-label":"Actions",className:k("fixed bottom-16 left-0 right-0 z-bar md:bottom-0 md:z-bar",o),children:[r.jsx(te,{mode:"wait",children:n!=="idle"&&r.jsxs(L.div,{variants:n==="saved"?U:void 0,initial:"hidden",animate:"visible",exit:{opacity:0,scale:.8},className:k("mx-auto mb-2 flex max-w-md items-center justify-center gap-2 rounded-full px-4 py-2 text-sm font-medium shadow-lg motion-reduce:animate-none",n==="saving"&&"bg-muted text-muted-foreground",n==="saved"&&"bg-status-success text-white",n==="error"&&"bg-destructive text-destructive-foreground"),role:"status","aria-live":"polite",children:[n==="saving"&&r.jsxs(r.Fragment,{children:[r.jsx(q,{className:"h-4 w-4 animate-spin"}),r.jsx("span",{children:c||"Enregistrement..."})]}),n==="saved"&&r.jsxs(r.Fragment,{children:[r.jsx(L.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,type:"spring",stiffness:300},children:r.jsx(G,{className:"h-4 w-4"})}),r.jsx("span",{children:c||"Enregistr√©"})]}),n==="error"&&r.jsxs(r.Fragment,{children:[r.jsx(V,{className:"h-4 w-4"}),r.jsx("span",{children:c||"Erreur lors de l'enregistrement"})]})]},n)}),r.jsx("div",{className:k("mx-auto flex w-full max-w-md items-center justify-between gap-2 border-t bg-background px-4 py-3 shadow-[0_-2px_10px_rgba(0,0,0,0.1)]","md:supports-[padding:env(safe-area-inset-bottom)]:pb-[calc(env(safe-area-inset-bottom)+0.75rem)]",t),children:e})]})}export{te as A,ue as B,le as C,ae as I};
