import{a as b,r as K,u as je,e as nn,j as a}from"./vendor-query-BiSH4r2z.js";import{a as ae}from"./api-D5nrcq73.js";import{c as rn,f as nt,u as an,C as He,g as Ge,B as sn,h as on}from"./index-Dz1G674X.js";import{T as ln,a as cn,b as Qe,c as De,d as un,e as Ae}from"./table-WyMfRGtx.js";import{T as dn,a as mn,b as ct,c as ut}from"./tabs-D5d0d_ur.js";import{T as dt,a as ie}from"./toggle-group-DdZNzTCF.js";import{C as pn,a as fn,b as hn}from"./collapsible-B8HaSRp7.js";import{s as At}from"./score-CwBbkHfb.js";import{g as xn}from"./design-tokens-CKgCpdH6.js";import{b as ue}from"./animations-CrcLFysI.js";import{B as mt}from"./badge-0qYR7AHK.js";import{t as yn,s as Ye,f as se}from"./format-B9mPVj_w.js";import{s as J}from"./subDays-BHZeCtPl.js";import{m as U}from"./proxy-Dh0N-Z8G.js";import{T as gn}from"./target-BmbtZu6V.js";import{f as H,L as F,m as Ce,i as de,C as $e,A as St,a as z,b as Q,c as vn,d as Je,h as bn,e as wt,u as Pt,g as Le,G as Nt,j as me,k as Re,D as jn,S as pt,l as An,n as Sn,o as Ot,E as wn,p as Pn,q as _t,r as Dt,X as ee,Y as Se,s as Ct,B as ke,R as oe,T as le,t as ft}from"./generateCategoricalChart-BSyXH3X3.js";import{P as Nn,a as On,B as ht,T as _n}from"./PieChart-B4Bh7WC3.js";import{L as Et}from"./Line-2tO-pALX.js";import{C as Dn}from"./chevron-down-DeyqN5a9.js";import"./vendor-react-BzrpNAyj.js";import"./swim-CusmRTEQ.js";import"./vendor-supabase-6k692oZB.js";import"./index-DwmTJ01u.js";import"./index-x_G3AtZ6.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],En=rn("chart-column",Cn);var Tn=["layout","type","stroke","connectNulls","isRange","ref"],$n=["key"],Tt;function pe(t){"@babel/helpers - typeof";return pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(t)}function $t(t,e){if(t==null)return{};var r=kn(t,e),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function kn(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function te(){return te=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},te.apply(this,arguments)}function xt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function G(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xt(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xt(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ln(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Lt(n.key),n)}}function Rn(t,e,r){return e&&yt(t.prototype,e),r&&yt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mn(t,e,r){return e=Me(e),Kn(t,kt()?Reflect.construct(e,r||[],Me(t).constructor):e.apply(t,r))}function Kn(t,e){if(e&&(pe(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bn(t)}function Bn(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kt=function(){return!!t})()}function Me(t){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Me(t)}function In(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ue(t,e)}function Ue(t,e){return Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Ue(t,e)}function V(t,e,r){return e=Lt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Lt(t){var e=zn(t,"string");return pe(e)=="symbol"?e:e+""}function zn(t,e){if(pe(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(pe(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var W=(function(t){function e(){var r;Ln(this,e);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return r=Mn(this,e,[].concat(s)),V(r,"state",{isAnimationFinished:!0}),V(r,"id",Pt("recharts-area-")),V(r,"handleAnimationEnd",function(){var l=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Le(l)&&l()}),V(r,"handleAnimationStart",function(){var l=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Le(l)&&l()}),r}return In(e,t),Rn(e,[{key:"renderDots",value:function(n,s,o){var l=this.props.isAnimationActive,c=this.state.isAnimationFinished;if(l&&!c)return null;var d=this.props,m=d.dot,u=d.points,p=d.dataKey,h=H(this.props,!1),y=H(m,!0),g=u.map(function(j,S){var P=G(G(G({key:"dot-".concat(S),r:3},h),y),{},{index:S,cx:j.x,cy:j.y,dataKey:p,value:j.value,payload:j.payload,points:u});return e.renderDotItem(m,P)}),N={clipPath:n?"url(#clipPath-".concat(s?"":"dots-").concat(o,")"):null};return b.createElement(F,te({className:"recharts-area-dots"},N),g)}},{key:"renderHorizontalRect",value:function(n){var s=this.props,o=s.baseLine,l=s.points,c=s.strokeWidth,d=l[0].x,m=l[l.length-1].x,u=n*Math.abs(d-m),p=Ce(l.map(function(h){return h.y||0}));return de(o)&&typeof o=="number"?p=Math.max(o,p):o&&Array.isArray(o)&&o.length&&(p=Math.max(Ce(o.map(function(h){return h.y||0})),p)),de(p)?b.createElement("rect",{x:d<m?d:d-u,y:0,width:u,height:Math.floor(p+(c?parseInt("".concat(c),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var s=this.props,o=s.baseLine,l=s.points,c=s.strokeWidth,d=l[0].y,m=l[l.length-1].y,u=n*Math.abs(d-m),p=Ce(l.map(function(h){return h.x||0}));return de(o)&&typeof o=="number"?p=Math.max(o,p):o&&Array.isArray(o)&&o.length&&(p=Math.max(Ce(o.map(function(h){return h.x||0})),p)),de(p)?b.createElement("rect",{x:0,y:d<m?d:d-u,width:p+(c?parseInt("".concat(c),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(n){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,s,o,l){var c=this.props,d=c.layout,m=c.type,u=c.stroke,p=c.connectNulls,h=c.isRange;c.ref;var y=$t(c,Tn);return b.createElement(F,{clipPath:o?"url(#clipPath-".concat(l,")"):null},b.createElement($e,te({},H(y,!0),{points:n,connectNulls:p,type:m,baseLine:s,layout:d,stroke:"none",className:"recharts-area-area"})),u!=="none"&&b.createElement($e,te({},H(this.props,!1),{className:"recharts-area-curve",layout:d,type:m,connectNulls:p,fill:"none",points:n})),u!=="none"&&h&&b.createElement($e,te({},H(this.props,!1),{className:"recharts-area-curve",layout:d,type:m,connectNulls:p,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(n,s){var o=this,l=this.props,c=l.points,d=l.baseLine,m=l.isAnimationActive,u=l.animationBegin,p=l.animationDuration,h=l.animationEasing,y=l.animationId,g=this.state,N=g.prevPoints,j=g.prevBaseLine;return b.createElement(St,{begin:u,duration:p,isActive:m,easing:h,from:{t:0},to:{t:1},key:"area-".concat(y),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var P=S.t;if(N){var v=N.length/c.length,A=c.map(function($,L){var R=Math.floor(L*v);if(N[R]){var M=N[R],B=z(M.x,$.x),X=z(M.y,$.y);return G(G({},$),{},{x:B(P),y:X(P)})}return $}),w;if(de(d)&&typeof d=="number"){var _=z(j,d);w=_(P)}else if(Q(d)||vn(d)){var T=z(j,0);w=T(P)}else w=d.map(function($,L){var R=Math.floor(L*v);if(j[R]){var M=j[R],B=z(M.x,$.x),X=z(M.y,$.y);return G(G({},$),{},{x:B(P),y:X(P)})}return $});return o.renderAreaStatically(A,w,n,s)}return b.createElement(F,null,b.createElement("defs",null,b.createElement("clipPath",{id:"animationClipPath-".concat(s)},o.renderClipRect(P))),b.createElement(F,{clipPath:"url(#animationClipPath-".concat(s,")")},o.renderAreaStatically(c,d,n,s)))})}},{key:"renderArea",value:function(n,s){var o=this.props,l=o.points,c=o.baseLine,d=o.isAnimationActive,m=this.state,u=m.prevPoints,p=m.prevBaseLine,h=m.totalLength;return d&&l&&l.length&&(!u&&h>0||!Je(u,l)||!Je(p,c))?this.renderAreaWithAnimation(n,s):this.renderAreaStatically(l,c,n,s)}},{key:"render",value:function(){var n,s=this.props,o=s.hide,l=s.dot,c=s.points,d=s.className,m=s.top,u=s.left,p=s.xAxis,h=s.yAxis,y=s.width,g=s.height,N=s.isAnimationActive,j=s.id;if(o||!c||!c.length)return null;var S=this.state.isAnimationFinished,P=c.length===1,v=nt("recharts-area",d),A=p&&p.allowDataOverflow,w=h&&h.allowDataOverflow,_=A||w,T=Q(j)?this.id:j,$=(n=H(l,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},L=$.r,R=L===void 0?3:L,M=$.strokeWidth,B=M===void 0?2:M,X=bn(l)?l:{},xe=X.clipDot,ne=xe===void 0?!0:xe,re=R*2+B;return b.createElement(F,{className:v},A||w?b.createElement("defs",null,b.createElement("clipPath",{id:"clipPath-".concat(T)},b.createElement("rect",{x:A?u:u-y/2,y:w?m:m-g/2,width:A?y:y*2,height:w?g:g*2})),!ne&&b.createElement("clipPath",{id:"clipPath-dots-".concat(T)},b.createElement("rect",{x:u-re/2,y:m-re/2,width:y+re,height:g+re}))):null,P?null:this.renderArea(_,T),(l||P)&&this.renderDots(_,ne,T),(!N||S)&&wt.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:n.points!==s.curPoints||n.baseLine!==s.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])})(K.PureComponent);Tt=W;V(W,"displayName","Area");V(W,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Nt.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});V(W,"getBaseValue",function(t,e,r,n){var s=t.layout,o=t.baseValue,l=e.props.baseValue,c=l??o;if(de(c)&&typeof c=="number")return c;var d=s==="horizontal"?n:r,m=d.scale.domain();if(d.type==="number"){var u=Math.max(m[0],m[1]),p=Math.min(m[0],m[1]);return c==="dataMin"?p:c==="dataMax"||u<0?u:Math.max(Math.min(m[0],m[1]),0)}return c==="dataMin"?m[0]:c==="dataMax"?m[1]:m[0]});V(W,"getComposedData",function(t){var e=t.props,r=t.item,n=t.xAxis,s=t.yAxis,o=t.xAxisTicks,l=t.yAxisTicks,c=t.bandSize,d=t.dataKey,m=t.stackedData,u=t.dataStartIndex,p=t.displayedData,h=t.offset,y=e.layout,g=m&&m.length,N=Tt.getBaseValue(e,r,n,s),j=y==="horizontal",S=!1,P=p.map(function(A,w){var _;g?_=m[u+w]:(_=me(A,d),Array.isArray(_)?S=!0:_=[N,_]);var T=_[1]==null||g&&me(A,d)==null;return j?{x:Re({axis:n,ticks:o,bandSize:c,entry:A,index:w}),y:T?null:s.scale(_[1]),value:_,payload:A}:{x:T?null:n.scale(_[1]),y:Re({axis:s,ticks:l,bandSize:c,entry:A,index:w}),value:_,payload:A}}),v;return g||S?v=P.map(function(A){var w=Array.isArray(A.value)?A.value[0]:null;return j?{x:A.x,y:w!=null&&A.y!=null?s.scale(w):null}:{x:w!=null?n.scale(w):null,y:A.y}}):v=j?s.scale(N):n.scale(N),G({points:P,baseLine:v,layout:y,isRange:S},h)});V(W,"renderDotItem",function(t,e){var r;if(b.isValidElement(t))r=b.cloneElement(t,e);else if(Le(t))r=t(e);else{var n=nt("recharts-area-dot",typeof t!="boolean"?t.className:""),s=e.key,o=$t(e,$n);r=b.createElement(jn,te({},o,{key:s,className:n}))}return r});function fe(t){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(t)}function Fn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kt(n.key),n)}}function Wn(t,e,r){return e&&Vn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qn(t,e,r){return e=Ke(e),Hn(t,Rt()?Reflect.construct(e,r||[],Ke(t).constructor):e.apply(t,r))}function Hn(t,e){if(e&&(fe(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gn(t)}function Gn(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rt=function(){return!!t})()}function Ke(t){return Ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ke(t)}function Qn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&et(t,e)}function et(t,e){return et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},et(t,e)}function Mt(t,e,r){return e=Kt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kt(t){var e=Yn(t,"string");return fe(e)=="symbol"?e:e+""}function Yn(t,e){if(fe(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(fe(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ie=(function(t){function e(){return Fn(this,e),qn(this,e,arguments)}return Qn(e,t),Wn(e,[{key:"render",value:function(){return null}}])})(K.Component);Mt(Ie,"displayName","ZAxis");Mt(Ie,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var Xn=["option","isActive"];function we(){return we=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},we.apply(this,arguments)}function Zn(t,e){if(t==null)return{};var r=Jn(t,e),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Jn(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Un(t){var e=t.option,r=t.isActive,n=Zn(t,Xn);return typeof e=="string"?K.createElement(pt,we({option:K.createElement(An,we({type:e},n)),isActive:r,shapeType:"symbols"},n)):K.createElement(pt,we({option:e,isActive:r,shapeType:"symbols"},n))}function he(t){"@babel/helpers - typeof";return he=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(t)}function Pe(){return Pe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pe.apply(this,arguments)}function gt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function I(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gt(Object(r),!0).forEach(function(n){Y(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gt(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function er(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,It(n.key),n)}}function tr(t,e,r){return e&&vt(t.prototype,e),r&&vt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function nr(t,e,r){return e=Be(e),rr(t,Bt()?Reflect.construct(e,r||[],Be(t).constructor):e.apply(t,r))}function rr(t,e){if(e&&(he(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ar(t)}function ar(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bt=function(){return!!t})()}function Be(t){return Be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Be(t)}function ir(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tt(t,e)}function tt(t,e){return tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},tt(t,e)}function Y(t,e,r){return e=It(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function It(t){var e=sr(t,"string");return he(e)=="symbol"?e:e+""}function sr(t,e){if(he(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(he(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ze=(function(t){function e(){var r;er(this,e);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return r=nr(this,e,[].concat(s)),Y(r,"state",{isAnimationFinished:!1}),Y(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),Y(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),Y(r,"id",Pt("recharts-scatter-")),r}return ir(e,t),tr(e,[{key:"renderSymbolsStatically",value:function(n){var s=this,o=this.props,l=o.shape,c=o.activeShape,d=o.activeIndex,m=H(this.props,!1);return n.map(function(u,p){var h=d===p,y=h?c:l,g=I(I({},m),u);return b.createElement(F,Pe({className:"recharts-scatter-symbol",key:"symbol-".concat(u?.cx,"-").concat(u?.cy,"-").concat(u?.size,"-").concat(p)},Sn(s.props,u,p),{role:"img"}),b.createElement(Un,Pe({option:y,isActive:h,key:"symbol-".concat(p)},g)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,s=this.props,o=s.points,l=s.isAnimationActive,c=s.animationBegin,d=s.animationDuration,m=s.animationEasing,u=s.animationId,p=this.state.prevPoints;return b.createElement(St,{begin:c,duration:d,isActive:l,easing:m,from:{t:0},to:{t:1},key:"pie-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var y=h.t,g=o.map(function(N,j){var S=p&&p[j];if(S){var P=z(S.cx,N.cx),v=z(S.cy,N.cy),A=z(S.size,N.size);return I(I({},N),{},{cx:P(y),cy:v(y),size:A(y)})}var w=z(0,N.size);return I(I({},N),{},{size:w(y)})});return b.createElement(F,null,n.renderSymbolsStatically(g))})}},{key:"renderSymbols",value:function(){var n=this.props,s=n.points,o=n.isAnimationActive,l=this.state.prevPoints;return o&&s&&s.length&&(!l||!Je(l,s))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(s)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.points,l=s.xAxis,c=s.yAxis,d=s.children,m=Ot(d,wn);return m?m.map(function(u,p){var h=u.props,y=h.direction,g=h.dataKey;return b.cloneElement(u,{key:"".concat(y,"-").concat(g,"-").concat(o[p]),data:o,xAxis:l,yAxis:c,layout:y==="x"?"vertical":"horizontal",dataPointFormatter:function(j,S){return{x:j.cx,y:j.cy,value:y==="x"?+j.node.x:+j.node.y,errorVal:me(j,S)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,s=n.points,o=n.line,l=n.lineType,c=n.lineJointType,d=H(this.props,!1),m=H(o,!1),u,p;if(l==="joint")u=s.map(function(v){return{x:v.cx,y:v.cy}});else if(l==="fitting"){var h=Pn(s),y=h.xmin,g=h.xmax,N=h.a,j=h.b,S=function(A){return N*A+j};u=[{x:y,y:S(y)},{x:g,y:S(g)}]}var P=I(I(I({},d),{},{fill:"none",stroke:d&&d.fill},m),{},{points:u});return b.isValidElement(o)?p=b.cloneElement(o,P):Le(o)?p=o(P):p=b.createElement($e,Pe({},P,{type:c})),b.createElement(F,{className:"recharts-scatter-line",key:"recharts-scatter-line"},p)}},{key:"render",value:function(){var n=this.props,s=n.hide,o=n.points,l=n.line,c=n.className,d=n.xAxis,m=n.yAxis,u=n.left,p=n.top,h=n.width,y=n.height,g=n.id,N=n.isAnimationActive;if(s||!o||!o.length)return null;var j=this.state.isAnimationFinished,S=nt("recharts-scatter",c),P=d&&d.allowDataOverflow,v=m&&m.allowDataOverflow,A=P||v,w=Q(g)?this.id:g;return b.createElement(F,{className:S,clipPath:A?"url(#clipPath-".concat(w,")"):null},P||v?b.createElement("defs",null,b.createElement("clipPath",{id:"clipPath-".concat(w)},b.createElement("rect",{x:P?u:u-h/2,y:v?p:p-y/2,width:P?h:h*2,height:v?y:y*2}))):null,l&&this.renderLine(),this.renderErrorBar(),b.createElement(F,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!N||j)&&wt.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:s.curPoints}:n.points!==s.curPoints?{curPoints:n.points}:null}}])})(K.PureComponent);Y(ze,"displayName","Scatter");Y(ze,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Nt.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});Y(ze,"getComposedData",function(t){var e=t.xAxis,r=t.yAxis,n=t.zAxis,s=t.item,o=t.displayedData,l=t.xAxisTicks,c=t.yAxisTicks,d=t.offset,m=s.props.tooltipType,u=Ot(s.props.children,_t),p=Q(e.dataKey)?s.props.dataKey:e.dataKey,h=Q(r.dataKey)?s.props.dataKey:r.dataKey,y=n&&n.dataKey,g=n?n.range:Ie.defaultProps.range,N=g&&g[0],j=e.scale.bandwidth?e.scale.bandwidth():0,S=r.scale.bandwidth?r.scale.bandwidth():0,P=o.map(function(v,A){var w=me(v,p),_=me(v,h),T=!Q(y)&&me(v,y)||"-",$=[{name:Q(e.dataKey)?s.props.name:e.name||e.dataKey,unit:e.unit||"",value:w,payload:v,dataKey:p,type:m},{name:Q(r.dataKey)?s.props.name:r.name||r.dataKey,unit:r.unit||"",value:_,payload:v,dataKey:h,type:m}];T!=="-"&&$.push({name:n.name||n.dataKey,unit:n.unit||"",value:T,payload:v,dataKey:y,type:m});var L=Re({axis:e,ticks:l,bandSize:j,entry:v,index:A,dataKey:p}),R=Re({axis:r,ticks:c,bandSize:S,entry:v,index:A,dataKey:h}),M=T!=="-"?n.scale(T):N,B=Math.sqrt(Math.max(M,0)/Math.PI);return I(I({},v),{},{cx:L,cy:R,x:L-B,y:R-B,xAxis:e,yAxis:r,zAxis:n,width:2*B,height:2*B,size:M,node:{x:w,y:_,z:T},tooltipPayload:$,tooltipPosition:{x:L,y:R},payload:v},u&&u[A]&&u[A].props)});return I({points:P},d)});var bt=Dt({chartName:"AreaChart",GraphicalChild:W,axisComponents:[{axisType:"xAxis",AxisComp:ee},{axisType:"yAxis",AxisComp:Se}],formatAxisMap:Ct}),or=Dt({chartName:"ComposedChart",GraphicalChild:[Et,W,ke,ze],axisComponents:[{axisType:"xAxis",AxisComp:ee},{axisType:"yAxis",AxisComp:Se},{axisType:"zAxis",AxisComp:Ie}],formatAxisMap:Ct});function lr(t){const e=yn(t);return e.setHours(23,59,59,999),e}function Ee({label:t,value:e,max:r,invert:n=!1}){const s=e!==null?Math.min(100,e/r*100):0,o=At(e??null,{invert:n})??"hsl(var(--muted-foreground))";return a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"w-28 shrink-0 text-xs text-muted-foreground truncate",children:t}),a.jsx("div",{className:"relative h-2 flex-1 rounded-full bg-muted overflow-hidden",children:a.jsx(U.div,{className:"absolute inset-y-0 left-0 rounded-full",style:{backgroundColor:o},initial:{width:0},animate:{width:`${s}%`},transition:{duration:.6,ease:"easeOut"}})}),a.jsx("span",{className:"w-10 text-right text-sm font-mono font-semibold tabular-nums",children:e!==null?e.toFixed(1):"-"})]})}function jt({value:t,unit:e,label:r,trend:n,trendLabel:s}){return a.jsxs(U.div,{className:"flex flex-col items-center gap-0.5 py-2",variants:ue,initial:"hidden",animate:"visible",children:[a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-4xl font-mono font-bold tracking-tight",children:t}),e&&a.jsx("span",{className:"text-lg font-mono text-muted-foreground",children:e})]}),a.jsx("span",{className:"text-sm text-muted-foreground",children:r}),n!=null&&a.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-xs font-medium ${n>=0?"bg-emerald-500/10 text-emerald-600":"bg-red-500/10 text-red-600"}`,children:[n>=0?a.jsx(on,{className:"h-3 w-3"}):a.jsx(_n,{className:"h-3 w-3"}),n>=0?"+":"",n.toFixed(0),"%",s?` ${s}`:""]})]})}function ce({value:t,label:e,colored:r,colorValue:n,invert:s}){const o="rounded-full px-3 py-1 text-sm font-mono";if(r&&n!==null&&n!==void 0){const l=At(n,{invert:s})??"hsl(var(--muted-foreground))";return a.jsx("span",{className:o,style:{backgroundColor:l,color:xn(l)},children:t})}return a.jsxs("span",{className:`${o} bg-muted text-muted-foreground`,children:[t,e?` ${e}`:""]})}function Xe(){return a.jsx("div",{className:"space-y-3 animate-pulse motion-reduce:animate-none",children:a.jsx("div",{className:"h-[180px] w-full rounded-xl bg-muted"})})}function Ze({title:t,children:e}){const[r,n]=K.useState(!1);return a.jsxs(pn,{open:r,onOpenChange:n,children:[a.jsxs(fn,{className:"flex w-full items-center justify-between rounded-lg bg-muted/50 px-4 py-3 text-sm font-semibold hover:bg-muted transition-colors",children:[t,a.jsx(Dn,{className:`h-4 w-4 text-muted-foreground transition-transform duration-200 ${r?"rotate-180":""}`})]}),a.jsx(hn,{className:"pt-4 animate-in fade-in slide-in-from-top-2 motion-reduce:animate-none",children:e})]})}const Te={borderRadius:"8px",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"};function cr(t){const e=t.match(/^(\d+)(NL|DOS|BR|PAP|QN)$/);if(!e)return t;const r={NL:"Nage Libre",DOS:"Dos",BR:"Brasse",PAP:"Papillon",QN:"4 Nages"};return`${e[1]}m ${r[e[2]]||e[2]}`}function ur(t){const e=Math.floor(t/60),r=t%60,n=Math.floor(r),s=Math.round((r-n)*100);return`${e}:${String(n).padStart(2,"0")}:${String(s).padStart(2,"0")}`}function dr(t){const e=new Date;e.setHours(0,0,0,0);const r=new Date(t+"T00:00:00");return Math.ceil((r.getTime()-e.getTime())/(1e3*60*60*24))}function Mr(){const{user:t,userId:e,role:r,selectedAthleteId:n,selectedAthleteName:s}=an(),o=(r==="coach"||r==="admin")&&(n!==null||!!s),l=o?s:t,c=o?n:e,d=c??l,[m]=K.useState("all"),[u]=K.useState(""),[p]=K.useState(""),[h,y]=K.useState(30),[g,N]=K.useState(30),{data:j=[]}=je({queryKey:["my-objectives"],queryFn:()=>ae.getAthleteObjectives()}),{data:S,isLoading:P}=je({queryKey:["sessions",d],queryFn:()=>ae.getSessions(l,c),enabled:!!l}),v=nn({queryKey:["strength_history",d,"progress",m,u,p],queryFn:({pageParam:i=0})=>ae.getStrengthHistory(l,{athleteId:c,limit:10,offset:i,order:"desc",status:m==="all"?void 0:m,from:u||void 0,to:p||void 0}),enabled:!!l,getNextPageParam:i=>{const f=i.pagination.offset+i.pagination.limit;return f<i.pagination.total?f:void 0},initialPageParam:0}),A=v.data?.pages.flatMap(i=>i.runs)??[],w=Ye(J(new Date,g)).toISOString(),_=lr(new Date).toISOString(),T=Ye(J(new Date,g*2)).toISOString(),$=Ye(J(new Date,g)).toISOString(),{data:L,isLoading:R}=je({queryKey:["strength_history_summary",d,"progress",g,w,_],queryFn:()=>ae.getStrengthHistory(l,{athleteId:c,limit:200,order:"desc",from:w,to:_}),enabled:!!l}),{data:M,isLoading:B}=je({queryKey:["strength_history_aggregate",d,"progress",g,w,_],queryFn:()=>ae.getStrengthHistoryAggregate(l,{athleteId:c,period:"day",limit:200,order:"asc",from:w,to:_}),enabled:!!l}),{data:X}=je({queryKey:["strength_history_aggregate_prev",d,"progress",g,T,$],queryFn:()=>ae.getStrengthHistoryAggregate(l,{athleteId:c,period:"day",limit:200,order:"asc",from:T,to:$}),enabled:!!l}),xe=R||B,ne=L?.runs??[],re=L?.exercise_summary??[],ye=M?.periods??[],zt=X?.periods??[],Ft=i=>{if(!S)return[];const f=J(new Date,i),D=S.filter(x=>new Date(x.date)>=f).reverse(),C=new Map;return D.forEach(x=>{const O=se(new Date(x.date),"dd/MM");C.has(O)||C.set(O,{date:O,distance:0,effort:0,rpe:0,performance:0,engagement:0,fatigue:0,count:0,rpeCount:0,performanceCount:0,engagementCount:0,fatigueCount:0});const E=C.get(O);E.distance+=x.distance,E.effort+=x.effort,E.count+=1,x.rpe!==null&&x.rpe!==void 0&&(E.rpe+=x.rpe,E.rpeCount+=1),x.performance!==null&&x.performance!==void 0&&(E.performance+=x.performance,E.performanceCount+=1),x.engagement!==null&&x.engagement!==void 0&&(E.engagement+=x.engagement,E.engagementCount+=1),x.fatigue!==null&&x.fatigue!==void 0&&(E.fatigue+=x.fatigue,E.fatigueCount+=1)}),Array.from(C.values()).map(x=>({...x,effort:Math.round(x.effort/x.count*10)/10,rpe:x.rpeCount?Math.round(x.rpe/x.rpeCount*10)/10:null,performance:x.performanceCount?Math.round(x.performance/x.performanceCount*10)/10:null,engagement:x.engagementCount?Math.round(x.engagement/x.engagementCount*10)/10:null,fatigue:x.fatigueCount?Math.round(x.fatigue/x.fatigueCount*10)/10:null}))},ge=S?S.filter(i=>new Date(i.date)>=J(new Date,h)):[],ve=ge.length,k=ge.reduce((i,f)=>(i.distance+=f.distance,i.duration+=f.duration,f.rpe!==null&&f.rpe!==void 0&&(i.rpeSum+=f.rpe,i.rpeCount+=1),f.performance!==null&&f.performance!==void 0&&(i.performanceSum+=f.performance,i.performanceCount+=1),f.engagement!==null&&f.engagement!==void 0&&(i.engagementSum+=f.engagement,i.engagementCount+=1),f.fatigue!==null&&f.fatigue!==void 0&&(i.fatigueSum+=f.fatigue,i.fatigueCount+=1),i),{distance:0,duration:0,rpeSum:0,rpeCount:0,performanceSum:0,performanceCount:0,engagementSum:0,engagementCount:0,fatigueSum:0,fatigueCount:0}),Vt=k.rpeCount?k.rpeSum/k.rpeCount:null,Wt=k.performanceCount?k.performanceSum/k.performanceCount:null,qt=k.engagementCount?k.engagementSum/k.engagementCount:null,Ht=k.fatigueCount?k.fatigueSum/k.fatigueCount:null,Gt=ve?k.duration/ve:0,Qt=ve?k.distance/ve:0,rt=Ft(h),Yt=S?((i,f,D,C)=>{const x=new Date,O=J(x,D*2),E=J(x,D),be=f.filter(Z=>{const q=new Date(Z.date);return q>=O&&q<E}).reduce((Z,q)=>Z+(q.distance??0),0);return be===0?null:(i-be)/be*100})(k.distance,S,h):null,Fe=["NL","DOS","BR","PAP","QN"],at={NL:"NL",DOS:"Dos",BR:"Brasse",PAP:"Pap",QN:"4N"},it={NL:"hsl(210, 80%, 55%)",DOS:"hsl(160, 60%, 45%)",BR:"hsl(35, 85%, 55%)",PAP:"hsl(280, 60%, 55%)",QN:"hsl(340, 70%, 55%)"},Ne=K.useMemo(()=>{if(!ge.length)return{pie:[],daily:[],hasData:!1};const i={NL:0,DOS:0,BR:0,PAP:0,QN:0};let f=!1;const D=new Map;for(const O of ge){const E=O.stroke_distances;if(!E)continue;const _e=se(new Date(O.date),"dd/MM");D.has(_e)||D.set(_e,{NL:0,DOS:0,BR:0,PAP:0,QN:0});const be=D.get(_e);for(const Z of Fe){const q=E[Z];q&&q>0&&(i[Z]+=q,be[Z]+=q,f=!0)}}const C=Fe.filter(O=>i[O]>0).map(O=>({name:at[O],value:i[O],fill:it[O]})),x=Array.from(D.entries()).map(([O,E])=>({date:O,...E}));return{pie:C,daily:x,hasData:f}},[ge]),Ve=i=>{const D=(Array.isArray(i?.logs)?i.logs:[]).map(O=>O?.rpe!==null&&O?.rpe!==void 0?Number(O.rpe):null).filter(O=>O!==null&&Number.isFinite(O));if(D.length>0)return D.reduce((O,E)=>O+E,0)/D.length;const C=i?.feeling??i?.rpe??null,x=C!=null?Number(C):null;return x!==null&&Number.isFinite(x)?x:null},Xt=i=>i==null||Number.isNaN(i)?"-":i.toFixed(1),st=[...ne].sort((i,f)=>{const D=new Date(i.started_at||i.date||i.created_at||0).getTime(),C=new Date(f.started_at||f.date||f.created_at||0).getTime();return D-C}).map(i=>({date:se(new Date(i.started_at||i.date||i.created_at||new Date),"dd/MM"),feeling:Ve(i)})),ot=ye.map(i=>({date:i.period,label:se(new Date(i.period),"dd/MM"),tonnage:Math.round(i.tonnage??0),volume:Math.round(i.volume??0)})),Zt=ye.reduce((i,f)=>i+(f.tonnage??0),0),Jt=ye.reduce((i,f)=>i+(f.volume??0),0),Ut=ne.length,We=ne.map(i=>Ve(i)).filter(i=>i!==null&&Number.isFinite(i)),Oe=We.length?We.reduce((i,f)=>i+f,0)/We.length:null,qe=[...re].map(i=>({exerciseId:Number(i.exercise_id),name:i.exercise_name||`Exercice ${i.exercise_id}`,totalSets:Number(i.total_sets??0),totalReps:Number(i.total_reps??0),totalVolume:Number(i.total_volume??0),maxWeight:i.max_weight!==null&&i.max_weight!==void 0?Number(i.max_weight):null,lastPerformedAt:i.last_performed_at??null})).sort((i,f)=>f.totalVolume-i.totalVolume),en=(()=>{if(!ye.length)return null;const i=ye.reduce((D,C)=>D+(C.tonnage??0),0),f=zt.reduce((D,C)=>D+(C.tonnage??0),0);return f===0?null:(i-f)/f*100})(),lt=qe.slice(0,8),tn=i=>{if(!i)return"-";const f=new Date(i);return Number.isNaN(f.getTime())?"-":se(f,"dd/MM/yyyy")};return a.jsxs("div",{className:"space-y-4 pb-4",children:[a.jsx("div",{className:"sticky top-0 z-overlay -mx-4 backdrop-blur-md bg-background/90 border-b border-primary/15",children:a.jsxs("div",{className:"px-4 py-2.5 flex items-center gap-2.5",children:[a.jsx("div",{className:"flex items-center justify-center h-7 w-7 rounded-lg bg-primary text-primary-foreground",children:a.jsx(En,{className:"h-3.5 w-3.5"})}),a.jsx("h1",{className:"text-lg font-display font-bold uppercase italic tracking-tight text-primary",children:"Progression"})]})}),j.length>0&&a.jsx(U.div,{variants:ue,initial:"hidden",animate:"visible",children:a.jsx(He,{className:"border border-primary/15",children:a.jsxs(Ge,{className:"p-4 space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(gn,{className:"h-4 w-4 text-primary"}),a.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wider text-primary",children:"Mes objectifs"})]}),a.jsx("div",{className:"space-y-2",children:j.map(i=>{const f=!!i.event_code,D=!!i.competition_name,C=i.competition_date?dr(i.competition_date):null;return a.jsxs("div",{className:"flex flex-wrap items-center gap-2 rounded-lg bg-muted/50 px-3 py-2 text-sm",children:[f&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"font-medium",children:cr(i.event_code)}),i.pool_length&&a.jsxs(mt,{variant:"outline",className:"text-[10px] px-1.5 py-0",children:[i.pool_length,"m"]}),i.target_time_seconds!=null&&a.jsx("span",{className:"font-mono text-xs text-muted-foreground",children:ur(i.target_time_seconds)})]}),!f&&i.text&&a.jsx("span",{className:"text-muted-foreground",children:i.text}),D&&a.jsxs(mt,{variant:"secondary",className:"text-[10px] px-1.5 py-0 ml-auto",children:[i.competition_name,C!==null&&C>0&&a.jsxs("span",{className:"ml-1 text-primary font-bold",children:["J-",C]})]})]},i.id)})})]})})}),a.jsxs(dn,{defaultValue:"swim",className:"w-full",children:[a.jsxs(mn,{className:"grid w-full max-w-[280px] grid-cols-2",children:[a.jsx(ct,{value:"swim",children:"Natation"}),a.jsx(ct,{value:"strength",children:"Musculation"})]}),a.jsxs(ut,{value:"swim",className:"space-y-4 mt-4",children:[a.jsx("div",{className:"flex justify-end",children:a.jsxs(dt,{type:"single",size:"sm",variant:"outline",value:String(h),onValueChange:i=>i&&y(Number(i)),className:"gap-1",children:[a.jsx(ie,{value:"7",className:"h-8 px-3 text-xs",children:"7j"}),a.jsx(ie,{value:"30",className:"h-8 px-3 text-xs",children:"30j"}),a.jsx(ie,{value:"365",className:"h-8 px-3 text-xs",children:"1 an"})]})}),a.jsx(jt,{value:k.distance.toLocaleString(),unit:"m",label:`volume sur ${h} jours`,trend:Yt,trendLabel:"vs période préc."}),a.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[a.jsx(ce,{value:`${ve} séances`}),a.jsx(ce,{value:`${Math.round(Qt).toLocaleString()}m moy`}),a.jsx(ce,{value:`${Math.round(Gt)}min moy`})]}),a.jsx(U.div,{variants:ue,initial:"hidden",animate:"visible",children:a.jsx(He,{className:"border-0 shadow-none bg-transparent",children:a.jsx(Ge,{className:"p-0 h-[140px] w-full",children:P?a.jsx(Xe,{}):rt.length===0?a.jsx("div",{className:"flex h-full items-center justify-center text-sm text-muted-foreground",children:"Aucune donnée disponible."}):a.jsx(oe,{width:"100%",height:"100%",children:a.jsxs(bt,{data:rt,children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"swimVolumeGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),a.jsx("stop",{offset:"100%",stopColor:"hsl(var(--primary))",stopOpacity:0})]})}),a.jsx(ee,{dataKey:"date",fontSize:10,tickLine:!1,axisLine:!1}),a.jsx(le,{contentStyle:Te,formatter:i=>[`${i.toLocaleString()}m`,"Volume"]}),a.jsx(W,{type:"monotone",dataKey:"distance",stroke:"hsl(var(--primary))",strokeWidth:2,fill:"url(#swimVolumeGradient)",dot:!1,activeDot:{r:5,strokeWidth:2}})]})})})})}),a.jsxs(U.div,{className:"space-y-3",variants:ue,initial:"hidden",animate:"visible",children:[a.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Ressentis moyens"}),a.jsx(Ee,{label:"Difficulté",value:Vt,max:5,invert:!0}),a.jsx(Ee,{label:"Performance",value:Wt,max:5}),a.jsx(Ee,{label:"Engagement",value:qt,max:5}),a.jsx(Ee,{label:"Fatigue",value:Ht,max:5,invert:!0})]}),Ne.hasData&&a.jsx(Ze,{title:`Répartition par nage (${h}j)`,children:a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsx("div",{className:"h-[280px] w-full",children:a.jsx(oe,{width:"100%",height:"100%",children:a.jsxs(Nn,{children:[a.jsx(On,{data:Ne.pie,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:90,label:({name:i,percent:f})=>`${i} ${(f*100).toFixed(0)}%`,children:Ne.pie.map((i,f)=>a.jsx(_t,{fill:i.fill},`pie-${f}`))}),a.jsx(le,{formatter:i=>[`${i.toLocaleString()}m`,"Distance"]}),a.jsx(ft,{})]})})}),a.jsx("div",{className:"h-[280px] w-full",children:a.jsx(oe,{width:"100%",height:"100%",children:a.jsxs(ht,{data:Ne.daily,children:[a.jsx(ee,{dataKey:"date",fontSize:10,tickLine:!1,axisLine:!1}),a.jsx(Se,{fontSize:10,tickLine:!1,axisLine:!1}),a.jsx(le,{}),Fe.map(i=>a.jsx(ke,{dataKey:i,stackId:"strokes",name:at[i],fill:it[i],radius:0},i)),a.jsx(ft,{})]})})})]})})]}),a.jsxs(ut,{value:"strength",className:"space-y-4 mt-4",children:[a.jsx("div",{className:"flex justify-end",children:a.jsxs(dt,{type:"single",size:"sm",variant:"outline",value:String(g),onValueChange:i=>i&&N(Number(i)),className:"gap-1",children:[a.jsx(ie,{value:"7",className:"h-8 px-3 text-xs",children:"7j"}),a.jsx(ie,{value:"30",className:"h-8 px-3 text-xs",children:"30j"}),a.jsx(ie,{value:"365",className:"h-8 px-3 text-xs",children:"1 an"})]})}),a.jsx(jt,{value:Math.round(Zt).toLocaleString(),unit:"kg",label:`tonnage sur ${g} jours`,trend:en,trendLabel:"vs période préc."}),a.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[a.jsx(ce,{value:`${Ut} séances`}),a.jsx(ce,{value:`${Math.round(Jt).toLocaleString()} reps`}),a.jsx(ce,{value:`RPE ${Oe!==null?Oe.toFixed(1):"-"}/10`,colored:!0,colorValue:Oe!==null?Oe/2:null,invert:!0})]}),a.jsx(U.div,{variants:ue,initial:"hidden",animate:"visible",children:a.jsx(He,{className:"border-0 shadow-none bg-transparent",children:a.jsx(Ge,{className:"p-0 h-[140px] w-full",children:xe?a.jsx(Xe,{}):ot.length===0?a.jsx("div",{className:"flex h-full items-center justify-center text-sm text-muted-foreground",children:"Aucune donnée disponible."}):a.jsx(oe,{width:"100%",height:"100%",children:a.jsxs(or,{data:ot,children:[a.jsx(ee,{dataKey:"label",fontSize:10,tickLine:!1,axisLine:!1}),a.jsx(le,{contentStyle:Te}),a.jsx(ke,{dataKey:"tonnage",name:"Tonnage (kg)",fill:"hsl(var(--primary))",radius:[4,4,0,0],opacity:.7}),a.jsx(Et,{type:"monotone",dataKey:"volume",name:"Volume (reps)",stroke:"hsl(var(--accent))",strokeWidth:2,dot:!1})]})})})})}),a.jsxs(U.div,{variants:ue,initial:"hidden",animate:"visible",children:[a.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3",children:"Ressenti par séance"}),a.jsx("div",{className:"h-[130px] w-full",children:xe?a.jsx(Xe,{}):st.length===0?a.jsx("div",{className:"flex h-full items-center justify-center text-sm text-muted-foreground",children:"Aucune donnée disponible."}):a.jsx(oe,{width:"100%",height:"100%",children:a.jsxs(bt,{data:st,children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"strengthFeelingGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"hsl(var(--foreground))",stopOpacity:.15}),a.jsx("stop",{offset:"100%",stopColor:"hsl(var(--foreground))",stopOpacity:0})]})}),a.jsx(ee,{dataKey:"date",fontSize:10,tickLine:!1,axisLine:!1}),a.jsx(Se,{domain:[0,10],hide:!0}),a.jsx(le,{contentStyle:Te,formatter:i=>[i!==null?i.toFixed(1):"-","RPE"]}),a.jsx(W,{type:"monotone",dataKey:"feeling",stroke:"hsl(var(--foreground))",strokeWidth:2,fill:"url(#strengthFeelingGradient)",dot:{r:4,fill:"hsl(var(--background))",stroke:"hsl(var(--foreground))",strokeWidth:2},activeDot:{r:6}})]})})})]}),a.jsx(Ze,{title:"Détail par exercice",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"h-[220px] w-full",children:lt.length===0?a.jsx("div",{className:"flex h-full items-center justify-center text-sm text-muted-foreground",children:"Aucun exercice enregistré."}):a.jsx(oe,{width:"100%",height:"100%",children:a.jsxs(ht,{data:lt,layout:"vertical",children:[a.jsx(ee,{type:"number",fontSize:10,tickLine:!1,axisLine:!1}),a.jsx(Se,{type:"category",dataKey:"name",fontSize:10,tickLine:!1,axisLine:!1,width:100}),a.jsx(le,{contentStyle:Te,formatter:i=>[`${i.toLocaleString()} kg`,"Volume"]}),a.jsx(ke,{dataKey:"totalVolume",fill:"hsl(var(--primary))",radius:[0,4,4,0]})]})})}),a.jsx("div",{className:"w-full overflow-x-auto",children:a.jsxs(ln,{children:[a.jsx(cn,{children:a.jsxs(Qe,{children:[a.jsx(De,{children:"Exercice"}),a.jsx(De,{className:"text-right",children:"Volume"}),a.jsx(De,{className:"text-right",children:"Max"}),a.jsx(De,{className:"text-right",children:"Dernier"})]})}),a.jsx(un,{children:qe.length===0?a.jsx(Qe,{children:a.jsx(Ae,{colSpan:4,className:"text-center text-sm text-muted-foreground",children:"Aucun exercice enregistré."})}):qe.map(i=>a.jsxs(Qe,{children:[a.jsx(Ae,{className:"font-medium text-sm",children:i.name}),a.jsxs(Ae,{className:"text-right font-mono text-sm",children:[i.totalVolume.toLocaleString()," kg"]}),a.jsx(Ae,{className:"text-right font-mono text-sm",children:i.maxWeight!==null?`${i.maxWeight} kg`:"-"}),a.jsx(Ae,{className:"text-right text-xs text-muted-foreground",children:tn(i.lastPerformedAt)})]},i.exerciseId))})]})})]})}),a.jsx(Ze,{title:"Historique récent",children:a.jsxs("div",{className:"space-y-3",children:[A.length===0&&a.jsx("div",{className:"text-center text-sm text-muted-foreground py-6",children:"Aucun historique disponible."}),A.map(i=>a.jsxs("div",{className:"flex items-center justify-between border-b border-border/40 pb-2 last:border-b-0 last:pb-0",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold",children:se(new Date(i.started_at||i.date||i.created_at||new Date),"dd/MM/yyyy")}),a.jsx("div",{className:"text-xs text-muted-foreground",children:i.status||"Séance"})]}),a.jsxs("div",{className:"text-sm font-mono font-semibold",children:[Xt(Ve(i)),"/10"]})]},i.id)),v.hasNextPage&&a.jsx(sn,{variant:"outline",size:"sm",className:"w-full",onClick:()=>v.fetchNextPage(),disabled:v.isFetchingNextPage,children:v.isFetchingNextPage?"Chargement...":"Charger plus"})]})})]})]})]})}export{Ee as ProgressBar,Mr as default};
