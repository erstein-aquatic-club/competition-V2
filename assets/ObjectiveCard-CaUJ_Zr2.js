import{j as t}from"./vendor-query-DyA9aSKS.js";import{B as g}from"./badge-eplu3J07.js";import{s as _,a as j,c as y,S as b,e as p,f as x}from"./objectiveHelpers-DC7i01Ud.js";const w={NL:"border-t-blue-500",DOS:"border-t-emerald-500",BR:"border-t-rose-500",PAP:"border-t-violet-500",QN:"border-t-amber-500"};function O(e){return e==null?"#a1a1aa":e>=100?"#10b981":e>=75?"#22c55e":e>=50?"#eab308":e>=25?"#f97316":"#ef4444"}const $="#a1a1aa";function k(e){const l=new Date(e+"T00:00:00"),s=new Date;s.setHours(0,0,0,0);const r=Math.round((s.getTime()-l.getTime())/(1e3*60*60*24));return r<=0?"aujourd'hui":r===1?"hier":r<60?`il y a ${r}j`:`il y a ${Math.round(r/30)}m`}function u({size:e=40,strokeWidth:l=3,progress:s,color:r}){const d=(e-l)/2,n=2*Math.PI*d,i=s!=null?Math.min(Math.max(s,0),100):0,m=n-i/100*n;return t.jsxs("svg",{width:e,height:e,viewBox:`0 0 ${e} ${e}`,className:"shrink-0","aria-hidden":!0,children:[t.jsx("circle",{cx:e/2,cy:e/2,r:d,fill:"none",stroke:"currentColor",strokeWidth:l,className:"text-muted-foreground/10"}),s!=null&&t.jsx("circle",{cx:e/2,cy:e/2,r:d,fill:"none",stroke:r,strokeWidth:l,strokeDasharray:n,strokeDashoffset:m,strokeLinecap:"round",transform:`rotate(-90 ${e/2} ${e/2})`,className:"transition-all duration-700"}),s==null&&t.jsx("circle",{cx:e/2,cy:e/2,r:3,fill:r})]})}function T({children:e}){return t.jsx("div",{className:"grid grid-cols-2 gap-2",children:e})}function B({objective:e,performances:l=[],onClick:s,compact:r=!1,showCoachBadge:d=!1}){const n=!!e.event_code,i=n?_(e.event_code):null,m=i?w[i]??"":"",N=i?b[i]??"":"",o=n?j(l,e.event_code,e.pool_length):null;let a=null,c=null;o&&e.target_time_seconds!=null&&e.event_code&&(a=o.time-e.target_time_seconds,c=y(o.time,e.target_time_seconds,e.event_code));const f=O(c),h=s?"button":"div";return r?t.jsxs(h,{type:s?"button":void 0,className:["w-full text-left flex items-center gap-2.5 rounded-lg border-l-4 px-2.5 py-1.5",N||"border-l-muted-foreground/20","bg-card transition-colors hover:bg-muted/30 active:scale-[0.995]"].join(" "),onClick:s,children:[t.jsx(u,{size:22,strokeWidth:2.5,progress:c,color:f}),t.jsxs("div",{className:"flex-1 min-w-0 flex items-baseline gap-1.5",children:[t.jsx("span",{className:"text-xs font-semibold truncate",children:n?p(e.event_code):e.text??"â€”"}),n&&e.pool_length&&t.jsxs("span",{className:"text-[10px] text-muted-foreground/50 shrink-0",children:[e.pool_length,"m"]})]}),e.target_time_seconds!=null&&t.jsx("span",{className:"text-[11px] font-mono tabular-nums text-primary shrink-0",children:x(e.target_time_seconds)}),a!=null&&t.jsx("span",{className:`text-[10px] font-mono tabular-nums shrink-0 ${a<=0?"text-emerald-500 font-semibold":"text-muted-foreground/60"}`,children:a<=0?"OK":`+${a.toFixed(2)}`}),d&&t.jsx(g,{variant:"secondary",className:"text-[8px] px-1 py-0 leading-tight shrink-0",children:"C"})]}):t.jsx(h,{type:s?"button":void 0,className:["w-full text-left rounded-xl border shadow-sm bg-card overflow-hidden",m?`border-t-[3px] ${m}`:"","transition-all hover:shadow-md active:scale-[0.98]"].join(" "),onClick:s,children:t.jsxs("div",{className:"px-3 pt-3 pb-2.5 space-y-2",children:[t.jsxs("div",{className:"flex items-start justify-between gap-1",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"text-sm font-semibold truncate leading-tight",children:n?p(e.event_code):"Objectif"}),n&&e.pool_length&&t.jsxs("p",{className:"text-[10px] text-muted-foreground/50 mt-0.5",children:[e.pool_length,"m"]})]}),d&&t.jsx(g,{variant:"secondary",className:"text-[9px] px-1 py-0 leading-tight shrink-0",children:"Coach"})]}),e.text&&t.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 leading-relaxed",children:e.text}),e.target_time_seconds!=null&&t.jsxs("div",{className:"flex items-center gap-2.5",children:[t.jsx(u,{size:40,strokeWidth:3,progress:c,color:f}),t.jsxs("div",{className:"flex-1 min-w-0 space-y-0.5",children:[t.jsx("p",{className:"text-sm font-mono tabular-nums text-primary font-semibold leading-none",children:x(e.target_time_seconds)}),o&&t.jsxs("p",{className:"text-[10px] font-mono tabular-nums text-muted-foreground/50 leading-none",children:[x(o.time),o.date&&t.jsx("span",{className:"text-muted-foreground/30 font-sans ml-1",children:k(o.date)})]}),a!=null&&t.jsx("p",{className:`text-xs font-mono tabular-nums font-semibold leading-none ${a<=0?"text-emerald-500":"text-amber-500"}`,children:a<=0?"Atteint":`+${a.toFixed(2)}s`}),!o&&l.length>0&&t.jsx("p",{className:"text-[10px] text-muted-foreground/40 italic",children:"Pas encore de temps"})]})]}),!n&&t.jsxs("div",{className:"flex items-center gap-2.5",children:[t.jsx(u,{size:40,strokeWidth:3,progress:null,color:$}),t.jsx("p",{className:"text-[10px] text-muted-foreground/40 italic",children:"Objectif qualitatif"})]})]})})}export{B as O,T as a};
