import{b as v,c as g}from"./index-Cc5GnU4d.js";import{r as S,j as h}from"./vendor-query-DyA9aSKS.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],j=v("activity",N);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],A=v("hash",q),V=["V0","V1","V2","V3","Max","Prog"],B={V0:"bg-intensity-1",V1:"bg-intensity-2",V2:"bg-intensity-3",V3:"bg-intensity-4",Max:"bg-intensity-5",Prog:"bg-intensity-prog"},F=t=>t==="Max"?"MAX":t==="Prog"?"Prog ↗":t,_={souple:"V0",facile:"V0",relache:"V0",relâché:"V0"},I={pap:"Pap",papillon:"Pap",crawl:"Crawl",dos:"Dos",brasse:"Brasse","4n":"4 nages","4 nages":"4 nages",spe:"Spé",spé:"Spé"},R={nc:"NC",educ:"Éducatif",jambes:"Jambes"},L=t=>t?I[t]??t:null,D=t=>{if(!t)return null;const n=t.trim();if(!n)return null;const e=n.toLowerCase();if(e==="prog"||e==="progressif")return"Prog";if(_[e])return _[e];const r=n.toUpperCase();if(r==="MAX")return"Max";if(r.startsWith("V")){const a=Number.parseInt(r.slice(1),10);if(Number.isFinite(a)&&a>=4)return"Max";if(V.includes(r))return r}return n},O=t=>{if(!t)return"";const n=Math.floor(t/60),e=t%60;return n>0&&e>0?`${n}'${e.toString().padStart(2,"0")}`:n>0?`${n}'00`:`${e}s`};function H(t){if(!t||!Number.isFinite(t)||t<=0)return"";const n=Math.floor(t/60),e=Math.floor(t%60),r=Math.round(t%1*100);return n>0?`${n}:${String(e).padStart(2,"0")}:${String(r).padStart(2,"0")}`:`${e}:${String(r).padStart(2,"0")}`}function K(t){const n=t.trim();if(!n)return 0;const e=n.split(":");if(e.length===3){const a=parseInt(e[0],10)||0,i=parseInt(e[1],10)||0,u=parseInt(e[2],10)||0;return a*60+i+u/100}if(e.length===2){const a=parseInt(e[0],10)||0,i=parseInt(e[1],10)||0;return a+i/100}const r=parseFloat(n);return Number.isFinite(r)?r:0}const z=(t=[])=>{const n=new Map;return t.forEach((e,r)=>{const a=e.raw_payload??{},i=typeof a=="object"?a:{},u=i.block_title||i.section||"Bloc",p=Number(i.block_order??0),m=`${p}-${u}`,o=i.block_equipment??i.equipment,y=i.block_modalities??i.modalities??null,x=Array.isArray(o)?o:o?String(o).split(",").map(l=>l.trim()).filter(Boolean):[];n.has(m)||n.set(m,{key:m,title:u,description:i.block_description??null,modalities:y,equipment:x.length?x:null,order:Number.isFinite(p)?p:0,repetitions:i.block_repetitions??null,items:[]});const $=n.get(m),f=i.exercise_repetitions??null,c=e.distance??null,k=e.label||(f&&c?`${f}x${c}m`:null)||(c?`${c}m`:null),b=i.exercise_modalities??e.notes??null,s=i.exercise_equipment??i.equipment,M=Array.isArray(s)?s:s?String(s).split(",").map(l=>l.trim()).filter(Boolean):[];$.items.push({...e,label:k||i.exercise_label||`Exercice ${r+1}`,notes:b,raw_payload:{...i,exercise_modalities:b,exercise_equipment:M}})}),Array.from(n.values()).sort((e,r)=>e.order!==r.order?e.order-r.order:e.title.localeCompare(r.title))},U=[{value:"aucun",label:"Sans équipement"},{value:"palmes",label:"Palmes"},{value:"plaquettes",label:"Plaquettes"},{value:"pull-buoy",label:"Pull-buoy"},{value:"tuba",label:"Tuba frontal"},{value:"elastique",label:"Élastique"},{value:"combinaison",label:"Combinaison"}];function d(t,n){return t.replace(/\D/g,"").slice(0,n)}function C(t){const n=t.trim();if(!n)return{minutes:"",seconds:"",hundredths:""};const e=n.split(":");if(e.length>=3)return{minutes:d(e[0]??"",2),seconds:d(e[1]??"",2),hundredths:d(e[2]??"",2)};if(e.length===2)return{minutes:"",seconds:d(e[0]??"",2),hundredths:d(e[1]??"",2)};const r=d(n,6);return r.length<=2?{minutes:"",seconds:r,hundredths:""}:r.length<=4?{minutes:"",seconds:r.slice(0,-2),hundredths:r.slice(-2)}:{minutes:r.slice(0,-4),seconds:r.slice(-4,-2),hundredths:r.slice(-2)}}function E({minutes:t,seconds:n,hundredths:e}){return!t&&!n&&!e?"":t?`${t}:${n}:${e}`:`${n}:${e}`}function X({value:t,onChange:n,onBlur:e,size:r="default",className:a}){const i=S.useRef(null),u=S.useRef(null),p=S.useRef(null),m=S.useRef(null),o=C(t),y=r==="compact"?"h-6 w-8 rounded-md px-1 text-xs":"h-8 w-10 rounded-md px-2 text-sm",x=r==="compact"?"text-xs":"text-sm",$=s=>{n(E({...o,...s}))},f=()=>{e&&window.requestAnimationFrame(()=>{i.current?.contains(document.activeElement)||e()})},c=(s,M,l)=>{const w=d(M,2);$({[s]:w}),w.length===2&&l?.current&&(l.current.focus(),l.current.select())},k=(s,M,l)=>{s.key==="Backspace"&&M.length===0&&l?.current&&(l.current.focus(),l.current.select())},b=s=>{s.currentTarget.select()};return h.jsxs("div",{ref:i,className:g("inline-flex items-center gap-1",a),children:[h.jsx("input",{ref:u,type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"m",value:o.minutes,onChange:s=>c("minutes",s.target.value,p),onKeyDown:s=>k(s,o.minutes),onFocus:b,onBlur:f,className:g("border border-input bg-background text-center tabular-nums outline-none focus:ring-1 focus:ring-ring",y),"aria-label":"Minutes"}),h.jsx("span",{className:g("text-muted-foreground font-semibold tabular-nums",x),children:":"}),h.jsx("input",{ref:p,type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"ss",value:o.seconds,onChange:s=>c("seconds",s.target.value,m),onKeyDown:s=>k(s,o.seconds,u),onFocus:b,onBlur:f,className:g("border border-input bg-background text-center tabular-nums outline-none focus:ring-1 focus:ring-ring",y),"aria-label":"Secondes"}),h.jsx("span",{className:g("text-muted-foreground font-semibold tabular-nums",x),children:":"}),h.jsx("input",{ref:m,type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"cc",value:o.hundredths,onChange:s=>c("hundredths",s.target.value),onKeyDown:s=>k(s,o.hundredths,p),onFocus:b,onBlur:f,className:g("border border-input bg-background text-center tabular-nums outline-none focus:ring-1 focus:ring-ring",y),"aria-label":"Centiemes"})]})}export{j as A,U as E,A as H,X as S,L as a,F as b,O as c,H as f,z as g,B as i,D as n,K as p,R as s};
