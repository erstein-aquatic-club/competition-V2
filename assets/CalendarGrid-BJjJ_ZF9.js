import{j as e,r as R}from"./vendor-query-DyA9aSKS.js";import{C as E}from"./chevron-left-ByUcAH2y.js";import{C as F}from"./chevron-right-CXVK08nj.js";import{T as K}from"./trophy-F1PyAR91.js";import{b as L}from"./index-BG17NGj_.js";import{m as A}from"./vendor-motion-lao-Njgm.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],_=L("moon",Y);function T(...t){return t.filter(Boolean).join(" ")}function I(t){return t.toLocaleDateString("fr-FR",{month:"long",year:"numeric"})}function S({onClick:t,label:r,children:n,tone:c="neutral",disabled:d}){const a={neutral:"bg-background border-border text-foreground hover:bg-muted",dark:"bg-foreground border-foreground text-background hover:opacity-90",sky:"bg-primary/10 border-primary/30 text-primary hover:bg-primary/20"};return e.jsxs("button",{type:"button",onClick:t,disabled:d,className:T("inline-flex items-center justify-center rounded-2xl border p-2 transition",a[c],d&&"opacity-50 cursor-not-allowed hover:bg-background"),"aria-label":r,title:r,children:[n,e.jsx("span",{className:"sr-only",children:r})]})}function Z({monthCursor:t,selectedDayStatus:r,onPrevMonth:n,onNextMonth:c,onJumpToday:d}){const a=r.slots.filter(o=>o.expected).length,s=r.slots.filter(o=>o.expected&&o.completed).length,x=r.slots.filter(o=>o.expected&&o.absent).length,m=a===0?"repos":x===a?"absent":`${s}/${a} fait`;return e.jsxs("div",{className:"flex items-center justify-between px-3 sm:px-5 py-3 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(S,{onClick:n,label:"Mois précédent",children:e.jsx(E,{className:"h-5 w-5"})}),e.jsx(S,{onClick:c,label:"Mois suivant",children:e.jsx(F,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"min-w-0 text-center",children:[e.jsx("div",{className:"text-base font-semibold text-foreground capitalize truncate",children:I(t)}),e.jsx("div",{className:"mt-1 text-[10px] font-semibold uppercase tracking-[0.12em] text-muted-foreground",children:m})]}),e.jsx("button",{type:"button",onClick:d,className:"rounded-2xl border border-border bg-background px-3 py-2 text-xs font-semibold text-foreground transition hover:bg-muted","aria-label":"Aller à aujourd'hui",children:"Aujourd'hui"})]})}function h(...t){return t.filter(Boolean).join(" ")}function O(t){const r=n=>String(n).padStart(2,"0");return`${t.getFullYear()}-${r(t.getMonth()+1)}-${r(t.getDate())}`}const P=R.memo(function({date:r,inMonth:n,isToday:c,isSelected:d,isFocused:a,status:s,strengthAssigned:x,hasCompetition:m,hasAbsence:o,onClick:j,onKeyDown:y}){const{total:f,slots:p}=s,l=f===0,g=p.filter(i=>i.expected),u=g.length>0&&g.every(i=>i.absent),N=f>0&&s.completed===f&&!u,v=o?"bg-muted-foreground/15 dark:bg-muted-foreground/25":m?"bg-amber-50 dark:bg-amber-950/30":l?"bg-muted/30":N?"bg-status-success/10":"bg-card",M=o?"border-muted-foreground/20":m?"border-amber-200 dark:border-amber-900/40":"border-border",b=d?"ring-2 ring-primary/30":"",w=c&&!d?"ring-2 ring-primary/50":"",k=a?"ring-2 ring-primary":"",D=i=>i?.expected?i.completed?"bg-status-success":i.absent?"bg-muted-foreground/15":"bg-muted-foreground/30":"hidden",C=p.find(i=>i.slotKey==="AM"),$=p.find(i=>i.slotKey==="PM");return e.jsx("button",{type:"button",onClick:j,onKeyDown:y,tabIndex:a?0:-1,"data-calendar-cell":"true",className:h("aspect-square min-w-0 rounded-2xl border p-1 transition",v,M,!n&&"opacity-40","hover:shadow-sm focus:outline-none",b,w,k),"aria-label":`${O(r)} — ${l?"Repos":`${s.completed}/${f}`}`,children:e.jsxs("div",{className:"flex h-full flex-col justify-between",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:h("text-[12px] font-semibold",o?"text-muted-foreground":"text-foreground"),children:r.getDate()}),m?e.jsx(K,{className:"h-3 w-3 text-amber-500"}):e.jsx("div",{className:"h-[14px] w-[14px]"})]}),e.jsx("div",{className:"flex items-center justify-end gap-1",children:m?null:l&&!x?e.jsx(_,{className:"h-3 w-3 text-muted-foreground/40"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:h("inline-flex h-2 w-3 rounded-full",D(C))}),e.jsx("span",{className:h("inline-flex h-2 w-3 rounded-full",D($))})]}),x?e.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-orange-400 shrink-0"}):null]})})]})})});function B({onSwipeLeft:t,onSwipeRight:r,threshold:n=50,velocityThreshold:c=500}){return{drag:"x",dragConstraints:{left:0,right:0},dragElastic:.2,dragSnapToOrigin:!0,onDragEnd:(a,s)=>{Math.abs(s.offset.y)>Math.abs(s.offset.x)||(s.offset.x<-n||s.velocity.x<-c?t?.():(s.offset.x>n||s.velocity.x>c)&&r?.())}}}const H=["Lu","Ma","Me","Je","Ve","Sa","Di"],J=["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"];function V(t){const r=n=>String(n).padStart(2,"0");return`${t.getFullYear()}-${r(t.getMonth()+1)}-${r(t.getDate())}`}function W(t,r){return t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()&&t.getDate()===r.getDate()}function ee({monthCursor:t,gridDates:r,completionByISO:n,strengthByISO:c,competitionDates:d,absenceDates:a,selectedISO:s,selectedDayIndex:x,today:m,onDayClick:o,onKeyDown:j,onSwipeLeft:y,onSwipeRight:f}){const p=B({onSwipeLeft:y,onSwipeRight:f});return e.jsx(A.div,{...p,className:"p-3 sm:p-5",children:e.jsxs("div",{className:"grid grid-cols-7 gap-1.5 sm:gap-2",children:[H.map((l,g)=>e.jsxs("div",{className:"px-0.5 pb-1 text-[10px] font-semibold text-muted-foreground text-center",children:[e.jsx("span",{className:"sm:hidden",children:l}),e.jsx("span",{className:"hidden sm:inline",children:J[g]})]},l+g)),r.map((l,g)=>{const u=V(l),N=l.getMonth()===t.getMonth(),v=u===s,M=n[u]||{completed:0,total:2,slots:[{slotKey:"AM",expected:!0,completed:!1,absent:!1},{slotKey:"PM",expected:!0,completed:!1,absent:!1}]},b=W(l,m),w=x===g||x===null&&b;return e.jsx(P,{date:l,inMonth:N,isToday:b,isSelected:v,isFocused:w,status:M,strengthAssigned:c?.[u],hasCompetition:d?.has(u),hasAbsence:a?.has(u),onClick:()=>o(u),onKeyDown:k=>j(k,g)},u)})]})})}export{Z as C,_ as M,ee as a};
