import{j as e,r as R}from"./vendor-query-DyA9aSKS.js";import{C as F}from"./chevron-left-eZZn_rQZ.js";import{C as K}from"./chevron-right-SIEvFgC2.js";import{c as L,T as A}from"./index-CtNtFTTu.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Y=L("moon",E);function T(...t){return t.filter(Boolean).join(" ")}function _(t){return t.toLocaleDateString("fr-FR",{month:"long",year:"numeric"})}function k({onClick:t,label:r,children:o,tone:u="neutral",disabled:i}){const l={neutral:"bg-background border-border text-foreground hover:bg-muted",dark:"bg-foreground border-foreground text-background hover:opacity-90",sky:"bg-primary/10 border-primary/30 text-primary hover:bg-primary/20"};return e.jsxs("button",{type:"button",onClick:t,disabled:i,className:T("inline-flex items-center justify-center rounded-2xl border p-2 transition",l[u],i&&"opacity-50 cursor-not-allowed hover:bg-background"),"aria-label":r,title:r,children:[o,e.jsx("span",{className:"sr-only",children:r})]})}function G({monthCursor:t,selectedDayStatus:r,onPrevMonth:o,onNextMonth:u,onJumpToday:i}){const l=r.slots.filter(n=>n.expected).length,m=r.slots.filter(n=>n.expected&&n.completed).length,x=r.slots.filter(n=>n.expected&&n.absent).length,g=l===0?"repos":x===l?"absent":`${m}/${l} fait`;return e.jsxs("div",{className:"flex items-center justify-between px-3 sm:px-5 py-3 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(k,{onClick:o,label:"Mois précédent",children:e.jsx(F,{className:"h-5 w-5"})}),e.jsx(k,{onClick:u,label:"Mois suivant",children:e.jsx(K,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"min-w-0 text-center",children:[e.jsx("div",{className:"text-base font-semibold text-foreground capitalize truncate",children:_(t)}),e.jsx("div",{className:"mt-1 text-[10px] font-semibold uppercase tracking-[0.12em] text-muted-foreground",children:g})]}),e.jsx("button",{type:"button",onClick:i,className:"rounded-2xl border border-border bg-background px-3 py-2 text-xs font-semibold text-foreground transition hover:bg-muted","aria-label":"Aller à aujourd'hui",children:"Aujourd'hui"})]})}function h(...t){return t.filter(Boolean).join(" ")}function I(t){const r=o=>String(o).padStart(2,"0");return`${t.getFullYear()}-${r(t.getMonth()+1)}-${r(t.getDate())}`}const B=R.memo(function({date:r,inMonth:o,isToday:u,isSelected:i,isFocused:l,status:m,strengthAssigned:x,hasCompetition:g,hasAbsence:n,onClick:j,onKeyDown:d}){const{total:c,slots:s}=m,p=c===0,b=s.filter(a=>a.expected),y=b.length>0&&b.every(a=>a.absent),f=c>0&&m.completed===c&&!y,N=n?"bg-muted-foreground/15 dark:bg-muted-foreground/25":g?"bg-amber-50 dark:bg-amber-950/30":p?"bg-muted/30":f?"bg-status-success/10":"bg-card",v=n?"border-muted-foreground/20":g?"border-amber-200 dark:border-amber-900/40":"border-border",w=i?"ring-2 ring-primary/30":"",C=u&&!i?"ring-2 ring-primary/50":"",S=l?"ring-2 ring-primary":"",M=a=>a?.expected?a.completed?"bg-status-success":a.absent?"bg-muted-foreground/15":"bg-muted-foreground/30":"hidden",D=s.find(a=>a.slotKey==="AM"),$=s.find(a=>a.slotKey==="PM");return e.jsx("button",{type:"button",onClick:j,onKeyDown:d,tabIndex:l?0:-1,"data-calendar-cell":"true",className:h("aspect-square min-w-0 rounded-2xl border p-1 transition",N,v,!o&&"opacity-40","hover:shadow-sm focus:outline-none",w,C,S),"aria-label":`${I(r)} — ${p?"Repos":`${m.completed}/${c}`}`,children:e.jsxs("div",{className:"flex h-full flex-col justify-between",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:h("text-[12px] font-semibold",n?"text-muted-foreground":"text-foreground"),children:r.getDate()}),g?e.jsx(A,{className:"h-3 w-3 text-amber-500"}):e.jsx("div",{className:"h-[14px] w-[14px]"})]}),e.jsx("div",{className:"flex items-center justify-end gap-1",children:p&&!x?e.jsx(Y,{className:"h-3 w-3 text-muted-foreground/40"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:h("inline-flex h-2 w-3 rounded-full",M(D))}),e.jsx("span",{className:h("inline-flex h-2 w-3 rounded-full",M($))})]}),x?e.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-orange-400 shrink-0"}):null]})})]})})}),O=["Lu","Ma","Me","Je","Ve","Sa","Di"],P=["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"];function H(t){const r=o=>String(o).padStart(2,"0");return`${t.getFullYear()}-${r(t.getMonth()+1)}-${r(t.getDate())}`}function J(t,r){return t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()&&t.getDate()===r.getDate()}function Q({monthCursor:t,gridDates:r,completionByISO:o,strengthByISO:u,competitionDates:i,absenceDates:l,selectedISO:m,selectedDayIndex:x,today:g,onDayClick:n,onKeyDown:j}){return e.jsx("div",{className:"p-3 sm:p-5",children:e.jsxs("div",{className:"grid grid-cols-7 gap-1.5 sm:gap-2",children:[O.map((d,c)=>e.jsxs("div",{className:"px-0.5 pb-1 text-[10px] font-semibold text-muted-foreground text-center",children:[e.jsx("span",{className:"sm:hidden",children:d}),e.jsx("span",{className:"hidden sm:inline",children:P[c]})]},d+c)),r.map((d,c)=>{const s=H(d),p=d.getMonth()===t.getMonth(),b=s===m,y=o[s]||{completed:0,total:2,slots:[{slotKey:"AM",expected:!0,completed:!1,absent:!1},{slotKey:"PM",expected:!0,completed:!1,absent:!1}]},f=J(d,g),N=x===c||x===null&&f;return e.jsx(B,{date:d,inMonth:p,isToday:f,isSelected:b,isFocused:N,status:y,strengthAssigned:u?.[s],hasCompetition:i?.has(s),hasAbsence:l?.has(s),onClick:()=>n(s),onKeyDown:v=>j(v,c)},s)})]})})}export{G as C,Y as M,Q as a};
