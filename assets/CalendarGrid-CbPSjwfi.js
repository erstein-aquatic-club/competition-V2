import{j as e,r as R}from"./vendor-query-DyA9aSKS.js";import{C as F}from"./chevron-left-5PHIhczB.js";import{C as K}from"./chevron-right-qB_Mu1QX.js";import{c as L,T as A}from"./index-DsyO_7X-.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Y=L("moon",E);function T(...t){return t.filter(Boolean).join(" ")}function _(t){return t.toLocaleDateString("fr-FR",{month:"long",year:"numeric"})}function k({onClick:t,label:n,children:o,tone:u="neutral",disabled:c}){const l={neutral:"bg-background border-border text-foreground hover:bg-muted",dark:"bg-foreground border-foreground text-background hover:opacity-90",sky:"bg-primary/10 border-primary/30 text-primary hover:bg-primary/20"};return e.jsxs("button",{type:"button",onClick:t,disabled:c,className:T("inline-flex items-center justify-center rounded-2xl border p-2 transition",l[u],c&&"opacity-50 cursor-not-allowed hover:bg-background"),"aria-label":n,title:n,children:[o,e.jsx("span",{className:"sr-only",children:n})]})}function G({monthCursor:t,selectedDayStatus:n,onPrevMonth:o,onNextMonth:u,onJumpToday:c}){const l=n.slots.filter(r=>r.expected).length,m=n.slots.filter(r=>r.expected&&r.completed).length,x=n.slots.filter(r=>r.expected&&r.absent).length,g=l===0?"repos":x===l?"absent":`${m}/${l} fait`;return e.jsxs("div",{className:"flex items-center justify-between px-3 sm:px-5 py-3 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(k,{onClick:o,label:"Mois précédent",children:e.jsx(F,{className:"h-5 w-5"})}),e.jsx(k,{onClick:u,label:"Mois suivant",children:e.jsx(K,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"min-w-0 text-center",children:[e.jsx("div",{className:"text-base font-semibold text-foreground capitalize truncate",children:_(t)}),e.jsx("div",{className:"mt-1 text-[10px] font-semibold uppercase tracking-[0.12em] text-muted-foreground",children:g})]}),e.jsx("button",{type:"button",onClick:c,className:"rounded-2xl border border-border bg-background px-3 py-2 text-xs font-semibold text-foreground transition hover:bg-muted","aria-label":"Aller à aujourd'hui",children:"Aujourd'hui"})]})}function h(...t){return t.filter(Boolean).join(" ")}function B(t){const n=o=>String(o).padStart(2,"0");return`${t.getFullYear()}-${n(t.getMonth()+1)}-${n(t.getDate())}`}const I=R.memo(function({date:n,inMonth:o,isToday:u,isSelected:c,isFocused:l,status:m,strengthAssigned:x,hasCompetition:g,hasAbsence:r,onClick:j,onKeyDown:d}){const{total:i,slots:s}=m,p=i===0,f=s.filter(a=>a.expected),y=f.length>0&&f.every(a=>a.absent),b=i>0&&m.completed===i&&!y,N=r?"bg-muted-foreground/15 dark:bg-muted-foreground/25":g?"bg-amber-50 dark:bg-amber-950/30":p?"bg-muted/30":b?"bg-status-success/10":"bg-card",v=r?"border-muted-foreground/20":g?"border-amber-200 dark:border-amber-900/40":"border-border",w=c?"ring-2 ring-primary/30":"",S=u&&!c?"ring-2 ring-primary/50":"",C=l?"ring-2 ring-primary":"",M=a=>a?.expected?a.completed?"bg-status-success text-white":a.absent?"bg-muted-foreground/15 text-muted-foreground":"bg-muted text-muted-foreground":"hidden",D=s.find(a=>a.slotKey==="AM"),$=s.find(a=>a.slotKey==="PM");return e.jsx("button",{type:"button",onClick:j,onKeyDown:d,tabIndex:l?0:-1,"data-calendar-cell":"true",className:h("aspect-square min-w-0 rounded-2xl border p-1 transition",N,v,!o&&"opacity-40","hover:shadow-sm focus:outline-none",w,S,C),"aria-label":`${B(n)} — ${p?"Repos":`${m.completed}/${i}`}`,children:e.jsxs("div",{className:"flex h-full flex-col justify-between",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:h("text-[12px] font-semibold",r?"text-muted-foreground":"text-foreground"),children:n.getDate()}),g?e.jsx(A,{className:"h-3 w-3 text-amber-500"}):e.jsx("div",{className:"h-[14px] w-[14px]"})]}),e.jsx("div",{className:"flex items-center justify-end gap-1",children:p&&!x?e.jsx(Y,{className:"h-3 w-3 text-muted-foreground/40"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:h("inline-flex h-3.5 min-w-[14px] items-center justify-center rounded-md px-0.5 text-[8px] font-bold leading-none",M(D)),children:"M"}),e.jsx("span",{className:h("inline-flex h-3.5 min-w-[14px] items-center justify-center rounded-md px-0.5 text-[8px] font-bold leading-none",M($)),children:"S"})]}),x?e.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-orange-400 shrink-0"}):null]})})]})})}),O=["Lu","Ma","Me","Je","Ve","Sa","Di"],H=["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"];function J(t){const n=o=>String(o).padStart(2,"0");return`${t.getFullYear()}-${n(t.getMonth()+1)}-${n(t.getDate())}`}function P(t,n){return t.getFullYear()===n.getFullYear()&&t.getMonth()===n.getMonth()&&t.getDate()===n.getDate()}function Q({monthCursor:t,gridDates:n,completionByISO:o,strengthByISO:u,competitionDates:c,absenceDates:l,selectedISO:m,selectedDayIndex:x,today:g,onDayClick:r,onKeyDown:j}){return e.jsx("div",{className:"p-3 sm:p-5",children:e.jsxs("div",{className:"grid grid-cols-7 gap-1.5 sm:gap-2",children:[O.map((d,i)=>e.jsxs("div",{className:"px-0.5 pb-1 text-[10px] font-semibold text-muted-foreground text-center",children:[e.jsx("span",{className:"sm:hidden",children:d}),e.jsx("span",{className:"hidden sm:inline",children:H[i]})]},d+i)),n.map((d,i)=>{const s=J(d),p=d.getMonth()===t.getMonth(),f=s===m,y=o[s]||{completed:0,total:2,slots:[{slotKey:"AM",expected:!0,completed:!1,absent:!1},{slotKey:"PM",expected:!0,completed:!1,absent:!1}]},b=P(d,g),N=x===i||x===null&&b;return e.jsx(I,{date:d,inMonth:p,isToday:b,isSelected:f,isFocused:N,status:y,strengthAssigned:u?.[s],hasCompetition:c?.has(s),hasAbsence:l?.has(s),onClick:()=>r(s),onKeyDown:v=>j(v,i)},s)})]})})}export{G as C,Y as M,Q as a};
