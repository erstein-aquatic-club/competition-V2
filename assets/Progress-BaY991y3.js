import{a as b,r as k,u as U,e as mn,j as a}from"./vendor-query-BiSH4r2z.js";import{a as H}from"./api-2gvZgObt.js";import{c as pn,f as it,u as fn,T as hn,C as ft,g as ht,B as yn,h as gn}from"./index-BIA1a5SG.js";import{T as xn,a as vn,b as Je,c as Ee,d as bn,e as we}from"./table-CWe2ELED.js";import{T as jn,a as An,b as yt,c as gt}from"./tabs-6koZWkMU.js";import{T as xt,a as ce}from"./toggle-group-DMvxx_jM.js";import{C as wn,a as Sn,b as Pn}from"./collapsible-DifYZAtA.js";import{s as Dt}from"./score-CwBbkHfb.js";import{i as Nn}from"./swim-Drq95JMW.js";import{g as On}from"./design-tokens-CKgCpdH6.js";import{b as fe}from"./animations-CrcLFysI.js";import{t as Dn,s as Ze,f as ue}from"./format-B9mPVj_w.js";import{s as re}from"./subDays-BHZeCtPl.js";import{m as ae}from"./proxy-Dh0N-Z8G.js";import{f as J,L as Y,m as Te,i as he,C as Le,A as _t,a as G,b as te,c as _n,d as tt,h as Cn,e as Ct,u as Et,g as Re,G as Tt,j as ye,k as Ke,D as En,S as vt,l as Tn,n as kn,o as kt,E as $n,p as Ln,q as $t,r as Lt,X as ie,Y as Se,s as Mt,B as Me,R as de,T as me,t as bt}from"./generateCategoricalChart-CG8puR7F.js";import{P as Mn,a as Rn,B as jt,T as Kn}from"./PieChart-CR-Y6X0E.js";import{L as Rt}from"./Line-DEHHGjVw.js";import{C as In}from"./chevron-down-CqufK5Kw.js";import"./vendor-react-BzrpNAyj.js";import"./vendor-supabase-DFPLkPj_.js";import"./index-CsQ11XW9.js";import"./index-vHNH1TGX.js";import"./index-BW3_24JR.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],zn=pn("chart-column",Bn);var Fn=["layout","type","stroke","connectNulls","isRange","ref"],Vn=["key"],Kt;function ge(t){"@babel/helpers - typeof";return ge=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(t)}function It(t,e){if(t==null)return{};var r=Wn(t,e),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Wn(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function se(){return se=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},se.apply(this,arguments)}function At(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function ee(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?At(Object(r),!0).forEach(function(n){Q(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):At(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function qn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zt(n.key),n)}}function Hn(t,e,r){return e&&wt(t.prototype,e),r&&wt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gn(t,e,r){return e=Ie(e),Yn(t,Bt()?Reflect.construct(e,r||[],Ie(t).constructor):e.apply(t,r))}function Yn(t,e){if(e&&(ge(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qn(t)}function Qn(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bt=function(){return!!t})()}function Ie(t){return Ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ie(t)}function Xn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nt(t,e)}function nt(t,e){return nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},nt(t,e)}function Q(t,e,r){return e=zt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zt(t){var e=Jn(t,"string");return ge(e)=="symbol"?e:e+""}function Jn(t,e){if(ge(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ge(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var X=(function(t){function e(){var r;qn(this,e);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return r=Gn(this,e,[].concat(s)),Q(r,"state",{isAnimationFinished:!0}),Q(r,"id",Et("recharts-area-")),Q(r,"handleAnimationEnd",function(){var l=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Re(l)&&l()}),Q(r,"handleAnimationStart",function(){var l=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Re(l)&&l()}),r}return Xn(e,t),Hn(e,[{key:"renderDots",value:function(n,s,o){var l=this.props.isAnimationActive,c=this.state.isAnimationFinished;if(l&&!c)return null;var u=this.props,p=u.dot,m=u.points,f=u.dataKey,h=J(this.props,!1),g=J(p,!0),x=m.map(function(j,O){var P=ee(ee(ee({key:"dot-".concat(O),r:3},h),g),{},{index:O,cx:j.x,cy:j.y,dataKey:f,value:j.value,payload:j.payload,points:m});return e.renderDotItem(p,P)}),D={clipPath:n?"url(#clipPath-".concat(s?"":"dots-").concat(o,")"):null};return b.createElement(Y,se({className:"recharts-area-dots"},D),x)}},{key:"renderHorizontalRect",value:function(n){var s=this.props,o=s.baseLine,l=s.points,c=s.strokeWidth,u=l[0].x,p=l[l.length-1].x,m=n*Math.abs(u-p),f=Te(l.map(function(h){return h.y||0}));return he(o)&&typeof o=="number"?f=Math.max(o,f):o&&Array.isArray(o)&&o.length&&(f=Math.max(Te(o.map(function(h){return h.y||0})),f)),he(f)?b.createElement("rect",{x:u<p?u:u-m,y:0,width:m,height:Math.floor(f+(c?parseInt("".concat(c),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var s=this.props,o=s.baseLine,l=s.points,c=s.strokeWidth,u=l[0].y,p=l[l.length-1].y,m=n*Math.abs(u-p),f=Te(l.map(function(h){return h.x||0}));return he(o)&&typeof o=="number"?f=Math.max(o,f):o&&Array.isArray(o)&&o.length&&(f=Math.max(Te(o.map(function(h){return h.x||0})),f)),he(f)?b.createElement("rect",{x:0,y:u<p?u:u-m,width:f+(c?parseInt("".concat(c),10):1),height:Math.floor(m)}):null}},{key:"renderClipRect",value:function(n){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,s,o,l){var c=this.props,u=c.layout,p=c.type,m=c.stroke,f=c.connectNulls,h=c.isRange;c.ref;var g=It(c,Fn);return b.createElement(Y,{clipPath:o?"url(#clipPath-".concat(l,")"):null},b.createElement(Le,se({},J(g,!0),{points:n,connectNulls:f,type:p,baseLine:s,layout:u,stroke:"none",className:"recharts-area-area"})),m!=="none"&&b.createElement(Le,se({},J(this.props,!1),{className:"recharts-area-curve",layout:u,type:p,connectNulls:f,fill:"none",points:n})),m!=="none"&&h&&b.createElement(Le,se({},J(this.props,!1),{className:"recharts-area-curve",layout:u,type:p,connectNulls:f,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(n,s){var o=this,l=this.props,c=l.points,u=l.baseLine,p=l.isAnimationActive,m=l.animationBegin,f=l.animationDuration,h=l.animationEasing,g=l.animationId,x=this.state,D=x.prevPoints,j=x.prevBaseLine;return b.createElement(_t,{begin:m,duration:f,isActive:p,easing:h,from:{t:0},to:{t:1},key:"area-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(O){var P=O.t;if(D){var A=D.length/c.length,w=c.map(function($,R){var L=Math.floor(R*A);if(D[L]){var I=D[L],B=G(I.x,$.x),Z=G(I.y,$.y);return ee(ee({},$),{},{x:B(P),y:Z(P)})}return $}),S;if(he(u)&&typeof u=="number"){var E=G(j,u);S=E(P)}else if(te(u)||_n(u)){var C=G(j,0);S=C(P)}else S=u.map(function($,R){var L=Math.floor(R*A);if(j[L]){var I=j[L],B=G(I.x,$.x),Z=G(I.y,$.y);return ee(ee({},$),{},{x:B(P),y:Z(P)})}return $});return o.renderAreaStatically(w,S,n,s)}return b.createElement(Y,null,b.createElement("defs",null,b.createElement("clipPath",{id:"animationClipPath-".concat(s)},o.renderClipRect(P))),b.createElement(Y,{clipPath:"url(#animationClipPath-".concat(s,")")},o.renderAreaStatically(c,u,n,s)))})}},{key:"renderArea",value:function(n,s){var o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,p=this.state,m=p.prevPoints,f=p.prevBaseLine,h=p.totalLength;return u&&l&&l.length&&(!m&&h>0||!tt(m,l)||!tt(f,c))?this.renderAreaWithAnimation(n,s):this.renderAreaStatically(l,c,n,s)}},{key:"render",value:function(){var n,s=this.props,o=s.hide,l=s.dot,c=s.points,u=s.className,p=s.top,m=s.left,f=s.xAxis,h=s.yAxis,g=s.width,x=s.height,D=s.isAnimationActive,j=s.id;if(o||!c||!c.length)return null;var O=this.state.isAnimationFinished,P=c.length===1,A=it("recharts-area",u),w=f&&f.allowDataOverflow,S=h&&h.allowDataOverflow,E=w||S,C=te(j)?this.id:j,$=(n=J(l,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},R=$.r,L=R===void 0?3:R,I=$.strokeWidth,B=I===void 0?2:I,Z=Cn(l)?l:{},Oe=Z.clipDot,De=Oe===void 0?!0:Oe,oe=L*2+B;return b.createElement(Y,{className:A},w||S?b.createElement("defs",null,b.createElement("clipPath",{id:"clipPath-".concat(C)},b.createElement("rect",{x:w?m:m-g/2,y:S?p:p-x/2,width:w?g:g*2,height:S?x:x*2})),!De&&b.createElement("clipPath",{id:"clipPath-dots-".concat(C)},b.createElement("rect",{x:m-oe/2,y:p-oe/2,width:g+oe,height:x+oe}))):null,P?null:this.renderArea(E,C),(l||P)&&this.renderDots(E,De,C),(!D||O)&&Ct.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:n.points!==s.curPoints||n.baseLine!==s.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])})(k.PureComponent);Kt=X;Q(X,"displayName","Area");Q(X,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Tt.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Q(X,"getBaseValue",function(t,e,r,n){var s=t.layout,o=t.baseValue,l=e.props.baseValue,c=l??o;if(he(c)&&typeof c=="number")return c;var u=s==="horizontal"?n:r,p=u.scale.domain();if(u.type==="number"){var m=Math.max(p[0],p[1]),f=Math.min(p[0],p[1]);return c==="dataMin"?f:c==="dataMax"||m<0?m:Math.max(Math.min(p[0],p[1]),0)}return c==="dataMin"?p[0]:c==="dataMax"?p[1]:p[0]});Q(X,"getComposedData",function(t){var e=t.props,r=t.item,n=t.xAxis,s=t.yAxis,o=t.xAxisTicks,l=t.yAxisTicks,c=t.bandSize,u=t.dataKey,p=t.stackedData,m=t.dataStartIndex,f=t.displayedData,h=t.offset,g=e.layout,x=p&&p.length,D=Kt.getBaseValue(e,r,n,s),j=g==="horizontal",O=!1,P=f.map(function(w,S){var E;x?E=p[m+S]:(E=ye(w,u),Array.isArray(E)?O=!0:E=[D,E]);var C=E[1]==null||x&&ye(w,u)==null;return j?{x:Ke({axis:n,ticks:o,bandSize:c,entry:w,index:S}),y:C?null:s.scale(E[1]),value:E,payload:w}:{x:C?null:n.scale(E[1]),y:Ke({axis:s,ticks:l,bandSize:c,entry:w,index:S}),value:E,payload:w}}),A;return x||O?A=P.map(function(w){var S=Array.isArray(w.value)?w.value[0]:null;return j?{x:w.x,y:S!=null&&w.y!=null?s.scale(S):null}:{x:S!=null?n.scale(S):null,y:w.y}}):A=j?s.scale(D):n.scale(D),ee({points:P,baseLine:A,layout:g,isRange:O},h)});Q(X,"renderDotItem",function(t,e){var r;if(b.isValidElement(t))r=b.cloneElement(t,e);else if(Re(t))r=t(e);else{var n=it("recharts-area-dot",typeof t!="boolean"?t.className:""),s=e.key,o=It(e,Vn);r=b.createElement(En,se({},o,{key:s,className:n}))}return r});function xe(t){"@babel/helpers - typeof";return xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(t)}function Zn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Un(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wt(n.key),n)}}function er(t,e,r){return e&&Un(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function tr(t,e,r){return e=Be(e),nr(t,Ft()?Reflect.construct(e,r||[],Be(t).constructor):e.apply(t,r))}function nr(t,e){if(e&&(xe(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rr(t)}function rr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ft(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ft=function(){return!!t})()}function Be(t){return Be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Be(t)}function ar(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rt(t,e)}function rt(t,e){return rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},rt(t,e)}function Vt(t,e,r){return e=Wt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wt(t){var e=ir(t,"string");return xe(e)=="symbol"?e:e+""}function ir(t,e){if(xe(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xe(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Fe=(function(t){function e(){return Zn(this,e),tr(this,e,arguments)}return ar(e,t),er(e,[{key:"render",value:function(){return null}}])})(k.Component);Vt(Fe,"displayName","ZAxis");Vt(Fe,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var sr=["option","isActive"];function Pe(){return Pe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pe.apply(this,arguments)}function or(t,e){if(t==null)return{};var r=lr(t,e),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)n=o[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function lr(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function cr(t){var e=t.option,r=t.isActive,n=or(t,sr);return typeof e=="string"?k.createElement(vt,Pe({option:k.createElement(Tn,Pe({type:e},n)),isActive:r,shapeType:"symbols"},n)):k.createElement(vt,Pe({option:e,isActive:r,shapeType:"symbols"},n))}function ve(t){"@babel/helpers - typeof";return ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(t)}function Ne(){return Ne=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ne.apply(this,arguments)}function St(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function z(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?St(Object(r),!0).forEach(function(n){ne(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):St(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ur(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ht(n.key),n)}}function dr(t,e,r){return e&&Pt(t.prototype,e),r&&Pt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function mr(t,e,r){return e=ze(e),pr(t,qt()?Reflect.construct(e,r||[],ze(t).constructor):e.apply(t,r))}function pr(t,e){if(e&&(ve(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fr(t)}function fr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qt=function(){return!!t})()}function ze(t){return ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ze(t)}function hr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&at(t,e)}function at(t,e){return at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},at(t,e)}function ne(t,e,r){return e=Ht(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ht(t){var e=yr(t,"string");return ve(e)=="symbol"?e:e+""}function yr(t,e){if(ve(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ve(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ve=(function(t){function e(){var r;ur(this,e);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return r=mr(this,e,[].concat(s)),ne(r,"state",{isAnimationFinished:!1}),ne(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),ne(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),ne(r,"id",Et("recharts-scatter-")),r}return hr(e,t),dr(e,[{key:"renderSymbolsStatically",value:function(n){var s=this,o=this.props,l=o.shape,c=o.activeShape,u=o.activeIndex,p=J(this.props,!1);return n.map(function(m,f){var h=u===f,g=h?c:l,x=z(z({},p),m);return b.createElement(Y,Ne({className:"recharts-scatter-symbol",key:"symbol-".concat(m?.cx,"-").concat(m?.cy,"-").concat(m?.size,"-").concat(f)},kn(s.props,m,f),{role:"img"}),b.createElement(cr,Ne({option:g,isActive:h,key:"symbol-".concat(f)},x)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,s=this.props,o=s.points,l=s.isAnimationActive,c=s.animationBegin,u=s.animationDuration,p=s.animationEasing,m=s.animationId,f=this.state.prevPoints;return b.createElement(_t,{begin:c,duration:u,isActive:l,easing:p,from:{t:0},to:{t:1},key:"pie-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var g=h.t,x=o.map(function(D,j){var O=f&&f[j];if(O){var P=G(O.cx,D.cx),A=G(O.cy,D.cy),w=G(O.size,D.size);return z(z({},D),{},{cx:P(g),cy:A(g),size:w(g)})}var S=G(0,D.size);return z(z({},D),{},{size:S(g)})});return b.createElement(Y,null,n.renderSymbolsStatically(x))})}},{key:"renderSymbols",value:function(){var n=this.props,s=n.points,o=n.isAnimationActive,l=this.state.prevPoints;return o&&s&&s.length&&(!l||!tt(l,s))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(s)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.points,l=s.xAxis,c=s.yAxis,u=s.children,p=kt(u,$n);return p?p.map(function(m,f){var h=m.props,g=h.direction,x=h.dataKey;return b.cloneElement(m,{key:"".concat(g,"-").concat(x,"-").concat(o[f]),data:o,xAxis:l,yAxis:c,layout:g==="x"?"vertical":"horizontal",dataPointFormatter:function(j,O){return{x:j.cx,y:j.cy,value:g==="x"?+j.node.x:+j.node.y,errorVal:ye(j,O)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,s=n.points,o=n.line,l=n.lineType,c=n.lineJointType,u=J(this.props,!1),p=J(o,!1),m,f;if(l==="joint")m=s.map(function(A){return{x:A.cx,y:A.cy}});else if(l==="fitting"){var h=Ln(s),g=h.xmin,x=h.xmax,D=h.a,j=h.b,O=function(w){return D*w+j};m=[{x:g,y:O(g)},{x,y:O(x)}]}var P=z(z(z({},u),{},{fill:"none",stroke:u&&u.fill},p),{},{points:m});return b.isValidElement(o)?f=b.cloneElement(o,P):Re(o)?f=o(P):f=b.createElement(Le,Ne({},P,{type:c})),b.createElement(Y,{className:"recharts-scatter-line",key:"recharts-scatter-line"},f)}},{key:"render",value:function(){var n=this.props,s=n.hide,o=n.points,l=n.line,c=n.className,u=n.xAxis,p=n.yAxis,m=n.left,f=n.top,h=n.width,g=n.height,x=n.id,D=n.isAnimationActive;if(s||!o||!o.length)return null;var j=this.state.isAnimationFinished,O=it("recharts-scatter",c),P=u&&u.allowDataOverflow,A=p&&p.allowDataOverflow,w=P||A,S=te(x)?this.id:x;return b.createElement(Y,{className:O,clipPath:w?"url(#clipPath-".concat(S,")"):null},P||A?b.createElement("defs",null,b.createElement("clipPath",{id:"clipPath-".concat(S)},b.createElement("rect",{x:P?m:m-h/2,y:A?f:f-g/2,width:P?h:h*2,height:A?g:g*2}))):null,l&&this.renderLine(),this.renderErrorBar(),b.createElement(Y,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!D||j)&&Ct.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:s.curPoints}:n.points!==s.curPoints?{curPoints:n.points}:null}}])})(k.PureComponent);ne(Ve,"displayName","Scatter");ne(Ve,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Tt.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});ne(Ve,"getComposedData",function(t){var e=t.xAxis,r=t.yAxis,n=t.zAxis,s=t.item,o=t.displayedData,l=t.xAxisTicks,c=t.yAxisTicks,u=t.offset,p=s.props.tooltipType,m=kt(s.props.children,$t),f=te(e.dataKey)?s.props.dataKey:e.dataKey,h=te(r.dataKey)?s.props.dataKey:r.dataKey,g=n&&n.dataKey,x=n?n.range:Fe.defaultProps.range,D=x&&x[0],j=e.scale.bandwidth?e.scale.bandwidth():0,O=r.scale.bandwidth?r.scale.bandwidth():0,P=o.map(function(A,w){var S=ye(A,f),E=ye(A,h),C=!te(g)&&ye(A,g)||"-",$=[{name:te(e.dataKey)?s.props.name:e.name||e.dataKey,unit:e.unit||"",value:S,payload:A,dataKey:f,type:p},{name:te(r.dataKey)?s.props.name:r.name||r.dataKey,unit:r.unit||"",value:E,payload:A,dataKey:h,type:p}];C!=="-"&&$.push({name:n.name||n.dataKey,unit:n.unit||"",value:C,payload:A,dataKey:g,type:p});var R=Ke({axis:e,ticks:l,bandSize:j,entry:A,index:w,dataKey:f}),L=Ke({axis:r,ticks:c,bandSize:O,entry:A,index:w,dataKey:h}),I=C!=="-"?n.scale(C):D,B=Math.sqrt(Math.max(I,0)/Math.PI);return z(z({},A),{},{cx:R,cy:L,x:R-B,y:L-B,xAxis:e,yAxis:r,zAxis:n,width:2*B,height:2*B,size:I,node:{x:S,y:E,z:C},tooltipPayload:$,tooltipPosition:{x:R,y:L},payload:A},m&&m[w]&&m[w].props)});return z({points:P},u)});var Nt=Lt({chartName:"AreaChart",GraphicalChild:X,axisComponents:[{axisType:"xAxis",AxisComp:ie},{axisType:"yAxis",AxisComp:Se}],formatAxisMap:Mt}),gr=Lt({chartName:"ComposedChart",GraphicalChild:[Rt,X,Me,Ve],axisComponents:[{axisType:"xAxis",AxisComp:ie},{axisType:"yAxis",AxisComp:Se},{axisType:"zAxis",AxisComp:Fe}],formatAxisMap:Mt});function xr(t){const e=Dn(t);return e.setHours(23,59,59,999),e}function ke({label:t,value:e,max:r,invert:n=!1}){const s=e!==null?Math.min(100,e/r*100):0,o=Dt(e??null,{invert:n})??"hsl(var(--muted-foreground))";return a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"w-28 shrink-0 text-xs text-muted-foreground truncate",children:t}),a.jsx("div",{className:"relative h-2 flex-1 rounded-full bg-muted overflow-hidden",children:a.jsx(ae.div,{className:"absolute inset-y-0 left-0 rounded-full",style:{backgroundColor:o},initial:{width:0},animate:{width:`${s}%`},transition:{duration:.6,ease:"easeOut"}})}),a.jsx("span",{className:"w-10 text-right text-sm font-mono font-semibold tabular-nums",children:e!==null?e.toFixed(1):"-"})]})}function Ot({value:t,unit:e,label:r,trend:n,trendLabel:s}){return a.jsxs(ae.div,{className:"flex flex-col items-center gap-0.5 py-2",variants:fe,initial:"hidden",animate:"visible",children:[a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-4xl font-mono font-bold tracking-tight",children:t}),e&&a.jsx("span",{className:"text-lg font-mono text-muted-foreground",children:e})]}),a.jsx("span",{className:"text-sm text-muted-foreground",children:r}),n!=null&&a.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-xs font-medium ${n>=0?"bg-emerald-500/10 text-emerald-600":"bg-red-500/10 text-red-600"}`,children:[n>=0?a.jsx(gn,{className:"h-3 w-3"}):a.jsx(Kn,{className:"h-3 w-3"}),n>=0?"+":"",n.toFixed(0),"%",s?` ${s}`:""]})]})}function pe({value:t,label:e,colored:r,colorValue:n,invert:s}){const o="rounded-full px-3 py-1 text-sm font-mono";if(r&&n!==null&&n!==void 0){const l=Dt(n,{invert:s})??"hsl(var(--muted-foreground))";return a.jsx("span",{className:o,style:{backgroundColor:l,color:On(l)},children:t})}return a.jsxs("span",{className:`${o} bg-muted text-muted-foreground`,children:[t,e?` ${e}`:""]})}function Ue(){return a.jsx("div",{className:"space-y-3 animate-pulse motion-reduce:animate-none",children:a.jsx("div",{className:"h-[180px] w-full rounded-xl bg-muted"})})}function et({title:t,children:e}){const[r,n]=k.useState(!1);return a.jsxs(wn,{open:r,onOpenChange:n,children:[a.jsxs(Sn,{className:"flex w-full items-center justify-between rounded-lg bg-muted/50 px-4 py-3 text-sm font-semibold hover:bg-muted transition-colors",children:[t,a.jsx(In,{className:`h-4 w-4 text-muted-foreground transition-transform duration-200 ${r?"rotate-180":""}`})]}),a.jsx(Pn,{className:"pt-4 animate-in fade-in slide-in-from-top-2 motion-reduce:animate-none",children:e})]})}const $e={borderRadius:"8px",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"};function Vr(){const{user:t,userId:e,role:r,selectedAthleteId:n,selectedAthleteName:s}=fn(),o=(r==="coach"||r==="admin")&&(n!==null||!!s),l=o?s:t,c=o?n:e,u=c??l,[p]=k.useState("all"),[m]=k.useState(""),[f]=k.useState(""),[h,g]=k.useState(30),[x,D]=k.useState(30),{data:j=[]}=U({queryKey:["competitions"],queryFn:()=>H.getCompetitions()}),{data:O}=U({queryKey:["my-competition-ids",u],queryFn:()=>H.getMyCompetitionIds(c)}),{data:P}=U({queryKey:["assignments",u],queryFn:()=>H.getAssignments(l,c),enabled:!!l}),{data:A=[]}=U({queryKey:["planned-absences",u],queryFn:()=>c?H.getPlannedAbsences({userId:c}):H.getMyPlannedAbsences()}),w=k.useMemo(()=>new Set(A.map(i=>i.date)),[A]),{data:S,isLoading:E}=U({queryKey:["sessions",u],queryFn:()=>H.getSessions(l,c),enabled:!!l}),C=mn({queryKey:["strength_history",u,"progress",p,m,f],queryFn:({pageParam:i=0})=>H.getStrengthHistory(l,{athleteId:c,limit:10,offset:i,order:"desc",status:p==="all"?void 0:p,from:m||void 0,to:f||void 0}),enabled:!!l,getNextPageParam:i=>{const d=i.pagination.offset+i.pagination.limit;return d<i.pagination.total?d:void 0},initialPageParam:0}),$=C.data?.pages.flatMap(i=>i.runs)??[],R=Ze(re(new Date,x)).toISOString(),L=xr(new Date).toISOString(),I=Ze(re(new Date,x*2)).toISOString(),B=Ze(re(new Date,x)).toISOString(),{data:Z,isLoading:Oe}=U({queryKey:["strength_history_summary",u,"progress",x,R,L],queryFn:()=>H.getStrengthHistory(l,{athleteId:c,limit:200,order:"desc",from:R,to:L}),enabled:!!l}),{data:De,isLoading:oe}=U({queryKey:["strength_history_aggregate",u,"progress",x,R,L],queryFn:()=>H.getStrengthHistoryAggregate(l,{athleteId:c,period:"day",limit:200,order:"asc",from:R,to:L}),enabled:!!l}),{data:Gt}=U({queryKey:["strength_history_aggregate_prev",u,"progress",x,I,B],queryFn:()=>H.getStrengthHistoryAggregate(l,{athleteId:c,period:"day",limit:200,order:"asc",from:I,to:B}),enabled:!!l}),st=Oe||oe,We=Z?.runs??[],Yt=Z?.exercise_summary??[],be=De?.periods??[],Qt=Gt?.periods??[],ot=k.useMemo(()=>!O||O.length===0?j:j.filter(i=>O.includes(i.id)),[j,O]),F=k.useMemo(()=>{const i=new Date().toISOString().slice(0,10);return ot.filter(d=>d.date.slice(0,10)>=i).sort((d,N)=>d.date.localeCompare(N.date))[0]??null},[ot]),qe=k.useMemo(()=>{if(!F)return null;const i=new Date;i.setHours(0,0,0,0);const d=new Date(F.date.slice(0,10)+"T00:00:00");return Math.round((d.getTime()-i.getTime())/(1e3*60*60*24))},[F]),He=k.useMemo(()=>{const i=`swim-dashboard-v2:${u}:presenceDefaults`;try{const N=window.localStorage.getItem(i);if(N)return JSON.parse(N)}catch{}const d={};for(let N=0;N<7;N++)d[N]={AM:!0,PM:!0};return d},[u]),le=k.useMemo(()=>{if(!F)return null;const i=K=>String(K).padStart(2,"0"),d=K=>`${K.getFullYear()}-${i(K.getMonth()+1)}-${i(K.getDate())}`,N=d(new Date),T=F.date.slice(0,10),y=new Set;if(P)for(const K of P){const W=(K.assigned_date||"").slice(0,10);W>N&&W<T&&y.add(W)}const v=new Date;v.setHours(0,0,0,0),v.setDate(v.getDate()+1);const _=new Date(T+"T00:00:00");for(;v<_;){const K=d(v);if(!w.has(K)){const q=(v.getDay()+6)%7,V=!!He?.[q]?.AM,dn=!!He?.[q]?.PM;(V||dn)&&y.add(K)}v.setDate(v.getDate()+1)}return y.size},[F,P,w,He]),Xt=i=>{if(!S)return[];const d=re(new Date,i),N=S.filter(y=>new Date(y.date)>=d).reverse(),T=new Map;return N.forEach(y=>{const v=ue(new Date(y.date),"dd/MM");T.has(v)||T.set(v,{date:v,distance:0,effort:0,rpe:0,performance:0,engagement:0,fatigue:0,count:0,rpeCount:0,performanceCount:0,engagementCount:0,fatigueCount:0});const _=T.get(v);_.distance+=y.distance,_.effort+=y.effort,_.count+=1,y.rpe!==null&&y.rpe!==void 0&&(_.rpe+=y.rpe,_.rpeCount+=1),y.performance!==null&&y.performance!==void 0&&(_.performance+=y.performance,_.performanceCount+=1),y.engagement!==null&&y.engagement!==void 0&&(_.engagement+=y.engagement,_.engagementCount+=1),y.fatigue!==null&&y.fatigue!==void 0&&(_.fatigue+=y.fatigue,_.fatigueCount+=1)}),Array.from(T.values()).map(y=>({...y,effort:Math.round(y.effort/y.count*10)/10,rpe:y.rpeCount?Math.round(y.rpe/y.rpeCount*10)/10:null,performance:y.performanceCount?Math.round(y.performance/y.performanceCount*10)/10:null,engagement:y.engagementCount?Math.round(y.engagement/y.engagementCount*10)/10:null,fatigue:y.fatigueCount?Math.round(y.fatigue/y.fatigueCount*10)/10:null}))},je=S?S.filter(i=>new Date(i.date)>=re(new Date,h)):[],Ae=je.length,M=je.reduce((i,d)=>(i.distance+=d.distance,i.duration+=d.duration,d.rpe!==null&&d.rpe!==void 0&&(i.rpeSum+=d.rpe,i.rpeCount+=1),d.performance!==null&&d.performance!==void 0&&(i.performanceSum+=d.performance,i.performanceCount+=1),d.engagement!==null&&d.engagement!==void 0&&(i.engagementSum+=d.engagement,i.engagementCount+=1),d.fatigue!==null&&d.fatigue!==void 0&&(i.fatigueSum+=d.fatigue,i.fatigueCount+=1),i),{distance:0,duration:0,rpeSum:0,rpeCount:0,performanceSum:0,performanceCount:0,engagementSum:0,engagementCount:0,fatigueSum:0,fatigueCount:0}),Jt=M.rpeCount?M.rpeSum/M.rpeCount:null,Zt=M.performanceCount?M.performanceSum/M.performanceCount:null,Ut=M.engagementCount?M.engagementSum/M.engagementCount:null,en=M.fatigueCount?M.fatigueSum/M.fatigueCount:null,tn=Ae?M.duration/Ae:0,nn=Ae?M.distance/Ae:0,lt=Xt(h),rn=S?((i,d,N,T)=>{const y=new Date,v=re(y,N*2),_=re(y,N),W=d.filter(q=>{const V=new Date(q.date);return V>=v&&V<_}).reduce((q,V)=>q+(V.distance??0),0);return W===0?null:(i-W)/W*100})(M.distance,S,h):null,Ge=["NL","DOS","BR","PAP","QN"],ct={NL:"NL",DOS:"Dos",BR:"Brasse",PAP:"Pap",QN:"4N"},ut={NL:"hsl(210, 80%, 55%)",DOS:"hsl(160, 60%, 45%)",BR:"hsl(35, 85%, 55%)",PAP:"hsl(280, 60%, 55%)",QN:"hsl(340, 70%, 55%)"},_e=k.useMemo(()=>{if(!je.length)return{pie:[],daily:[],hasData:!1};const i={NL:0,DOS:0,BR:0,PAP:0,QN:0};let d=!1;const N=new Map;for(const v of je){const _=v.stroke_distances;if(!_)continue;const K=ue(new Date(v.date),"dd/MM");N.has(K)||N.set(K,{NL:0,DOS:0,BR:0,PAP:0,QN:0});const W=N.get(K);for(const q of Ge){const V=_[q];V&&V>0&&(i[q]+=V,W[q]+=V,d=!0)}}const T=Ge.filter(v=>i[v]>0).map(v=>({name:ct[v],value:i[v],fill:ut[v]})),y=Array.from(N.entries()).map(([v,_])=>({date:v,..._}));return{pie:T,daily:y,hasData:d}},[je]),Ye=i=>{const N=(Array.isArray(i?.logs)?i.logs:[]).map(v=>v?.rpe!==null&&v?.rpe!==void 0?Number(v.rpe):null).filter(v=>v!==null&&Number.isFinite(v));if(N.length>0)return N.reduce((v,_)=>v+_,0)/N.length;const T=i?.feeling??i?.rpe??null,y=T!=null?Number(T):null;return y!==null&&Number.isFinite(y)?y:null},an=i=>i==null||Number.isNaN(i)?"-":i.toFixed(1),dt=[...We].sort((i,d)=>{const N=new Date(i.started_at||i.date||i.created_at||0).getTime(),T=new Date(d.started_at||d.date||d.created_at||0).getTime();return N-T}).map(i=>({date:ue(new Date(i.started_at||i.date||i.created_at||new Date),"dd/MM"),feeling:Ye(i)})),mt=be.map(i=>({date:i.period,label:ue(new Date(i.period),"dd/MM"),tonnage:Math.round(i.tonnage??0),volume:Math.round(i.volume??0)})),sn=be.reduce((i,d)=>i+(d.tonnage??0),0),on=be.reduce((i,d)=>i+(d.volume??0),0),ln=We.length,Qe=We.map(i=>Ye(i)).filter(i=>i!==null&&Number.isFinite(i)),Ce=Qe.length?Qe.reduce((i,d)=>i+d,0)/Qe.length:null,Xe=[...Yt].map(i=>({exerciseId:Number(i.exercise_id),name:i.exercise_name||`Exercice ${i.exercise_id}`,totalSets:Number(i.total_sets??0),totalReps:Number(i.total_reps??0),totalVolume:Number(i.total_volume??0),maxWeight:i.max_weight!==null&&i.max_weight!==void 0?Number(i.max_weight):null,lastPerformedAt:i.last_performed_at??null})).sort((i,d)=>d.totalVolume-i.totalVolume),cn=(()=>{if(!be.length)return null;const i=be.reduce((N,T)=>N+(T.tonnage??0),0),d=Qt.reduce((N,T)=>N+(T.tonnage??0),0);return d===0?null:(i-d)/d*100})(),pt=Xe.slice(0,8),un=i=>{if(!i)return"-";const d=new Date(i);return Number.isNaN(d.getTime())?"-":ue(d,"dd/MM/yyyy")};return a.jsxs("div",{className:"space-y-4 pb-4",children:[a.jsx("div",{className:"sticky top-0 z-overlay -mx-4 backdrop-blur-md bg-background/90 border-b border-primary/15",children:a.jsxs("div",{className:"px-4 py-2.5 flex items-center gap-2.5",children:[a.jsx("div",{className:"flex items-center justify-center h-7 w-7 rounded-lg bg-primary text-primary-foreground",children:a.jsx(zn,{className:"h-3.5 w-3.5"})}),a.jsx("h1",{className:"text-lg font-display font-bold uppercase italic tracking-tight text-primary",children:"Progression"})]})}),F&&qe!=null&&a.jsx(ae.div,{variants:fe,initial:"hidden",animate:"visible",children:a.jsxs("div",{className:"rounded-xl border border-amber-200 bg-amber-50 dark:border-amber-900/30 dark:bg-amber-950/20 p-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(hn,{className:"h-4 w-4 text-amber-500"}),a.jsx("span",{className:"text-sm font-semibold truncate",children:F.name}),a.jsx("span",{className:"text-xs text-amber-600 dark:text-amber-400 font-bold ml-auto shrink-0",children:qe===0?"Aujourd'hui":`J-${qe}`})]}),(F.location||le!=null&&le>0)&&a.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[F.location&&a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:F.location}),le!=null&&le>0&&a.jsxs("span",{className:"text-xs text-amber-600 dark:text-amber-400 font-medium ml-auto shrink-0",children:[le," séance",le>1?"s":""," d'ici là"]})]})]})}),a.jsxs(jn,{defaultValue:"swim",className:"w-full",children:[a.jsxs(An,{className:"grid w-full max-w-[280px] grid-cols-2",children:[a.jsx(yt,{value:"swim",children:"Natation"}),a.jsx(yt,{value:"strength",children:"Musculation"})]}),a.jsxs(gt,{value:"swim",className:"space-y-4 mt-4",children:[a.jsx("div",{className:"flex justify-end",children:a.jsxs(xt,{type:"single",size:"sm",variant:"outline",value:String(h),onValueChange:i=>i&&g(Number(i)),className:"gap-1",children:[a.jsx(ce,{value:"7",className:"h-8 px-3 text-xs",children:"7j"}),a.jsx(ce,{value:"30",className:"h-8 px-3 text-xs",children:"30j"}),a.jsx(ce,{value:"365",className:"h-8 px-3 text-xs",children:"1 an"})]})}),a.jsx(Ot,{value:M.distance.toLocaleString(),unit:"m",label:`volume sur ${h} jours`,trend:rn,trendLabel:"vs période préc."}),a.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[a.jsx(pe,{value:`${Ae} séances`}),a.jsx(pe,{value:`${Math.round(nn).toLocaleString()}m moy`}),a.jsx(pe,{value:`${Math.round(tn)}min moy`})]}),a.jsx(ae.div,{variants:fe,initial:"hidden",animate:"visible",children:a.jsx(ft,{className:"border-0 shadow-none bg-transparent",children:a.jsx(ht,{className:"p-0 h-[140px] w-full",children:E?a.jsx(Ue,{}):lt.length===0?a.jsx("div",{className:"flex h-full items-center justify-center text-sm text-muted-foreground",children:"Aucune donnée disponible."}):a.jsx(de,{width:"100%",height:"100%",children:a.jsxs(Nt,{data:lt,children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"swimVolumeGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),a.jsx("stop",{offset:"100%",stopColor:"hsl(var(--primary))",stopOpacity:0})]})}),a.jsx(ie,{dataKey:"date",fontSize:10,tickLine:!1,axisLine:!1}),a.jsx(me,{contentStyle:$e,formatter:i=>[`${i.toLocaleString()}m`,"Volume"]}),a.jsx(X,{type:"monotone",dataKey:"distance",stroke:"hsl(var(--primary))",strokeWidth:2,fill:"url(#swimVolumeGradient)",dot:!1,activeDot:{r:5,strokeWidth:2}})]})})})})}),a.jsxs(ae.div,{className:"space-y-3",variants:fe,initial:"hidden",animate:"visible",children:[a.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Ressentis moyens"}),a.jsx(ke,{label:"Difficulté",value:Jt,max:5,invert:!0}),a.jsx(ke,{label:"Performance",value:Zt,max:5}),a.jsx(ke,{label:"Engagement",value:Ut,max:5}),a.jsx(ke,{label:"Fatigue",value:en,max:5,invert:!0})]}),_e.hasData&&a.jsx(et,{title:`Répartition par nage (${h}j)`,children:a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsx("div",{className:"h-[280px] w-full",children:a.jsx(de,{width:"100%",height:"100%",children:a.jsxs(Mn,{children:[a.jsx(Rn,{data:_e.pie,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:90,label:({name:i,percent:d})=>`${i} ${(d*100).toFixed(0)}%`,children:_e.pie.map((i,d)=>a.jsx($t,{fill:i.fill},`pie-${d}`))}),a.jsx(me,{formatter:i=>[`${i.toLocaleString()}m`,"Distance"]}),a.jsx(bt,{})]})})}),a.jsx("div",{className:"h-[280px] w-full",children:a.jsx(de,{width:"100%",height:"100%",children:a.jsxs(jt,{data:_e.daily,children:[a.jsx(ie,{dataKey:"date",fontSize:10,tickLine:!1,axisLine:!1}),a.jsx(Se,{fontSize:10,tickLine:!1,axisLine:!1}),a.jsx(me,{}),Ge.map(i=>a.jsx(Me,{dataKey:i,stackId:"strokes",name:ct[i],fill:ut[i],radius:0},i)),a.jsx(bt,{})]})})})]})})]}),a.jsxs(gt,{value:"strength",className:"space-y-4 mt-4",children:[a.jsx("div",{className:"flex justify-end",children:a.jsxs(xt,{type:"single",size:"sm",variant:"outline",value:String(x),onValueChange:i=>i&&D(Number(i)),className:"gap-1",children:[a.jsx(ce,{value:"7",className:"h-8 px-3 text-xs",children:"7j"}),a.jsx(ce,{value:"30",className:"h-8 px-3 text-xs",children:"30j"}),a.jsx(ce,{value:"365",className:"h-8 px-3 text-xs",children:"1 an"})]})}),a.jsx(Ot,{value:Math.round(sn).toLocaleString(),unit:"kg",label:`tonnage sur ${x} jours`,trend:cn,trendLabel:"vs période préc."}),a.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[a.jsx(pe,{value:`${ln} séances`}),a.jsx(pe,{value:`${Math.round(on).toLocaleString()} reps`}),a.jsx(pe,{value:`RPE ${Ce!==null?Ce.toFixed(1):"-"}/10`,colored:!0,colorValue:Ce!==null?Ce/2:null,invert:!0})]}),a.jsx(ae.div,{variants:fe,initial:"hidden",animate:"visible",children:a.jsx(ft,{className:"border-0 shadow-none bg-transparent",children:a.jsx(ht,{className:"p-0 h-[140px] w-full",children:st?a.jsx(Ue,{}):mt.length===0?a.jsx("div",{className:"flex h-full items-center justify-center text-sm text-muted-foreground",children:"Aucune donnée disponible."}):a.jsx(de,{width:"100%",height:"100%",children:a.jsxs(gr,{data:mt,children:[a.jsx(ie,{dataKey:"label",fontSize:10,tickLine:!1,axisLine:!1}),a.jsx(me,{contentStyle:$e}),a.jsx(Me,{dataKey:"tonnage",name:"Tonnage (kg)",fill:"hsl(var(--primary))",radius:[4,4,0,0],opacity:.7}),a.jsx(Rt,{type:"monotone",dataKey:"volume",name:"Volume (reps)",stroke:"hsl(var(--accent))",strokeWidth:2,dot:!1})]})})})})}),a.jsxs(ae.div,{variants:fe,initial:"hidden",animate:"visible",children:[a.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3",children:"Ressenti par séance"}),a.jsx("div",{className:"h-[130px] w-full",children:st?a.jsx(Ue,{}):dt.length===0?a.jsx("div",{className:"flex h-full items-center justify-center text-sm text-muted-foreground",children:"Aucune donnée disponible."}):a.jsx(de,{width:"100%",height:"100%",children:a.jsxs(Nt,{data:dt,children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"strengthFeelingGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"hsl(var(--foreground))",stopOpacity:.15}),a.jsx("stop",{offset:"100%",stopColor:"hsl(var(--foreground))",stopOpacity:0})]})}),a.jsx(ie,{dataKey:"date",fontSize:10,tickLine:!1,axisLine:!1}),a.jsx(Se,{domain:[0,10],hide:!0}),a.jsx(me,{contentStyle:$e,formatter:i=>[i!==null?i.toFixed(1):"-","RPE"]}),a.jsx(X,{type:"monotone",dataKey:"feeling",stroke:"hsl(var(--foreground))",strokeWidth:2,fill:"url(#strengthFeelingGradient)",dot:{r:4,fill:"hsl(var(--background))",stroke:"hsl(var(--foreground))",strokeWidth:2},activeDot:{r:6}})]})})})]}),a.jsx(et,{title:"Détail par exercice",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"h-[220px] w-full",children:pt.length===0?a.jsx("div",{className:"flex h-full items-center justify-center text-sm text-muted-foreground",children:"Aucun exercice enregistré."}):a.jsx(de,{width:"100%",height:"100%",children:a.jsxs(jt,{data:pt,layout:"vertical",children:[a.jsx(ie,{type:"number",fontSize:10,tickLine:!1,axisLine:!1}),a.jsx(Se,{type:"category",dataKey:"name",fontSize:10,tickLine:!1,axisLine:!1,width:100}),a.jsx(me,{contentStyle:$e,formatter:i=>[`${i.toLocaleString()} kg`,"Volume"]}),a.jsx(Me,{dataKey:"totalVolume",fill:"hsl(var(--primary))",radius:[0,4,4,0]})]})})}),a.jsx("div",{className:"w-full overflow-x-auto",children:a.jsxs(xn,{children:[a.jsx(vn,{children:a.jsxs(Je,{children:[a.jsx(Ee,{children:"Exercice"}),a.jsx(Ee,{className:"text-right",children:"Volume"}),a.jsx(Ee,{className:"text-right",children:"Max"}),a.jsx(Ee,{className:"text-right",children:"Dernier"})]})}),a.jsx(bn,{children:Xe.length===0?a.jsx(Je,{children:a.jsx(we,{colSpan:4,className:"text-center text-sm text-muted-foreground",children:"Aucun exercice enregistré."})}):Xe.map(i=>a.jsxs(Je,{children:[a.jsx(we,{className:"font-medium text-sm",children:i.name}),a.jsxs(we,{className:"text-right font-mono text-sm",children:[i.totalVolume.toLocaleString()," kg"]}),a.jsx(we,{className:"text-right font-mono text-sm",children:i.maxWeight!==null?Nn(i.maxWeight)?"PDC":`${i.maxWeight} kg`:"-"}),a.jsx(we,{className:"text-right text-xs text-muted-foreground",children:un(i.lastPerformedAt)})]},i.exerciseId))})]})})]})}),a.jsx(et,{title:"Historique récent",children:a.jsxs("div",{className:"space-y-3",children:[$.length===0&&a.jsx("div",{className:"text-center text-sm text-muted-foreground py-6",children:"Aucun historique disponible."}),$.map(i=>a.jsxs("div",{className:"flex items-center justify-between border-b border-border/40 pb-2 last:border-b-0 last:pb-0",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold",children:ue(new Date(i.started_at||i.date||i.created_at||new Date),"dd/MM/yyyy")}),a.jsx("div",{className:"text-xs text-muted-foreground",children:i.status||"Séance"})]}),a.jsxs("div",{className:"text-sm font-mono font-semibold",children:[an(Ye(i)),"/10"]})]},i.id)),C.hasNextPage&&a.jsx(yn,{variant:"outline",size:"sm",className:"w-full",onClick:()=>C.fetchNextPage(),disabled:C.isFetchingNextPage,children:C.isFetchingNextPage?"Chargement...":"Charger plus"})]})})]})]})]})}export{ke as ProgressBar,Vr as default};
