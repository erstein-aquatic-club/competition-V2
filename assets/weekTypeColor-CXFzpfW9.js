import{b as u,a as A,u as T,B as L}from"./index-pw1--tKS.js";import{r as c,u as $,j as e}from"./vendor-query-DyA9aSKS.js";import{a as _}from"./api-BgPjA6V4.js";import{C as D}from"./chart-column-VBZ0EF0o.js";import{C as E}from"./chevron-down-kSaXNmxm.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]],K=u("calendar-range",F);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],O=u("graduation-cap",I);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Q=u("send",R);function m(...r){return r.filter(Boolean).join(" ")}const q=[{key:"effort",label:"Diff.",mode:"hard"},{key:"feeling",label:"Fat.",mode:"hard"},{key:"performance",label:"Perf",mode:"good"},{key:"engagement",label:"Eng.",mode:"good"}];function z(r,a){const o=Number(a);if(!Number.isFinite(o)||o<1||o>5)return"bg-muted text-muted-foreground";const n=r==="hard"?6-o:o;return n>=4?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400":n>=3?"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}function J({athleteId:r,athleteName:a,onOpenProgression:o,showProgressAction:n=!0}){const[,b]=A(),{setSelectedAthlete:g}=T(),[i,y]=c.useState(20),[k,j]=c.useState(null),[v,p]=c.useState(null),{data:l=[],isLoading:N}=$({queryKey:["sessions",r],queryFn:()=>_.getSessions(a,r)}),w=l.slice(0,i),C=l.length>i;if(N)return e.jsx("div",{className:"space-y-3",children:[1,2,3,4,5].map(t=>e.jsxs("div",{className:"rounded-2xl border bg-card p-3 animate-pulse motion-reduce:animate-none",children:[e.jsx("div",{className:"h-4 w-32 rounded bg-muted mb-2"}),e.jsx("div",{className:"h-3 w-full rounded bg-muted"})]},t))});if(l.length===0)return e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Aucun ressenti enregistre."});const M=()=>{if(o){o();return}g({id:r,name:a}),b("/progress")};return e.jsxs("div",{className:"space-y-2",children:[n?e.jsxs(L,{variant:"outline",size:"sm",className:"w-full text-xs gap-1.5",onClick:M,children:[e.jsx(D,{className:"h-3.5 w-3.5"}),"Voir l'analyse"]}):null,w.map(t=>{const s=k===t.id;return e.jsxs("button",{type:"button",onClick:()=>{p(null),j(s?null:t.id)},className:"w-full rounded-2xl border bg-card p-3 text-left hover:border-primary/20 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("span",{className:"text-sm font-semibold text-foreground",children:new Date(t.date).toLocaleDateString("fr-FR",{weekday:"short",day:"numeric",month:"short"})}),e.jsx("span",{className:"text-xs text-muted-foreground ml-1.5",children:t.slot})]}),e.jsx("div",{className:"flex items-center gap-1",children:q.map(d=>{const h=t[d.key],x=`${t.id}-${d.key}`,f=v===x;return e.jsxs("span",{className:"relative group",onClick:S=>{S.stopPropagation(),p(f?null:x)},children:[e.jsx("span",{className:m("inline-flex items-center justify-center h-6 w-6 rounded-lg text-[10px] font-bold cursor-pointer",z(d.mode,h)),children:h??"—"}),e.jsx("span",{className:m("absolute -top-7 left-1/2 -translate-x-1/2 rounded-md bg-foreground text-background px-1.5 py-0.5 text-[9px] font-semibold whitespace-nowrap pointer-events-none transition-opacity","opacity-0 group-hover:opacity-100",f&&"opacity-100"),children:d.label})]},d.key)})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-1.5",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:t.distance>0?`${t.distance}m`:"—"}),t.comments&&e.jsx(E,{className:m("h-3.5 w-3.5 text-muted-foreground transition-transform",s&&"rotate-180")})]}),s&&t.comments&&e.jsx("div",{className:"mt-2 pt-2 border-t border-border",children:e.jsx("p",{className:"text-xs text-foreground whitespace-pre-wrap",children:t.comments})})]},t.id)}),C&&e.jsxs("button",{type:"button",onClick:t=>{t.stopPropagation(),y(s=>s+20)},className:"w-full rounded-2xl border border-dashed border-border py-2 text-xs font-medium text-muted-foreground hover:bg-muted transition",children:["Charger plus (",l.length-i," restants)"]})]})}function U(r){let a=0;for(let n=0;n<r.length;n++)a=r.charCodeAt(n)+((a<<5)-a);return`hsl(${Math.abs(a)%360}, 70%, 85%)`}function W(r){let a=0;for(let n=0;n<r.length;n++)a=r.charCodeAt(n)+((a<<5)-a);return`hsl(${Math.abs(a)%360}, 60%, 30%)`}export{K as C,O as G,Q as S,U as a,J as b,W as w};
