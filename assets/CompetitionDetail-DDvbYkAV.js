import{r as v,u as S,d as _,j as e}from"./vendor-query-DyA9aSKS.js";import{b as je,d as A,P as L,L as F,I as be,B as Te,a0 as k,X as ye,$ as Re,a as Fe,l as De}from"./index-CKOp3laj.js";import{a as j}from"./api-DH3S2bDc.js";import{s as $e,S as Ee,e as D,F as Me}from"./objectiveHelpers-DC7i01Ud.js";import{T as qe,a as Ae,b as H,c as z}from"./tabs-DTT2IT_8.js";import{B as Le}from"./badge-CUY68dk4.js";import{S as Y,a as J,b as V,c as U,d as W}from"./sheet-Cn2eTIxn.js";import{S as Ke,a as Pe,b as Qe,c as Be,d as Ie}from"./select-D1b_6E6w.js";import{A as se,a as re,b as ne,c as ae,d as ie,e as le,f as oe,g as ce,h as Ne}from"./alert-dialog-Dq5B--PU.js";import{T as Oe}from"./textarea-u5PN2VnV.js";import{T as te}from"./trophy-DfrB0oOG.js";import{C as de}from"./clock-BVe1tolP.js";import{P as He}from"./pencil-Ig7VrKD1.js";import{T as ue}from"./trash-2-BQv-XUf6.js";import{C as ze}from"./checkbox-DKY9-mYV.js";import{R as me}from"./repeat-u07ZwClK.js";import{A as ge}from"./arrow-left-DenKjfV1.js";import{M as Ye}from"./map-pin-DkEZPo4r.js";import{T as Je}from"./timer-BoXPdI2s.js";import"./vendor-react-BzrpNAyj.js";import"./vendor-charts-BrQ8X25f.js";import"./vendor-supabase-DFPLkPj_.js";import"./vendor-motion-lao-Njgm.js";import"./swim-DtScx2FQ.js";import"./index-CT7pRBuX.js";import"./index-DUMkj-cL.js";import"./index-CDTWfNF6.js";import"./index-DdZuhBjQ.js";import"./index-DCX2sNhR.js";import"./chevron-down-CvY7q17H.js";import"./chevron-up-BIy5Ncdb.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]],we=je("list-checks",Ve);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],ve=je("star",Ue),We=["A","B","C","D"];function Xe(s,n){const d=[],o=new Date(s+"T00:00:00"),p=n?new Date(n+"T00:00:00"):o;for(;o<=p;){const u=o.getFullYear(),a=String(o.getMonth()+1).padStart(2,"0"),f=String(o.getDate()).padStart(2,"0");d.push(`${u}-${a}-${f}`),o.setDate(o.getDate()+1)}return d}function G(s){return new Date(s+"T00:00:00").toLocaleDateString("fr-FR",{weekday:"short",day:"numeric",month:"short"})}function Ge(s){const[n,d]=s.split(":");return`${n}h${d}`}function Z(s){return s.race_type==="finale"?s.final_letter?`Finale ${s.final_letter}`:"Finale":null}function Ze({competitionId:s,competitionDate:n,competitionEndDate:d}){const{toast:o}=A(),[p,u]=v.useState(!1),[a,f]=v.useState(null),[g,w]=v.useState(null),[y,N]=v.useState(""),[t,i]=v.useState(n),[c,h]=v.useState(""),[m,b]=v.useState(""),[l,x]=v.useState("series"),[C,T]=v.useState(""),[$,R]=v.useState(""),K=Xe(n,d),{data:M=[],isLoading:X}=S({queryKey:["competition-races",s],queryFn:()=>j.getCompetitionRaces(s)}),P=()=>k.invalidateQueries({queryKey:["competition-races",s]}),Q=_({mutationFn:r=>j.createCompetitionRace(r),onSuccess:()=>{P(),o({title:"Course ajoutÃ©e"}),xe()},onError:r=>o({title:"Erreur",description:r.message,variant:"destructive"})}),B=_({mutationFn:({id:r,input:E})=>j.updateCompetitionRace(r,E),onSuccess:()=>{P(),o({title:"Course modifiÃ©e"}),xe()},onError:r=>o({title:"Erreur",description:r.message,variant:"destructive"})}),I=_({mutationFn:r=>j.deleteCompetitionRace(r),onSuccess:()=>{P(),o({title:"Course supprimÃ©e"}),w(null)},onError:r=>o({title:"Erreur",description:r.message,variant:"destructive"})});function q(){N(""),i(n),h(""),b(""),x("series"),T(""),R("")}function O(){f(null),q(),u(!0)}function ke(r){f(r),N(r.event_code),i(r.race_day),h(r.start_time??""),b(r.notes??""),x(r.race_type||"series"),T(r.final_letter??""),R(r.lane!=null?String(r.lane):""),u(!0)}function Ce(r){f(null),N(r.event_code),i(r.race_day),h(""),b(""),x("finale"),T("A"),R(""),u(!0)}function xe(){u(!1),f(null)}function Se(){if(!y)return;const r={competition_id:s,event_code:y,race_day:t,start_time:c||null,notes:m.trim()||null,race_type:l,final_letter:l==="finale"&&C?C:null,lane:$?parseInt($,10):null};a?B.mutate({id:a.id,input:r}):Q.mutate(r)}const pe=Q.isPending||B.isPending;return X?e.jsx("div",{className:"space-y-3",children:[1,2].map(r=>e.jsx("div",{className:"h-20 rounded-2xl bg-muted/40 animate-pulse"},r))}):e.jsxs(e.Fragment,{children:[M.length===0?e.jsxs("button",{type:"button",onClick:O,className:"w-full rounded-3xl border-2 border-dashed border-amber-300/50 bg-amber-500/5 p-6 text-center transition hover:border-amber-400/70 hover:bg-amber-500/10",children:[e.jsx(te,{className:"mx-auto h-8 w-8 text-amber-500/60"}),e.jsx("p",{className:"mt-3 text-sm font-semibold text-foreground",children:"Ajoute tes courses"}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Configure tes Ã©preuves pour cette compÃ©tition"})]}):e.jsxs("div",{className:"space-y-2.5",children:[M.map(r=>{const E=r.race_type==="finale",he=$e(r.event_code),_e=he?Ee[he]:"border-l-amber-500",fe=Z(r);return e.jsxs("div",{className:`rounded-2xl border px-3 py-3 border-l-[3px] ${E?"border-l-yellow-500 border-yellow-500/40 bg-gradient-to-r from-yellow-500/[0.07] to-amber-500/[0.03]":`bg-card ${_e}`}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[E&&e.jsx(ve,{className:"h-3.5 w-3.5 shrink-0 fill-yellow-500 text-yellow-500"}),e.jsx("p",{className:"text-sm font-semibold truncate",children:D(r.event_code)}),fe&&e.jsx("span",{className:`shrink-0 rounded-md px-1.5 py-0.5 text-[10px] font-bold ${E?"bg-yellow-500/15 text-yellow-700 dark:text-yellow-300":"bg-orange-500/10 text-orange-600 dark:text-orange-400"}`,children:fe})]}),e.jsxs("div",{className:"mt-1 flex items-center gap-3 text-xs text-muted-foreground",children:[e.jsx("span",{children:G(r.race_day)}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(de,{className:"h-3 w-3"}),r.start_time?Ge(r.start_time):"Heure Ã  dÃ©finir"]}),r.lane!=null&&e.jsxs("span",{children:["Ligne ",r.lane]})]}),r.notes&&e.jsx("p",{className:"mt-1.5 text-xs text-muted-foreground/80 line-clamp-1",children:r.notes})]}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[e.jsx("button",{type:"button",onClick:()=>ke(r),className:"h-8 w-8 flex items-center justify-center rounded-lg text-muted-foreground hover:text-foreground hover:bg-muted transition","aria-label":"Modifier",children:e.jsx(He,{className:"h-3.5 w-3.5"})}),e.jsx("button",{type:"button",onClick:()=>w(r),className:"h-8 w-8 flex items-center justify-center rounded-lg text-muted-foreground hover:text-red-500 hover:bg-red-500/10 transition","aria-label":"Supprimer",children:e.jsx(ue,{className:"h-3.5 w-3.5"})})]})]}),!E&&e.jsxs("button",{type:"button",onClick:()=>Ce(r),className:"mt-2 flex w-full items-center justify-center gap-1.5 rounded-xl border border-yellow-500/30 bg-yellow-500/[0.06] py-1.5 text-[11px] font-semibold text-yellow-700 dark:text-yellow-300 transition hover:bg-yellow-500/15 hover:border-yellow-500/50 active:scale-[0.98]",children:[e.jsx(ve,{className:"h-3 w-3 fill-yellow-500 text-yellow-500"}),"QualifiÃ© en finale"]})]},r.id)}),e.jsxs("button",{type:"button",onClick:O,className:"flex w-full items-center justify-center gap-2 rounded-2xl border border-dashed border-amber-300/50 bg-amber-500/5 px-3 py-3 text-xs font-medium text-amber-600 dark:text-amber-400 transition hover:border-amber-400/70 hover:bg-amber-500/10",children:[e.jsx(L,{className:"h-4 w-4"}),"Ajouter une course"]})]}),e.jsx(Y,{open:p,onOpenChange:u,children:e.jsxs(J,{side:"right",className:"w-full sm:max-w-md overflow-y-auto",children:[e.jsxs(V,{children:[e.jsx(U,{children:a?"Modifier la course":"Ajouter une course"}),e.jsx(W,{children:a?"Modifie les dÃ©tails de cette Ã©preuve.":"Choisis ton Ã©preuve et renseigne les dÃ©tails."})]}),e.jsxs("div",{className:"mt-6 space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{className:"text-[11px] font-semibold uppercase tracking-wider text-muted-foreground",children:"Ã‰preuve"}),e.jsxs(Ke,{value:y,onValueChange:N,children:[e.jsx(Pe,{className:"rounded-xl",children:e.jsx(Qe,{placeholder:"Choisis une Ã©preuve"})}),e.jsx(Be,{children:Me.map(r=>e.jsx(Ie,{value:r,children:D(r)},r))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{className:"text-[11px] font-semibold uppercase tracking-wider text-muted-foreground",children:"Type"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>x("series"),className:`flex-1 rounded-xl border px-3 py-2 text-sm font-medium transition ${l==="series"?"border-amber-500 bg-amber-500/10 text-amber-700 dark:text-amber-300":"border-border bg-card text-muted-foreground hover:bg-muted"}`,children:"SÃ©rie"}),e.jsx("button",{type:"button",onClick:()=>x("finale"),className:`flex-1 rounded-xl border px-3 py-2 text-sm font-medium transition ${l==="finale"?"border-orange-500 bg-orange-500/10 text-orange-700 dark:text-orange-300":"border-border bg-card text-muted-foreground hover:bg-muted"}`,children:"Finale"})]})]}),l==="finale"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{className:"text-[11px] font-semibold uppercase tracking-wider text-muted-foreground",children:"Lettre de finale"}),e.jsx("div",{className:"flex gap-2",children:We.map(r=>e.jsx("button",{type:"button",onClick:()=>T(r),className:`h-10 w-10 rounded-xl border text-sm font-semibold transition ${C===r?"border-orange-500 bg-orange-500/10 text-orange-700 dark:text-orange-300":"border-border bg-card text-muted-foreground hover:bg-muted"}`,children:r},r))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{className:"text-[11px] font-semibold uppercase tracking-wider text-muted-foreground",children:"Jour"}),e.jsx("select",{value:t,onChange:r=>i(r.target.value),className:"flex h-10 w-full rounded-xl border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",children:K.map(r=>e.jsx("option",{value:r,children:G(r)},r))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{className:"text-[11px] font-semibold uppercase tracking-wider text-muted-foreground",children:"Heure de passage"}),e.jsx(be,{type:"time",value:c,onChange:r=>h(r.target.value),className:"rounded-xl",placeholder:"Ex : 14:30"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{className:"text-[11px] font-semibold uppercase tracking-wider text-muted-foreground",children:"Ligne"}),e.jsx(be,{type:"number",min:1,max:10,value:$,onChange:r=>R(r.target.value),className:"rounded-xl",placeholder:"Ex : 4"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{className:"text-[11px] font-semibold uppercase tracking-wider text-muted-foreground",children:"Notes"}),e.jsx(Oe,{value:m,onChange:r=>b(r.target.value),className:"rounded-xl resize-none",rows:3,placeholder:"Remarques..."})]}),e.jsx(Te,{onClick:Se,disabled:!y||pe,className:"w-full rounded-xl bg-amber-500 hover:bg-amber-600 text-white",children:pe?"Enregistrement...":a?"Enregistrer":"Ajouter"})]})]})}),e.jsx(se,{open:!!g,onOpenChange:r=>!r&&w(null),children:e.jsxs(re,{children:[e.jsxs(ne,{children:[e.jsx(ae,{children:"Supprimer cette course ?"}),e.jsx(ie,{children:g&&e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:D(g.event_code)})," ",Z(g)&&`(${Z(g)}) `,"du ",G(g.race_day)," sera supprimÃ©e. Cette action est irrÃ©versible."]})})]}),e.jsxs(le,{children:[e.jsx(oe,{children:"Annuler"}),e.jsx(ce,{onClick:()=>g&&I.mutate(g.id),className:"bg-red-500 hover:bg-red-600 text-white",children:I.isPending?"Suppression...":"Supprimer"})]})]})})]})}function et({competitionId:s}){const{toast:n}=A(),[d,o]=v.useState(!1),{data:p,isLoading:u}=S({queryKey:["competition-checklist",s],queryFn:()=>j.getCompetitionChecklist(s)}),{data:a=[],isLoading:f}=S({queryKey:["checklist-templates"],queryFn:()=>j.getChecklistTemplates()}),g=_({mutationFn:t=>j.applyChecklistTemplate(s,t),onSuccess:()=>{k.invalidateQueries({queryKey:["competition-checklist",s]}),n({title:"Checklist appliquee"})},onError:()=>n({title:"Erreur",description:"Impossible d'appliquer la checklist",variant:"destructive"})}),w=_({mutationFn:({checkId:t,checked:i})=>j.toggleChecklistCheck(t,i),onMutate:async({checkId:t,checked:i})=>{await k.cancelQueries({queryKey:["competition-checklist",s]});const c=k.getQueryData(["competition-checklist",s]);return c&&k.setQueryData(["competition-checklist",s],{...c,checks:c.checks.map(h=>h.id===t?{...h,checked:i,checked_at:i?new Date().toISOString():null}:h)}),{prev:c}},onError:(t,i,c)=>{c?.prev&&k.setQueryData(["competition-checklist",s],c.prev),n({title:"Erreur",variant:"destructive"})},onSettled:()=>k.invalidateQueries({queryKey:["competition-checklist",s]})}),y=_({mutationFn:t=>j.removeCompetitionChecklist(t),onSuccess:()=>{k.invalidateQueries({queryKey:["competition-checklist",s]}),n({title:"Checklist retirÃ©e"})},onError:()=>n({title:"Erreur",variant:"destructive"})}),N=_({mutationFn:t=>j.deleteChecklistTemplate(t),onSuccess:()=>{k.invalidateQueries({queryKey:["checklist-templates"]}),n({title:"Template supprime"})},onError:()=>n({title:"Erreur",variant:"destructive"})});if(u||f)return e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-violet-500 border-t-transparent"})});if(p){const i=a.find(x=>x.id===p.checklist.checklist_template_id)?.items??[],c=p.checks,h=c.length,m=c.filter(x=>x.checked).length,b=h>0?Math.round(m/h*100):0,l=new Map;for(const x of c)l.set(x.checklist_item_id,x);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"font-medium text-foreground",children:[m,"/",h]}),e.jsxs("span",{className:"text-muted-foreground",children:[b,"%"]})]}),e.jsx("div",{className:"h-2 w-full rounded-full bg-muted/30 overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full bg-violet-500 transition-all duration-300",style:{width:`${b}%`}})})]}),e.jsx("div",{className:"space-y-2",children:i.map(x=>{const C=l.get(x.id);return C?e.jsxs("label",{className:"flex items-center gap-3 rounded-2xl border bg-card px-3 py-2.5 cursor-pointer active:scale-[0.98] transition-transform",children:[e.jsx(ze,{checked:C.checked,onCheckedChange:T=>w.mutate({checkId:C.id,checked:!!T}),className:"data-[state=checked]:bg-violet-500 data-[state=checked]:border-violet-500"}),e.jsx("span",{className:C.checked?"text-sm text-muted-foreground line-through":"text-sm text-foreground",children:x.label})]},C.id):null})}),e.jsx("button",{type:"button",onClick:()=>y.mutate(p.checklist.id),disabled:y.isPending,className:"w-full text-center text-xs text-muted-foreground hover:text-foreground transition py-1",children:"Changer de checklist"})]})}return e.jsxs("div",{className:"space-y-4",children:[a.length===0?e.jsxs("div",{className:"rounded-3xl border border-dashed border-border bg-card/60 p-6 text-center",children:[e.jsx(we,{className:"mx-auto h-8 w-8 text-muted-foreground/40"}),e.jsx("p",{className:"mt-3 text-sm font-medium",children:"Aucun template"}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Cree ton premier template de checklist"})]}):e.jsx("div",{className:"space-y-2",children:a.map(t=>e.jsxs("div",{className:"flex items-center justify-between rounded-2xl border bg-card px-3 py-2.5",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:t.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.items?.length??0," items"]})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx("button",{type:"button",onClick:()=>g.mutate(t.id),disabled:g.isPending,className:"rounded-xl bg-violet-500/10 px-3 py-1.5 text-xs font-medium text-violet-700 dark:text-violet-300 hover:bg-violet-500/20 transition",children:"Appliquer"}),e.jsx(st,{templateId:t.id,onConfirm:()=>N.mutate(t.id)})]})]},t.id))}),e.jsxs("button",{type:"button",onClick:()=>o(!0),className:"flex w-full items-center justify-center gap-2 rounded-2xl border border-dashed border-violet-500/30 bg-violet-500/5 px-3 py-3 text-xs font-medium text-violet-700 dark:text-violet-300 hover:bg-violet-500/10 transition",children:[e.jsx(L,{className:"h-3.5 w-3.5"}),"Creer un template"]}),e.jsx(tt,{open:d,onOpenChange:o})]})}function tt({open:s,onOpenChange:n}){const{toast:d}=A(),[o,p]=v.useState(""),[u,a]=v.useState([""]),f=_({mutationFn:({n:t,its:i})=>j.createChecklistTemplate(t,i),onSuccess:()=>{k.invalidateQueries({queryKey:["checklist-templates"]}),d({title:"Template cree"}),p(""),a([""]),n(!1)},onError:()=>d({title:"Erreur",variant:"destructive"})});function g(){a(t=>[...t,""])}function w(t){a(i=>i.filter((c,h)=>h!==t))}function y(t,i){a(c=>c.map((h,m)=>m===t?i:h))}function N(){const t=o.trim();if(!t)return;const i=u.map(c=>c.trim()).filter(Boolean).map((c,h)=>({label:c,sort_order:h}));f.mutate({n:t,its:i})}return e.jsx(Y,{open:s,onOpenChange:n,children:e.jsxs(J,{side:"right",className:"flex flex-col overflow-y-auto",children:[e.jsxs(V,{children:[e.jsx(U,{children:"Nouveau template"}),e.jsx(W,{children:"Cree une checklist rÃ©utilisable pour tes compÃ©titions."})]}),e.jsxs("div",{className:"mt-4 flex-1 space-y-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Nom"}),e.jsx("input",{type:"text",value:o,onChange:t=>p(t.target.value),placeholder:"Ex : Sac de compet",className:"w-full rounded-xl border bg-background px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-violet-500/40"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Items"}),e.jsx("div",{className:"space-y-2",children:u.map((t,i)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:t,onChange:c=>y(i,c.target.value),placeholder:`Item ${i+1}`,className:"flex-1 rounded-xl border bg-background px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-violet-500/40"}),u.length>1&&e.jsx("button",{type:"button",onClick:()=>w(i),className:"h-8 w-8 rounded-lg flex items-center justify-center text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition",children:e.jsx(ye,{className:"h-3.5 w-3.5"})})]},i))}),e.jsxs("button",{type:"button",onClick:g,className:"flex items-center gap-1.5 text-xs text-violet-600 dark:text-violet-400 hover:underline mt-1",children:[e.jsx(L,{className:"h-3 w-3"}),"Ajouter un item"]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsx("button",{type:"button",onClick:N,disabled:!o.trim()||f.isPending,className:"w-full rounded-xl bg-violet-500 px-4 py-2.5 text-sm font-medium text-white hover:bg-violet-600 disabled:opacity-50 transition",children:f.isPending?"Sauvegarde...":"Sauvegarder"})})]})})}function st({templateId:s,onConfirm:n}){return e.jsxs(se,{children:[e.jsx(Ne,{asChild:!0,children:e.jsx("button",{type:"button",className:"h-8 w-8 rounded-lg flex items-center justify-center text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition",children:e.jsx(ue,{className:"h-3.5 w-3.5"})})}),e.jsxs(re,{children:[e.jsxs(ne,{children:[e.jsx(ae,{children:"Supprimer le template ?"}),e.jsx(ie,{children:"Cette action est irrÃ©versible. Le template et ses items seront dÃ©finitivement supprimÃ©s."})]}),e.jsxs(le,{children:[e.jsx(oe,{children:"Annuler"}),e.jsx(ce,{onClick:n,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Supprimer"})]})]})]})}function rt(s){return new Date(s+"T00:00:00").toLocaleDateString("fr-FR",{weekday:"short",day:"numeric",month:"short"})}function nt(s){const[n,d]=s.split(":");return`${n}h${d}`}function at(s){return s===0?"0min":`${s<0?"-":"+"}${Math.abs(s)}min`}function it({competitionId:s}){const{toast:n}=A(),[d,o]=v.useState(null),[p,u]=v.useState(!1),{data:a=[],isLoading:f}=S({queryKey:["competition-races",s],queryFn:()=>j.getCompetitionRaces(s)}),{data:g=[],isLoading:w}=S({queryKey:["race-routines",s],queryFn:()=>j.getRaceRoutines(s)}),{data:y=[],isLoading:N}=S({queryKey:["routine-templates"],queryFn:()=>j.getRoutineTemplates()}),t=v.useMemo(()=>{const l=new Map;for(const x of g)l.set(x.race_id,x.routine_id);return l},[g]),i=v.useMemo(()=>{const l=new Map;for(const x of y)l.set(x.id,x);return l},[y]),c=()=>{k.invalidateQueries({queryKey:["race-routines",s]}),k.invalidateQueries({queryKey:["routine-templates"]})},h=_({mutationFn:({raceId:l,routineId:x})=>j.setRaceRoutine(l,x),onSuccess:()=>{c(),n({title:"Routine assignee"}),o(null)},onError:l=>n({title:"Erreur",description:l.message,variant:"destructive"})}),m=_({mutationFn:l=>j.removeRaceRoutine(l),onSuccess:()=>{c(),n({title:"Routine retiree"})},onError:l=>n({title:"Erreur",description:l.message,variant:"destructive"})}),b=_({mutationFn:l=>j.deleteRoutineTemplate(l),onSuccess:()=>{k.invalidateQueries({queryKey:["routine-templates"]}),k.invalidateQueries({queryKey:["race-routines",s]}),n({title:"Template supprime"})},onError:()=>n({title:"Erreur",variant:"destructive"})});return f||w||N?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-blue-500 border-t-transparent"})}):a.length===0?e.jsxs("div",{className:"rounded-3xl border border-dashed border-border bg-card/60 p-6 text-center",children:[e.jsx(me,{className:"mx-auto h-8 w-8 text-muted-foreground/40"}),e.jsx("p",{className:"mt-3 text-sm font-medium",children:"Aucune course"}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Ajoute d'abord des courses dans l'onglet Courses"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-3",children:[a.map(l=>{const x=t.get(l.id),C=x?i.get(x):null;return e.jsx(lt,{race:l,template:C??null,onAssign:()=>o(l.id),onChange:()=>o(l.id),onRemove:()=>m.mutate(l.id),removing:m.isPending},l.id)}),e.jsxs("button",{type:"button",onClick:()=>u(!0),className:"flex w-full items-center justify-center gap-2 rounded-2xl border border-dashed border-blue-500/30 bg-blue-500/5 px-3 py-3 text-xs font-medium text-blue-700 dark:text-blue-300 hover:bg-blue-500/10 transition",children:[e.jsx(L,{className:"h-3.5 w-3.5"}),"Creer un template de routine"]})]}),e.jsx(Y,{open:!!d,onOpenChange:l=>!l&&o(null),children:e.jsxs(J,{side:"right",className:"flex flex-col overflow-y-auto",children:[e.jsxs(V,{children:[e.jsx(U,{children:"Choisir une routine"}),e.jsx(W,{children:"Selectionne un template de routine pour cette course."})]}),e.jsx("div",{className:"mt-4 flex-1 space-y-2",children:y.length===0?e.jsxs("div",{className:"rounded-2xl border border-dashed border-border bg-muted/30 p-4 text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Aucun template disponible"}),e.jsx("button",{type:"button",onClick:()=>{o(null),u(!0)},className:"mt-2 text-xs font-medium text-blue-600 dark:text-blue-400 hover:underline",children:"Creer un template"})]}):y.map(l=>e.jsxs("div",{className:"flex items-center justify-between rounded-2xl border bg-card px-3 py-2.5",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:l.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[l.steps?.length??0," etape",(l.steps?.length??0)!==1?"s":""]})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx("button",{type:"button",onClick:()=>{d&&h.mutate({raceId:d,routineId:l.id})},disabled:h.isPending,className:"rounded-xl bg-blue-500/10 px-3 py-1.5 text-xs font-medium text-blue-700 dark:text-blue-300 hover:bg-blue-500/20 transition",children:"Appliquer"}),e.jsx(ct,{onConfirm:()=>b.mutate(l.id)})]})]},l.id))})]})}),e.jsx(ot,{open:p,onOpenChange:u})]})}function lt({race:s,template:n,onAssign:d,onChange:o,onRemove:p,removing:u}){const a=n?.steps??[];return e.jsxs("div",{className:"rounded-2xl border bg-card overflow-hidden",children:[e.jsx("div",{className:"border-b border-border/60 px-3 py-2.5",children:e.jsx("div",{className:"flex items-center justify-between gap-2",children:e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm font-semibold truncate",children:D(s.event_code)}),s.race_type==="finale"&&e.jsx("span",{className:"shrink-0 rounded-md bg-orange-500/10 px-1.5 py-0.5 text-[10px] font-semibold text-orange-600 dark:text-orange-400",children:s.final_letter?`Finale ${s.final_letter}`:"Finale"})]}),e.jsxs("div",{className:"mt-0.5 flex items-center gap-3 text-xs text-muted-foreground",children:[e.jsx("span",{children:rt(s.race_day)}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(de,{className:"h-3 w-3"}),s.start_time?nt(s.start_time):"Heure Ã  dÃ©finir"]})]})]})})}),e.jsx("div",{className:"px-3 py-2.5",children:n?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(me,{className:"h-3.5 w-3.5 text-blue-500 shrink-0"}),e.jsx("span",{className:"text-sm font-medium truncate",children:n.name})]}),e.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[e.jsx("button",{type:"button",onClick:o,className:"rounded-lg bg-blue-500/10 px-2 py-1 text-[11px] font-medium text-blue-700 dark:text-blue-300 hover:bg-blue-500/20 transition",children:"Changer"}),e.jsx("button",{type:"button",onClick:p,disabled:u,className:"rounded-lg bg-red-500/10 px-2 py-1 text-[11px] font-medium text-red-600 dark:text-red-400 hover:bg-red-500/20 transition",children:"Retirer"})]})]}),a.length>0&&e.jsx("div",{className:"mt-2.5 space-y-1.5",children:a.map(f=>e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("span",{className:"rounded-lg bg-blue-500/10 text-blue-600 dark:text-blue-400 px-2 py-0.5 text-[11px] font-mono shrink-0",children:at(f.offset_minutes)}),e.jsx("span",{className:"text-xs text-foreground",children:f.label})]},f.id))})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Aucune routine"}),e.jsx("button",{type:"button",onClick:d,className:"rounded-xl bg-blue-500/10 px-3 py-1.5 text-xs font-medium text-blue-700 dark:text-blue-300 hover:bg-blue-500/20 transition",children:"Assigner"})]})})]})}function ot({open:s,onOpenChange:n}){const{toast:d}=A(),[o,p]=v.useState(""),[u,a]=v.useState([{offset:"-60",label:""}]),f=_({mutationFn:({n:t,s:i})=>j.createRoutineTemplate(t,i),onSuccess:()=>{k.invalidateQueries({queryKey:["routine-templates"]}),d({title:"Template cree"}),p(""),a([{offset:"-60",label:""}]),n(!1)},onError:()=>d({title:"Erreur",variant:"destructive"})});function g(){a(t=>[...t,{offset:"-30",label:""}])}function w(t){a(i=>i.filter((c,h)=>h!==t))}function y(t,i,c){a(h=>h.map((m,b)=>b===t?{...m,[i]:c}:m))}function N(){const t=o.trim();if(!t)return;const i=u.filter(c=>c.label.trim()).map((c,h)=>({offset_minutes:parseInt(c.offset,10)||0,label:c.label.trim(),sort_order:h}));f.mutate({n:t,s:i})}return e.jsx(Y,{open:s,onOpenChange:n,children:e.jsxs(J,{side:"right",className:"flex flex-col overflow-y-auto",children:[e.jsxs(V,{children:[e.jsx(U,{children:"Nouvelle routine"}),e.jsx(W,{children:"Cree un template de routine pre-course reutilisable."})]}),e.jsxs("div",{className:"mt-4 flex-1 space-y-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Nom"}),e.jsx("input",{type:"text",value:o,onChange:t=>p(t.target.value),placeholder:"Ex : Routine sprint",className:"w-full rounded-xl border bg-background px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500/40"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Etapes"}),e.jsx("div",{className:"space-y-2",children:u.map((t,i)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative w-20 shrink-0",children:[e.jsx("input",{type:"number",value:t.offset,onChange:c=>y(i,"offset",c.target.value),className:"w-full rounded-xl border bg-background pl-3 pr-8 py-2 text-sm text-center font-mono outline-none focus:ring-2 focus:ring-blue-500/40 appearance-none [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none",placeholder:"-60"}),e.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-[10px] text-muted-foreground pointer-events-none",children:"min"})]}),e.jsx("input",{type:"text",value:t.label,onChange:c=>y(i,"label",c.target.value),placeholder:"Ex : Echauffement sec",className:"flex-1 rounded-xl border bg-background px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500/40"}),u.length>1&&e.jsx("button",{type:"button",onClick:()=>w(i),className:"h-8 w-8 rounded-lg flex items-center justify-center text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition shrink-0",children:e.jsx(ye,{className:"h-3.5 w-3.5"})})]},i))}),e.jsxs("button",{type:"button",onClick:g,className:"flex items-center gap-1.5 text-xs text-blue-600 dark:text-blue-400 hover:underline mt-1",children:[e.jsx(L,{className:"h-3 w-3"}),"Ajouter une etape"]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsx("button",{type:"button",onClick:N,disabled:!o.trim()||f.isPending,className:"w-full rounded-xl bg-blue-500 px-4 py-2.5 text-sm font-medium text-white hover:bg-blue-600 disabled:opacity-50 transition",children:f.isPending?"Sauvegarde...":"Sauvegarder"})})]})})}function ct({onConfirm:s}){return e.jsxs(se,{children:[e.jsx(Ne,{asChild:!0,children:e.jsx("button",{type:"button",className:"h-8 w-8 rounded-lg flex items-center justify-center text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition",children:e.jsx(ue,{className:"h-3.5 w-3.5"})})}),e.jsxs(re,{children:[e.jsxs(ne,{children:[e.jsx(ae,{children:"Supprimer ce template ?"}),e.jsx(ie,{children:"Cette action est irreversible. Le template et ses etapes seront definitivement supprimes."})]}),e.jsxs(le,{children:[e.jsx(oe,{children:"Annuler"}),e.jsx(ce,{onClick:s,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Supprimer"})]})]})]})}function dt(s,n){const[d,o]=s.split(":").map(Number),p=d*60+o+n,u=Math.floor((p%1440+1440)%1440/60),a=(p%1440+1440)%1440%60;return`${String(u).padStart(2,"0")}:${String(a).padStart(2,"0")}`}function ut(s,n){const d=[],o=new Date(s+"T00:00:00"),p=n?new Date(n+"T00:00:00"):o,u=new Date(o);for(;u<=p;){const a=u.getFullYear(),f=String(u.getMonth()+1).padStart(2,"0"),g=String(u.getDate()).padStart(2,"0");d.push(`${a}-${f}-${g}`),u.setDate(u.getDate()+1)}return d}function mt(s){const n=new Date(s+"T00:00:00"),d=n.toLocaleDateString("fr-FR",{weekday:"short"});return`${d.charAt(0).toUpperCase()+d.slice(1)} ${n.getDate()}`}function xt({competitionId:s,competitionDate:n,competitionEndDate:d}){const o=v.useMemo(()=>ut(n,d),[n,d]),p=o.length>1,[u,a]=v.useState(o[0]),{data:f=[]}=S({queryKey:["competition-races",s],queryFn:()=>j.getCompetitionRaces(s)}),{data:g=[]}=S({queryKey:["race-routines",s],queryFn:()=>j.getRaceRoutines(s)}),{data:w=[]}=S({queryKey:["routine-templates"],queryFn:()=>j.getRoutineTemplates()}),{timed:y,untimed:N}=v.useMemo(()=>{const t=f.filter(m=>m.race_day===u),i=new Map;for(const m of g){const b=w.find(l=>l.id===m.routine_id);b&&i.set(m.race_id,b)}const c=[],h=[];for(const m of t){if(!m.start_time){h.push(m);continue}const b=m.race_type==="finale"?m.final_letter?` â€” Finale ${m.final_letter}`:" â€” Finale":"";c.push({time:m.start_time.slice(0,5),label:D(m.event_code)+b,type:"race",eventCode:m.event_code,isFinale:m.race_type==="finale"});const l=i.get(m.id);if(l?.steps)for(const x of l.steps)c.push({time:dt(m.start_time.slice(0,5),x.offset_minutes),label:x.label,type:"step"})}return c.sort((m,b)=>m.time.localeCompare(b.time)),{timed:c,untimed:h}},[f,g,w,u]);return f.length===0?e.jsxs("div",{className:"rounded-3xl border border-dashed border-border bg-card/60 p-6 text-center",children:[e.jsx(de,{className:"mx-auto h-8 w-8 text-muted-foreground/40"}),e.jsx("p",{className:"mt-3 text-sm font-medium text-muted-foreground",children:"Ajoute des courses et des routines pour voir ta timeline"})]}):e.jsxs("div",{className:"space-y-4",children:[p&&e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-none",children:o.map(t=>e.jsx("button",{type:"button",onClick:()=>a(t),className:`rounded-full border px-3 py-1.5 text-xs font-medium whitespace-nowrap transition ${t===u?"border-emerald-500 bg-emerald-500/10 text-emerald-700 dark:text-emerald-300":"border-border bg-card text-muted-foreground hover:bg-muted"}`,children:mt(t)},t))}),y.length>0&&e.jsx("div",{className:"relative ml-[44px] border-l-2 border-border",children:y.map((t,i)=>e.jsxs("div",{className:"relative flex items-start pb-4 last:pb-0",children:[e.jsx("span",{className:`absolute -left-[52px] w-[44px] text-right text-xs font-mono tabular-nums leading-5 ${t.isFinale?"font-semibold text-yellow-600 dark:text-yellow-400":"text-muted-foreground"}`,children:t.time}),e.jsx("div",{className:"absolute -left-[5px] top-1.5",children:t.isFinale?e.jsx("div",{className:"h-3 w-3 -ml-[1px] rounded-full bg-yellow-500 ring-2 ring-yellow-500/30"}):t.type==="race"?e.jsx("div",{className:"h-2.5 w-2.5 rounded-full bg-amber-500"}):e.jsx("div",{className:"h-2 w-2 rounded-full bg-blue-400"})}),e.jsx("div",{className:"pl-4",children:t.isFinale?e.jsxs("span",{className:"text-sm leading-5 font-bold text-yellow-700 dark:text-yellow-300",children:["â˜… ",t.label]}):e.jsx("span",{className:`text-sm leading-5 ${t.type==="race"?"font-semibold text-foreground":"text-muted-foreground"}`,children:t.label})})]},`${t.time}-${t.label}-${i}`))}),N.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Heure Ã  dÃ©finir"}),N.map(t=>e.jsxs("div",{className:"flex items-center gap-2.5 rounded-2xl border border-border/60 bg-muted/30 px-3 py-2.5",children:[e.jsx("div",{className:"h-2.5 w-2.5 rounded-full bg-amber-500/50 shrink-0"}),e.jsxs("span",{className:"text-sm font-medium",children:[D(t.event_code),t.race_type==="finale"&&(t.final_letter?` â€” Finale ${t.final_letter}`:" â€” Finale")]})]},t.id))]}),y.length===0&&N.length===0&&e.jsx("div",{className:"rounded-3xl border border-dashed border-border bg-card/60 p-6 text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Aucune course ce jour"})})]})}function ee(s){return new Date(s+"T00:00:00").toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})}function pt(s,n){if(!n||n===s)return ee(s);const d=new Date(s+"T00:00:00"),o=new Date(n+"T00:00:00");return d.getMonth()===o.getMonth()&&d.getFullYear()===o.getFullYear()?`${d.getDate()} â€“ ${o.toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})}`:`${ee(s)} â€“ ${ee(n)}`}function ht(s){const n=new Date;n.setHours(0,0,0,0);const d=new Date(s+"T00:00:00");return Math.round((d.getTime()-n.getTime())/(1e3*60*60*24))}function ft(s){return s<0?{label:"TerminÃ©e",variant:"outline"}:s===0?{label:"Aujourd'hui",variant:"default"}:{label:`J-${s}`,variant:"secondary"}}function Vt(){const[,s]=Re("/competition/:id"),[,n]=Fe(),[d,o]=v.useState("checklist"),p=s?.id??null,{data:u=[]}=S({queryKey:["competitions"],queryFn:()=>j.getCompetitions()}),a=v.useMemo(()=>u.find(i=>i.id===p)??null,[u,p]),{data:f=[]}=S({queryKey:["competition-races",p],queryFn:()=>j.getCompetitionRaces(p),enabled:!!p}),{data:g=[]}=S({queryKey:["race-routines",p],queryFn:()=>j.getRaceRoutines(p),enabled:!!p}),{data:w=[]}=S({queryKey:["routine-templates"],queryFn:()=>j.getRoutineTemplates()}),y=v.useRef(new Set);v.useEffect(()=>{if(!a||f.length===0)return;const i=new Date,c=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")}`,h=new Map;for(const b of g){const l=w.find(x=>x.id===b.routine_id);l&&h.set(b.race_id,l)}const m=[];for(const b of f){if(b.race_day!==c||!b.start_time)continue;const l=h.get(b.id);if(!l?.steps?.length)continue;const x=[...l.steps].sort((q,O)=>q.offset_minutes-O.offset_minutes)[0],[C,T]=b.start_time.slice(0,5).split(":").map(Number),$=C*60+T+x.offset_minutes,R=new Date(i);R.setHours(Math.floor($/60),$%60,0,0);const K=R.getTime()-Date.now();if(K<0)continue;const M=`${b.id}-${x.offset_minutes}`;if(y.current.has(M))continue;y.current.add(M);const X=b.race_type==="finale"?b.final_letter?` â€” Finale ${b.final_letter}`:" â€” Finale":"",Q=`ðŸŠ ${D(b.event_code)+X}`,B=`${x.label} â€” c'est parti !`,I=setTimeout(()=>{Notification.permission==="granted"&&navigator.serviceWorker?.ready.then(q=>{q.showNotification(Q,{body:B,icon:"/competition/icon-192.png",badge:"/competition/favicon.png",vibrate:[200,100,200],tag:`routine-${b.id}`,data:{url:`#/competition/${a.id}`}})})},K);m.push(I)}return()=>m.forEach(clearTimeout)},[a,f,g,w]);const N=a?ht(a.date):null,t=N!=null?ft(N):null;return a?e.jsxs("div",{className:"mx-auto max-w-3xl px-4 py-4 space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"mt-0.5 h-9 w-9 rounded-xl border border-border bg-card flex items-center justify-center hover:bg-muted transition shrink-0","aria-label":"Retour",children:e.jsx(ge,{className:"h-4 w-4"})}),e.jsxs("div",{className:"min-w-0 flex-1 space-y-1.5",children:[e.jsxs("div",{className:"flex items-start gap-2 flex-wrap",children:[e.jsx("h1",{className:"text-lg font-bold",children:a.name}),t&&e.jsx(Le,{variant:t.variant,className:"text-[10px] px-2 py-0.5 shrink-0",children:t.label})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(De,{className:"h-3 w-3"}),pt(a.date,a.end_date)]}),a.location&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ye,{className:"h-3 w-3"}),a.location]})]}),a.description&&e.jsx("p",{className:"text-xs text-muted-foreground/80 line-clamp-2",children:a.description})]})]}),e.jsxs(qe,{value:d,onValueChange:i=>o(i),children:[e.jsxs(Ae,{className:"grid h-auto w-full grid-cols-4 gap-1.5 bg-transparent p-0",children:[e.jsxs(H,{value:"checklist",className:"rounded-xl border bg-card px-2 py-2 text-[11px] data-[state=active]:border-violet-500 data-[state=active]:bg-violet-500/5 data-[state=active]:text-violet-700 dark:data-[state=active]:text-violet-300",children:[e.jsx(we,{className:"mr-1 h-3 w-3"}),"Check"]}),e.jsxs(H,{value:"courses",className:"rounded-xl border bg-card px-2 py-2 text-[11px] data-[state=active]:border-amber-500 data-[state=active]:bg-amber-500/5 data-[state=active]:text-amber-700 dark:data-[state=active]:text-amber-300",children:[e.jsx(te,{className:"mr-1 h-3 w-3"}),"Courses"]}),e.jsxs(H,{value:"routines",className:"rounded-xl border bg-card px-2 py-2 text-[11px] data-[state=active]:border-blue-500 data-[state=active]:bg-blue-500/5 data-[state=active]:text-blue-700 dark:data-[state=active]:text-blue-300",children:[e.jsx(me,{className:"mr-1 h-3 w-3"}),"Routines"]}),e.jsxs(H,{value:"timeline",className:"rounded-xl border bg-card px-2 py-2 text-[11px] data-[state=active]:border-emerald-500 data-[state=active]:bg-emerald-500/5 data-[state=active]:text-emerald-700 dark:data-[state=active]:text-emerald-300",children:[e.jsx(Je,{className:"mr-1 h-3 w-3"}),"Jour J"]})]}),e.jsx(z,{value:"checklist",className:"mt-4",children:e.jsx(et,{competitionId:a.id})}),e.jsx(z,{value:"courses",className:"mt-4",children:e.jsx(Ze,{competitionId:a.id,competitionDate:a.date,competitionEndDate:a.end_date})}),e.jsx(z,{value:"routines",className:"mt-4",children:e.jsx(it,{competitionId:a.id})}),e.jsx(z,{value:"timeline",className:"mt-4",children:e.jsx(xt,{competitionId:a.id,competitionDate:a.date,competitionEndDate:a.end_date})})]})]}):e.jsxs("div",{className:"mx-auto max-w-3xl px-4 py-4",children:[e.jsx("button",{type:"button",onClick:()=>n("/"),className:"h-9 w-9 rounded-xl border border-border bg-card flex items-center justify-center hover:bg-muted transition","aria-label":"Retour",children:e.jsx(ge,{className:"h-4 w-4"})}),e.jsxs("div",{className:"mt-8 text-center",children:[e.jsx(te,{className:"mx-auto h-10 w-10 text-muted-foreground/40"}),e.jsx("p",{className:"mt-3 text-sm font-medium",children:"CompÃ©tition introuvable"}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Elle a peut-Ãªtre Ã©tÃ© supprimÃ©e."})]})]})}export{Vt as default};
