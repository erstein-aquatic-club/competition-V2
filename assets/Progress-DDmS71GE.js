import{r as m,u as N,e as ut,j as e}from"./vendor-query-DyA9aSKS.js";import{a as p}from"./api-BkeZ2Fg9.js";import{c as mt}from"./date-DrpgLmFD.js";import{u as I,T as gt,C as Re,e as _e,B as xt,f as ht}from"./index-8Di4O-qC.js";import{T as ft,a as pt,b as oe,c as Y,d as jt,e as E}from"./table-DKaipv4M.js";import{T as yt,a as vt,b as Fe,c as Ke}from"./tabs-BExg10VC.js";import{T as Oe,a as A}from"./toggle-group-CJ2KZtu8.js";import{C as bt,a as Nt,b as wt}from"./collapsible-ChT84GF5.js";import{s as Be}from"./score-CwBbkHfb.js";import{i as St}from"./swim-BPI2NHad.js";import{g as Ct}from"./design-tokens-CKgCpdH6.js";import{b as V}from"./animations-CrcLFysI.js";import{I as Dt}from"./InlineBanner-DXLfjiP3.js";import{s as le,a as C,e as Tt,f as P}from"./vendor-date-B8Mnp-Vt.js";import{C as At}from"./chart-column-CrAZY2N1.js";import{m as R}from"./vendor-motion-CMsaQ8FX.js";import{a as L,A as $e,X as q,T as M,b as Ie,P as Pt,d as Lt,C as Mt,L as Ee,B as qe,Y as de,e as ce,f as kt,g as Rt}from"./vendor-charts-BrQ8X25f.js";import{T as _t}from"./trending-down-B_KiZKAj.js";import{C as Ft}from"./chevron-down-DX7N3maC.js";import"./vendor-react-BzrpNAyj.js";import"./vendor-supabase-DFPLkPj_.js";import"./index-C6PqLaNN.js";import"./index-CB31xJTc.js";function J({label:x,value:u,max:g,invert:o=!1}){const j=u!==null?Math.min(100,u/g*100):0,w=Be(u??null,{invert:o})??"hsl(var(--muted-foreground))";return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-28 shrink-0 text-xs text-muted-foreground truncate",children:x}),e.jsx("div",{className:"relative h-2 flex-1 rounded-full bg-muted overflow-hidden",children:e.jsx(R.div,{className:"absolute inset-y-0 left-0 rounded-full",style:{backgroundColor:w},initial:{width:0},animate:{width:`${j}%`},transition:{duration:.6,ease:"easeOut"}})}),e.jsx("span",{className:"w-10 text-right text-sm font-mono font-semibold tabular-nums",children:u!==null?u.toFixed(1):"-"})]})}function Ve({value:x,unit:u,label:g,trend:o,trendLabel:j}){return e.jsxs(R.div,{className:"flex flex-col items-center gap-0.5 py-2",variants:V,initial:"hidden",animate:"visible",children:[e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-4xl font-mono font-bold tracking-tight",children:x}),u&&e.jsx("span",{className:"text-lg font-mono text-muted-foreground",children:u})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:g}),o!=null&&e.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-xs font-medium ${o>=0?"bg-emerald-500/10 text-emerald-600":"bg-red-500/10 text-red-600"}`,children:[o>=0?e.jsx(ht,{className:"h-3 w-3"}):e.jsx(_t,{className:"h-3 w-3"}),o>=0?"+":"",o.toFixed(0),"%",j?` ${j}`:""]})]})}function k({value:x,label:u,colored:g,colorValue:o,invert:j}){const w="rounded-full px-3 py-1 text-sm font-mono";if(g&&o!==null&&o!==void 0){const d=Be(o,{invert:j})??"hsl(var(--muted-foreground))";return e.jsx("span",{className:w,style:{backgroundColor:d,color:Ct(d)},children:x})}return e.jsxs("span",{className:`${w} bg-muted text-muted-foreground`,children:[x,u?` ${u}`:""]})}function ue(){return e.jsx("div",{className:"space-y-3 animate-pulse motion-reduce:animate-none",children:e.jsx("div",{className:"h-[180px] w-full rounded-xl bg-muted"})})}function me({title:x,children:u}){const[g,o]=m.useState(!1);return e.jsxs(bt,{open:g,onOpenChange:o,children:[e.jsxs(Nt,{className:"flex w-full items-center justify-between rounded-lg bg-muted/50 px-4 py-3 text-sm font-semibold hover:bg-muted transition-colors",children:[x,e.jsx(Ft,{className:`h-4 w-4 text-muted-foreground transition-transform duration-200 ${g?"rotate-180":""}`})]}),e.jsx(wt,{className:"pt-4 animate-in fade-in slide-in-from-top-2 motion-reduce:animate-none",children:u})]})}const X={borderRadius:"8px",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"};function is(){const x=I(t=>t.user),u=I(t=>t.userId),g=I(t=>t.role),o=I(t=>t.selectedAthleteId),j=I(t=>t.selectedAthleteName),w=(g==="coach"||g==="admin")&&(o!==null||!!j),d=w?j:x,h=w?o:u,f=h??d,[Z]=m.useState("all"),[ge]=m.useState(""),[xe]=m.useState(""),[D,he]=m.useState(30),[b,fe]=m.useState(30);m.useEffect(()=>{const t=()=>{he(30),fe(30)};return window.addEventListener("nav:reset",t),()=>window.removeEventListener("nav:reset",t)},[]);const{data:ee=[]}=N({queryKey:["competitions"],queryFn:()=>p.getCompetitions()}),{data:B}=N({queryKey:["my-competition-ids",f],queryFn:()=>p.getMyCompetitionIds(h)}),{data:pe}=N({queryKey:["assignments",f],queryFn:()=>p.getAssignments(d,h),enabled:!!d}),{data:je=[]}=N({queryKey:["planned-absences",f],queryFn:()=>h?p.getPlannedAbsences({userId:h}):p.getMyPlannedAbsences()}),ye=m.useMemo(()=>new Set(je.map(t=>t.date)),[je]),{data:T,isLoading:ze}=N({queryKey:["sessions",f],queryFn:()=>p.getSessions(d,h),enabled:!!d}),_=ut({queryKey:["strength_history",f,"progress",Z,ge,xe],queryFn:({pageParam:t=0})=>p.getStrengthHistory(d,{athleteId:h,limit:10,offset:t,order:"desc",status:Z==="all"?void 0:Z,from:ge||void 0,to:xe||void 0}),enabled:!!d,getNextPageParam:t=>{const s=t.pagination.offset+t.pagination.limit;return s<t.pagination.total?s:void 0},initialPageParam:0}),ve=_.data?.pages.flatMap(t=>t.runs)??[],z=le(C(new Date,b)).toISOString(),H=Tt(new Date).toISOString(),be=le(C(new Date,b*2)).toISOString(),Ne=le(C(new Date,b)).toISOString(),{data:we,isLoading:He}=N({queryKey:["strength_history_summary",f,"progress",b,z,H],queryFn:()=>p.getStrengthHistory(d,{athleteId:h,limit:200,order:"desc",from:z,to:H}),enabled:!!d}),{data:We,isLoading:Ge}=N({queryKey:["strength_history_aggregate",f,"progress",b,z,H],queryFn:()=>p.getStrengthHistoryAggregate(d,{athleteId:h,period:"day",limit:200,order:"asc",from:z,to:H}),enabled:!!d}),{data:Qe}=N({queryKey:["strength_history_aggregate_prev",f,"progress",b,be,Ne],queryFn:()=>p.getStrengthHistoryAggregate(d,{athleteId:h,period:"day",limit:200,order:"asc",from:be,to:Ne}),enabled:!!d}),Se=He||Ge,te=we?.runs??[],Ue=we?.exercise_summary??[],F=We?.periods??[],Ye=Qe?.periods??[],Ce=m.useMemo(()=>!B||B.length===0?ee:ee.filter(t=>B.includes(t.id)),[ee,B]),y=m.useMemo(()=>{const t=new Date().toISOString().slice(0,10);return Ce.filter(s=>s.date.slice(0,10)>=t).sort((s,a)=>s.date.localeCompare(a.date))[0]??null},[Ce]),se=m.useMemo(()=>{if(!y)return null;const t=new Date;t.setHours(0,0,0,0);const s=new Date(y.date.slice(0,10)+"T00:00:00");return Math.round((s.getTime()-t.getTime())/(1e3*60*60*24))},[y]),De=m.useMemo(()=>{const t=`swim-dashboard-v2:${f}:presenceDefaults`;try{const a=window.localStorage.getItem(t);if(a)return JSON.parse(a)}catch{}const s={};for(let a=0;a<7;a++)s[a]={AM:!0,PM:!0};return s},[f]),W=m.useMemo(()=>y?mt({compDate:y.date.slice(0,10),assignments:pe,absenceDates:ye,presenceDefaults:De}):null,[y,pe,ye,De]),Je=t=>{if(!T)return[];const s=C(new Date,t),a=T.filter(n=>new Date(n.date)>=s).reverse(),l=new Map;return a.forEach(n=>{const r=P(new Date(n.date),"dd/MM");l.has(r)||l.set(r,{date:r,distance:0,effort:0,rpe:0,performance:0,engagement:0,fatigue:0,count:0,rpeCount:0,performanceCount:0,engagementCount:0,fatigueCount:0});const i=l.get(r);i.distance+=n.distance,i.effort+=n.effort,i.count+=1,n.rpe!==null&&n.rpe!==void 0&&(i.rpe+=n.rpe,i.rpeCount+=1),n.performance!==null&&n.performance!==void 0&&(i.performance+=n.performance,i.performanceCount+=1),n.engagement!==null&&n.engagement!==void 0&&(i.engagement+=n.engagement,i.engagementCount+=1),n.fatigue!==null&&n.fatigue!==void 0&&(i.fatigue+=n.fatigue,i.fatigueCount+=1)}),Array.from(l.values()).map(n=>({...n,effort:Math.round(n.effort/n.count*10)/10,rpe:n.rpeCount?Math.round(n.rpe/n.rpeCount*10)/10:null,performance:n.performanceCount?Math.round(n.performance/n.performanceCount*10)/10:null,engagement:n.engagementCount?Math.round(n.engagement/n.engagementCount*10)/10:null,fatigue:n.fatigueCount?Math.round(n.fatigue/n.fatigueCount*10)/10:null}))},K=T?T.filter(t=>new Date(t.date)>=C(new Date,D)):[],O=K.length,c=K.reduce((t,s)=>(t.distance+=s.distance,t.duration+=s.duration,s.rpe!==null&&s.rpe!==void 0&&(t.rpeSum+=s.rpe,t.rpeCount+=1),s.performance!==null&&s.performance!==void 0&&(t.performanceSum+=s.performance,t.performanceCount+=1),s.engagement!==null&&s.engagement!==void 0&&(t.engagementSum+=s.engagement,t.engagementCount+=1),s.fatigue!==null&&s.fatigue!==void 0&&(t.fatigueSum+=s.fatigue,t.fatigueCount+=1),t),{distance:0,duration:0,rpeSum:0,rpeCount:0,performanceSum:0,performanceCount:0,engagementSum:0,engagementCount:0,fatigueSum:0,fatigueCount:0}),Xe=c.rpeCount?c.rpeSum/c.rpeCount:null,Ze=c.performanceCount?c.performanceSum/c.performanceCount:null,et=c.engagementCount?c.engagementSum/c.engagementCount:null,tt=c.fatigueCount?c.fatigueSum/c.fatigueCount:null,st=O?c.duration/O:0,nt=O?c.distance/O:0,Te=Je(D),at=T?((t,s,a,l)=>{const n=new Date,r=C(n,a*2),i=C(n,a),$=s.filter(S=>{const v=new Date(S.date);return v>=r&&v<i}).reduce((S,v)=>S+(v.distance??0),0);return $===0?null:(t-$)/$*100})(c.distance,T,D):null,ne=["NL","DOS","BR","PAP","QN"],Ae={NL:"NL",DOS:"Dos",BR:"Brasse",PAP:"Pap",QN:"4N"},Pe={NL:"hsl(210, 80%, 55%)",DOS:"hsl(160, 60%, 45%)",BR:"hsl(35, 85%, 55%)",PAP:"hsl(280, 60%, 55%)",QN:"hsl(340, 70%, 55%)"},G=m.useMemo(()=>{if(!K.length)return{pie:[],daily:[],hasData:!1};const t={NL:0,DOS:0,BR:0,PAP:0,QN:0};let s=!1;const a=new Map;for(const r of K){const i=r.stroke_distances;if(!i)continue;const U=P(new Date(r.date),"dd/MM");a.has(U)||a.set(U,{NL:0,DOS:0,BR:0,PAP:0,QN:0});const $=a.get(U);for(const S of ne){const v=i[S];v&&v>0&&(t[S]+=v,$[S]+=v,s=!0)}}const l=ne.filter(r=>t[r]>0).map(r=>({name:Ae[r],value:t[r],fill:Pe[r]})),n=Array.from(a.entries()).map(([r,i])=>({date:r,...i}));return{pie:l,daily:n,hasData:s}},[K]),ae=t=>{const a=(Array.isArray(t?.logs)?t.logs:[]).map(r=>r?.rpe!==null&&r?.rpe!==void 0?Number(r.rpe):null).filter(r=>r!==null&&Number.isFinite(r));if(a.length>0)return a.reduce((r,i)=>r+i,0)/a.length;const l=t?.feeling??t?.rpe??null,n=l!=null?Number(l):null;return n!==null&&Number.isFinite(n)?n:null},rt=t=>t==null||Number.isNaN(t)?"-":t.toFixed(1),Le=[...te].sort((t,s)=>{const a=new Date(t.started_at||t.date||t.created_at||0).getTime(),l=new Date(s.started_at||s.date||s.created_at||0).getTime();return a-l}).map(t=>({date:P(new Date(t.started_at||t.date||t.created_at||new Date),"dd/MM"),feeling:ae(t)})),Me=F.map(t=>({date:t.period,label:P(new Date(t.period),"dd/MM"),tonnage:Math.round(t.tonnage??0),volume:Math.round(t.volume??0)})),it=F.reduce((t,s)=>t+(s.tonnage??0),0),ot=F.reduce((t,s)=>t+(s.volume??0),0),lt=te.length,re=te.map(t=>ae(t)).filter(t=>t!==null&&Number.isFinite(t)),Q=re.length?re.reduce((t,s)=>t+s,0)/re.length:null,ie=[...Ue].map(t=>({exerciseId:Number(t.exercise_id),name:t.exercise_name||`Exercice ${t.exercise_id}`,totalSets:Number(t.total_sets??0),totalReps:Number(t.total_reps??0),totalVolume:Number(t.total_volume??0),maxWeight:t.max_weight!==null&&t.max_weight!==void 0?Number(t.max_weight):null,lastPerformedAt:t.last_performed_at??null})).sort((t,s)=>s.totalVolume-t.totalVolume),dt=(()=>{if(!F.length)return null;const t=F.reduce((a,l)=>a+(l.tonnage??0),0),s=Ye.reduce((a,l)=>a+(l.tonnage??0),0);return s===0?null:(t-s)/s*100})(),ke=ie.slice(0,8),ct=t=>{if(!t)return"-";const s=new Date(t);return Number.isNaN(s.getTime())?"-":P(s,"dd/MM/yyyy")};return e.jsxs("div",{className:"space-y-4 pb-4",children:[e.jsx("div",{className:"sticky top-0 z-overlay -mx-4 backdrop-blur-md bg-background/90 border-b border-primary/15",children:e.jsxs("div",{className:"px-4 py-2.5 flex items-center gap-2.5",children:[e.jsx("div",{className:"flex items-center justify-center h-7 w-7 rounded-lg bg-primary text-primary-foreground",children:e.jsx(At,{className:"h-3.5 w-3.5"})}),e.jsx("h1",{className:"text-lg font-display font-bold uppercase italic tracking-tight text-primary",children:"Progression"})]})}),e.jsx(Dt,{variant:"amber",icon:e.jsx(gt,{}),label:y?.name,badge:se===0?"Aujourd'hui":`J-${se}`,sublabel:y?.location,subbadge:W!=null&&W>0?`${W} séance${W>1?"s":""}`:void 0,visible:!!y&&se!=null}),e.jsxs(yt,{defaultValue:"swim",className:"w-full",children:[e.jsxs(vt,{className:"grid w-full max-w-[280px] grid-cols-2",children:[e.jsx(Fe,{value:"swim",children:"Natation"}),e.jsx(Fe,{value:"strength",children:"Musculation"})]}),e.jsxs(Ke,{value:"swim",className:"space-y-4 mt-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(Oe,{type:"single",size:"sm",variant:"outline",value:String(D),onValueChange:t=>t&&he(Number(t)),className:"gap-1",children:[e.jsx(A,{value:"7",className:"h-8 px-3 text-xs",children:"7j"}),e.jsx(A,{value:"30",className:"h-8 px-3 text-xs",children:"30j"}),e.jsx(A,{value:"365",className:"h-8 px-3 text-xs",children:"1 an"})]})}),e.jsx(Ve,{value:(c.distance/1e3).toFixed(1),unit:"km",label:`volume sur ${D} jours`,trend:at,trendLabel:"vs période préc."}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[e.jsx(k,{value:`${O} séances`}),e.jsx(k,{value:`${Math.round(nt).toLocaleString()}m moy`}),e.jsx(k,{value:`${Math.round(st)}min moy`})]}),e.jsx(R.div,{variants:V,initial:"hidden",animate:"visible",children:e.jsx(Re,{className:"border-0 shadow-none bg-transparent",children:e.jsx(_e,{className:"p-0 h-[140px] w-full",children:ze?e.jsx(ue,{}):Te.length===0?e.jsx("div",{className:"flex h-full items-center justify-center text-sm text-muted-foreground",children:"Aucune donnée disponible."}):e.jsx(L,{width:"100%",height:"100%",children:e.jsxs($e,{data:Te,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"swimVolumeGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),e.jsx("stop",{offset:"100%",stopColor:"hsl(var(--primary))",stopOpacity:0})]})}),e.jsx(q,{dataKey:"date",fontSize:10,tickLine:!1,axisLine:!1}),e.jsx(M,{contentStyle:X,formatter:t=>[`${t.toLocaleString()}m`,"Volume"]}),e.jsx(Ie,{type:"monotone",dataKey:"distance",stroke:"hsl(var(--primary))",strokeWidth:2,fill:"url(#swimVolumeGradient)",dot:!1,activeDot:{r:5,strokeWidth:2}})]})})})})}),e.jsxs(R.div,{className:"space-y-3",variants:V,initial:"hidden",animate:"visible",children:[e.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Ressentis moyens"}),e.jsx(J,{label:"Difficulté",value:Xe,max:5,invert:!0}),e.jsx(J,{label:"Performance",value:Ze,max:5}),e.jsx(J,{label:"Engagement",value:et,max:5}),e.jsx(J,{label:"Fatigue",value:tt,max:5,invert:!0})]}),G.hasData&&e.jsx(me,{title:`Répartition par nage (${D}j)`,children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx("div",{className:"h-[280px] w-full",children:e.jsx(L,{width:"100%",height:"100%",children:e.jsxs(Pt,{children:[e.jsx(Lt,{data:G.pie,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:90,label:({name:t,percent:s})=>`${t} ${(s*100).toFixed(0)}%`,children:G.pie.map((t,s)=>e.jsx(Mt,{fill:t.fill},`pie-${s}`))}),e.jsx(M,{formatter:t=>[`${t.toLocaleString()}m`,"Distance"]}),e.jsx(Ee,{})]})})}),e.jsx("div",{className:"h-[280px] w-full",children:e.jsx(L,{width:"100%",height:"100%",children:e.jsxs(qe,{data:G.daily,children:[e.jsx(q,{dataKey:"date",fontSize:10,tickLine:!1,axisLine:!1}),e.jsx(de,{fontSize:10,tickLine:!1,axisLine:!1}),e.jsx(M,{}),ne.map(t=>e.jsx(ce,{dataKey:t,stackId:"strokes",name:Ae[t],fill:Pe[t],radius:0},t)),e.jsx(Ee,{})]})})})]})})]}),e.jsxs(Ke,{value:"strength",className:"space-y-4 mt-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(Oe,{type:"single",size:"sm",variant:"outline",value:String(b),onValueChange:t=>t&&fe(Number(t)),className:"gap-1",children:[e.jsx(A,{value:"7",className:"h-8 px-3 text-xs",children:"7j"}),e.jsx(A,{value:"30",className:"h-8 px-3 text-xs",children:"30j"}),e.jsx(A,{value:"365",className:"h-8 px-3 text-xs",children:"1 an"})]})}),e.jsx(Ve,{value:Math.round(it).toLocaleString(),unit:"kg",label:`tonnage sur ${b} jours`,trend:dt,trendLabel:"vs période préc."}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[e.jsx(k,{value:`${lt} séances`}),e.jsx(k,{value:`${Math.round(ot).toLocaleString()} reps`}),e.jsx(k,{value:`RPE ${Q!==null?Q.toFixed(1):"-"}/10`,colored:!0,colorValue:Q!==null?Q/2:null,invert:!0})]}),e.jsx(R.div,{variants:V,initial:"hidden",animate:"visible",children:e.jsx(Re,{className:"border-0 shadow-none bg-transparent",children:e.jsx(_e,{className:"p-0 h-[140px] w-full",children:Se?e.jsx(ue,{}):Me.length===0?e.jsx("div",{className:"flex h-full items-center justify-center text-sm text-muted-foreground",children:"Aucune donnée disponible."}):e.jsx(L,{width:"100%",height:"100%",children:e.jsxs(kt,{data:Me,children:[e.jsx(q,{dataKey:"label",fontSize:10,tickLine:!1,axisLine:!1}),e.jsx(M,{contentStyle:X}),e.jsx(ce,{dataKey:"tonnage",name:"Tonnage (kg)",fill:"hsl(var(--primary))",radius:[4,4,0,0],opacity:.7}),e.jsx(Rt,{type:"monotone",dataKey:"volume",name:"Volume (reps)",stroke:"hsl(var(--accent))",strokeWidth:2,dot:!1})]})})})})}),e.jsxs(R.div,{variants:V,initial:"hidden",animate:"visible",children:[e.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3",children:"Ressenti par séance"}),e.jsx("div",{className:"h-[130px] w-full",children:Se?e.jsx(ue,{}):Le.length===0?e.jsx("div",{className:"flex h-full items-center justify-center text-sm text-muted-foreground",children:"Aucune donnée disponible."}):e.jsx(L,{width:"100%",height:"100%",children:e.jsxs($e,{data:Le,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"strengthFeelingGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(var(--foreground))",stopOpacity:.15}),e.jsx("stop",{offset:"100%",stopColor:"hsl(var(--foreground))",stopOpacity:0})]})}),e.jsx(q,{dataKey:"date",fontSize:10,tickLine:!1,axisLine:!1}),e.jsx(de,{domain:[0,10],hide:!0}),e.jsx(M,{contentStyle:X,formatter:t=>[t!==null?t.toFixed(1):"-","RPE"]}),e.jsx(Ie,{type:"monotone",dataKey:"feeling",stroke:"hsl(var(--foreground))",strokeWidth:2,fill:"url(#strengthFeelingGradient)",dot:{r:4,fill:"hsl(var(--background))",stroke:"hsl(var(--foreground))",strokeWidth:2},activeDot:{r:6}})]})})})]}),e.jsx(me,{title:"Détail par exercice",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-[220px] w-full",children:ke.length===0?e.jsx("div",{className:"flex h-full items-center justify-center text-sm text-muted-foreground",children:"Aucun exercice enregistré."}):e.jsx(L,{width:"100%",height:"100%",children:e.jsxs(qe,{data:ke,layout:"vertical",children:[e.jsx(q,{type:"number",fontSize:10,tickLine:!1,axisLine:!1}),e.jsx(de,{type:"category",dataKey:"name",fontSize:10,tickLine:!1,axisLine:!1,width:100}),e.jsx(M,{contentStyle:X,formatter:t=>[`${t.toLocaleString()} kg`,"Volume"]}),e.jsx(ce,{dataKey:"totalVolume",fill:"hsl(var(--primary))",radius:[0,4,4,0]})]})})}),e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsxs(ft,{children:[e.jsx(pt,{children:e.jsxs(oe,{children:[e.jsx(Y,{children:"Exercice"}),e.jsx(Y,{className:"text-right",children:"Volume"}),e.jsx(Y,{className:"text-right",children:"Max"}),e.jsx(Y,{className:"text-right",children:"Dernier"})]})}),e.jsx(jt,{children:ie.length===0?e.jsx(oe,{children:e.jsx(E,{colSpan:4,className:"text-center text-sm text-muted-foreground",children:"Aucun exercice enregistré."})}):ie.map(t=>e.jsxs(oe,{children:[e.jsx(E,{className:"font-medium text-sm",children:t.name}),e.jsxs(E,{className:"text-right font-mono text-sm",children:[t.totalVolume.toLocaleString()," kg"]}),e.jsx(E,{className:"text-right font-mono text-sm",children:t.maxWeight!==null?St(t.maxWeight)?"PDC":`${t.maxWeight} kg`:"-"}),e.jsx(E,{className:"text-right text-xs text-muted-foreground",children:ct(t.lastPerformedAt)})]},t.exerciseId))})]})})]})}),e.jsx(me,{title:"Historique récent",children:e.jsxs("div",{className:"space-y-3",children:[ve.length===0&&e.jsx("div",{className:"text-center text-sm text-muted-foreground py-6",children:"Aucun historique disponible."}),ve.map(t=>e.jsxs("div",{className:"flex items-center justify-between border-b border-border/40 pb-2 last:border-b-0 last:pb-0",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:P(new Date(t.started_at||t.date||t.created_at||new Date),"dd/MM/yyyy")}),e.jsx("div",{className:"text-xs text-muted-foreground",children:t.status||"Séance"})]}),e.jsxs("div",{className:"text-sm font-mono font-semibold",children:[rt(ae(t)),"/10"]})]},t.id)),_.hasNextPage&&e.jsx(xt,{variant:"outline",size:"sm",className:"w-full",onClick:()=>_.fetchNextPage(),disabled:_.isFetchingNextPage,children:_.isFetchingNextPage?"Chargement...":"Charger plus"})]})})]})]})]})}export{J as ProgressBar,is as default};
