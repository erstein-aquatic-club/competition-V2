import{c as V,a as b}from"./index-BVHOoS5N.js";import{r as $,j as h}from"./vendor-query-DyA9aSKS.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],v=V("activity",N);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],E=V("hash",C),I=["V0","V1","V2","V3","Max","Prog"],R={V0:"bg-intensity-1",V1:"bg-intensity-2",V2:"bg-intensity-3",V3:"bg-intensity-4",Max:"bg-intensity-5",Prog:"bg-intensity-prog"},T=t=>t==="Max"?"MAX":t==="Prog"?"Prog ↗":t,_={souple:"V0",facile:"V0",relache:"V0",relâché:"V0"},j={pap:"Pap",papillon:"Pap",crawl:"Crawl",dos:"Dos",brasse:"Brasse","4n":"4 nages","4 nages":"4 nages",spe:"Spé",spé:"Spé"},L={nc:"NC",educ:"Éducatif",jambes:"Jambes"},D=t=>t?j[t]??t:null,P=t=>{if(!t)return null;const n=t.trim();if(!n)return null;const e=n.toLowerCase();if(e==="prog"||e==="progressif")return"Prog";if(_[e])return _[e];const r=n.toUpperCase();if(r==="MAX")return"Max";if(r.startsWith("V")){const c=Number.parseInt(r.slice(1),10);if(Number.isFinite(c)&&c>=4)return"Max";if(I.includes(r))return r}return n},H=t=>{if(!t)return"";const n=Math.floor(t/60),e=t%60;return n>0&&e>0?`${n}'${e.toString().padStart(2,"0")}`:n>0?`${n}'00`:`${e}s`};function K(t){if(!t||!Number.isFinite(t)||t<=0)return"";const n=Math.floor(t/60),e=Math.floor(t%60),r=Math.round(t%1*100);return n>0?`${n}:${String(e).padStart(2,"0")}:${String(r).padStart(2,"0")}`:`${e}:${String(r).padStart(2,"0")}`}function O(t){const n=t.trim();if(!n)return 0;const e=n.split(":");if(e.length===3){const c=parseInt(e[0],10)||0,i=parseInt(e[1],10)||0,u=parseInt(e[2],10)||0;return c*60+i+u/100}if(e.length===2){const c=parseInt(e[0],10)||0,i=parseInt(e[1],10)||0;return c+i/100}const r=parseFloat(n);return Number.isFinite(r)?r:0}const z=(t=[])=>{const n=new Map;return t.forEach((e,r)=>{const c=e.raw_payload??{},i=typeof c=="object"?c:{},u=i.block_title||i.section||"Bloc",p=Number(i.block_order??0),d=`${p}-${u}`,o=i.block_equipment??i.equipment,x=i.block_modalities??i.modalities??null,y=Array.isArray(o)?o:o?String(o).split(",").map(a=>a.trim()).filter(Boolean):[];n.has(d)||n.set(d,{key:d,title:u,description:i.block_description??null,modalities:x,equipment:y.length?y:null,order:Number.isFinite(p)?p:0,repetitions:i.block_repetitions??null,items:[]});const w=n.get(d),f=i.exercise_repetitions??null,l=e.distance??null,k=e.label||(f&&l?`${f}x${l}m`:null)||(l?`${l}m`:null),g=i.exercise_modalities??e.notes??null,s=i.exercise_equipment??i.equipment,M=Array.isArray(s)?s:s?String(s).split(",").map(a=>a.trim()).filter(Boolean):[];w.items.push({...e,label:k||i.exercise_label||`Exercice ${r+1}`,notes:g,raw_payload:{...i,exercise_modalities:g,exercise_equipment:M}})}),Array.from(n.values()).sort((e,r)=>e.order!==r.order?e.order-r.order:e.title.localeCompare(r.title))};function m(t,n){return t.replace(/\D/g,"").slice(0,n)}function q(t){const n=t.trim();if(!n)return{minutes:"",seconds:"",hundredths:""};const e=n.split(":");if(e.length>=3)return{minutes:m(e[0]??"",2),seconds:m(e[1]??"",2),hundredths:m(e[2]??"",2)};if(e.length===2)return{minutes:"",seconds:m(e[0]??"",2),hundredths:m(e[1]??"",2)};const r=m(n,6);return r.length<=2?{minutes:"",seconds:r,hundredths:""}:r.length<=4?{minutes:"",seconds:r.slice(0,-2),hundredths:r.slice(-2)}:{minutes:r.slice(0,-4),seconds:r.slice(-4,-2),hundredths:r.slice(-2)}}function A({minutes:t,seconds:n,hundredths:e}){return!t&&!n&&!e?"":t?`${t}:${n}:${e}`:`${n}:${e}`}function X({value:t,onChange:n,onBlur:e,size:r="default",className:c}){const i=$.useRef(null),u=$.useRef(null),p=$.useRef(null),d=$.useRef(null),o=q(t),x=r==="compact"?"h-6 w-8 rounded-md px-1 text-xs":"h-8 w-10 rounded-md px-2 text-sm",y=r==="compact"?"text-xs":"text-sm",w=s=>{n(A({...o,...s}))},f=()=>{e&&window.requestAnimationFrame(()=>{i.current?.contains(document.activeElement)||e()})},l=(s,M,a)=>{const S=m(M,2);w({[s]:S}),S.length===2&&a?.current&&(a.current.focus(),a.current.select())},k=(s,M,a)=>{s.key==="Backspace"&&M.length===0&&a?.current&&(a.current.focus(),a.current.select())},g=s=>{s.currentTarget.select()};return h.jsxs("div",{ref:i,className:b("inline-flex items-center gap-1",c),children:[h.jsx("input",{ref:u,type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"m",value:o.minutes,onChange:s=>l("minutes",s.target.value,p),onKeyDown:s=>k(s,o.minutes),onFocus:g,onBlur:f,className:b("border border-input bg-background text-center tabular-nums outline-none focus:ring-1 focus:ring-ring",x),"aria-label":"Minutes"}),h.jsx("span",{className:b("text-muted-foreground font-semibold tabular-nums",y),children:":"}),h.jsx("input",{ref:p,type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"ss",value:o.seconds,onChange:s=>l("seconds",s.target.value,d),onKeyDown:s=>k(s,o.seconds,u),onFocus:g,onBlur:f,className:b("border border-input bg-background text-center tabular-nums outline-none focus:ring-1 focus:ring-ring",x),"aria-label":"Secondes"}),h.jsx("span",{className:b("text-muted-foreground font-semibold tabular-nums",y),children:":"}),h.jsx("input",{ref:d,type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"cc",value:o.hundredths,onChange:s=>l("hundredths",s.target.value),onKeyDown:s=>k(s,o.hundredths,p),onFocus:g,onBlur:f,className:b("border border-input bg-background text-center tabular-nums outline-none focus:ring-1 focus:ring-ring",x),"aria-label":"Centiemes"})]})}export{v as A,E as H,X as S,D as a,T as b,H as c,K as f,z as g,R as i,P as n,O as p,L as s};
